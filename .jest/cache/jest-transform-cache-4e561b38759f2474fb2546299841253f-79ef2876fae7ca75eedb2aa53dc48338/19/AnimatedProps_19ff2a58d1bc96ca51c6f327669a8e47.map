{"version":3,"names":["_NativeAnimatedHelper","_interopRequireDefault","require","_RendererProxy","_flattenStyle","_AnimatedEvent","_AnimatedNode2","_AnimatedObject","_AnimatedStyle","_invariant","_Object$hasOwn","_callSuper","t","o","e","_getPrototypeOf2","default","_possibleConstructorReturn2","_isNativeReflectConstruct","Reflect","construct","constructor","apply","Boolean","prototype","valueOf","call","_superPropGet","r","p","_get2","createAnimatedProps","inputProps","allowlist","nodeKeys","nodes","props","keys","Object","ii","length","key","value","staticValue","hasOwn","node","flatStyle","flattenStyle","AnimatedStyle","from","style","AnimatedNode","AnimatedObject","push","__DEV__","console","error","_callback","_classPrivateFieldLooseKey2","_nodeKeys","_nodes","_props","_target","_connectAnimatedView","_disconnectAnimatedView","AnimatedProps","exports","_AnimatedNode","callback","config","_this","_classCallCheck2","defineProperty","_disconnectAnimatedView2","_connectAnimatedView2","writable","_createAnimatedProps","_createAnimatedProps2","_slicedToArray2","_classPrivateFieldLooseBase2","_inherits2","_createClass2","__getValue","AnimatedEvent","__getHandler","__getValueWithStaticProps","staticProps","assign","maybeNode","staticStyle","flatStaticStyle","mutableStyle","__replaceAnimatedNodeWithValues","__getValueForStyle","__getNativeAnimatedEventTuples","tuples","__isNative","__getAnimatedValue","__attach","__addChild","__detach","__removeChild","update","__makeNative","platformConfig","setNativeView","instance","_classPrivateFieldLoo","connectedViewTag","__restoreDefaultValues","NativeAnimatedHelper","API","restoreDefaultValues","__getNativeTag","__getNativeConfig","__getPlatformConfig","propsConfig","type","debugID","__getDebugID","target","invariant","viewTag","findNodeHandle","process","env","NODE_ENV","Error","connectAnimatedNodeToView","disconnectAnimatedNodeFromView","_hasOwnProp","hasOwnProperty","obj","prop"],"sources":["AnimatedProps.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n * @format\n */\n\nimport type {PlatformConfig} from '../AnimatedPlatformConfig';\nimport type {AnimatedNodeConfig} from './AnimatedNode';\nimport type {AnimatedStyleAllowlist} from './AnimatedStyle';\n\nimport NativeAnimatedHelper from '../../../src/private/animated/NativeAnimatedHelper';\nimport {findNodeHandle} from '../../ReactNative/RendererProxy';\nimport flattenStyle from '../../StyleSheet/flattenStyle';\nimport {AnimatedEvent} from '../AnimatedEvent';\nimport AnimatedNode from './AnimatedNode';\nimport AnimatedObject from './AnimatedObject';\nimport AnimatedStyle from './AnimatedStyle';\nimport invariant from 'invariant';\n\nexport type AnimatedPropsAllowlist = $ReadOnly<{\n  style?: ?AnimatedStyleAllowlist,\n  [key: string]: true | AnimatedStyleAllowlist,\n}>;\n\ntype TargetView = {\n  +instance: TargetViewInstance,\n  connectedViewTag: ?number,\n};\ntype TargetViewInstance = React.ElementRef<React.ElementType>;\n\nfunction createAnimatedProps(\n  inputProps: {[string]: mixed},\n  allowlist: ?AnimatedPropsAllowlist,\n): [$ReadOnlyArray<string>, $ReadOnlyArray<AnimatedNode>, {[string]: mixed}] {\n  const nodeKeys: Array<string> = [];\n  const nodes: Array<AnimatedNode> = [];\n  const props: {[string]: mixed} = {};\n\n  const keys = Object.keys(inputProps);\n  for (let ii = 0, length = keys.length; ii < length; ii++) {\n    const key = keys[ii];\n    const value = inputProps[key];\n    let staticValue = value;\n\n    if (allowlist == null || hasOwn(allowlist, key)) {\n      let node;\n      if (key === 'style') {\n        // Ignore `style` if it is not an object (or array).\n        if (typeof value === 'object' && value != null) {\n          // Even if we do not find any `AnimatedNode` values in `style`, we\n          // still need to use the flattened `style` object because static\n          // values can shadow `AnimatedNode` values. We need to make sure that\n          // we propagate the flattened `style` object to the `props` object.\n          const flatStyle = flattenStyle(value as $FlowFixMe);\n          node = AnimatedStyle.from(flatStyle, allowlist?.style, value);\n          staticValue = flatStyle;\n        }\n      } else if (value instanceof AnimatedNode) {\n        node = value;\n      } else {\n        node = AnimatedObject.from(value);\n      }\n      if (node == null) {\n        props[key] = staticValue;\n      } else {\n        nodeKeys.push(key);\n        nodes.push(node);\n        props[key] = node;\n      }\n    } else {\n      if (__DEV__) {\n        // WARNING: This is a potentially expensive check that we should only\n        // do in development. Without this check in development, it might be\n        // difficult to identify which props need to be allowlisted.\n        if (AnimatedObject.from(inputProps[key]) != null) {\n          console.error(\n            `AnimatedProps: ${key} is not allowlisted for animation, but it ` +\n              'contains AnimatedNode values; props allowing animation: ',\n            allowlist,\n          );\n        }\n      }\n      props[key] = value;\n    }\n  }\n\n  return [nodeKeys, nodes, props];\n}\n\nexport default class AnimatedProps extends AnimatedNode {\n  #callback: () => void;\n  #nodeKeys: $ReadOnlyArray<string>;\n  #nodes: $ReadOnlyArray<AnimatedNode>;\n  #props: {[string]: mixed};\n  #target: ?TargetView = null;\n\n  constructor(\n    inputProps: {[string]: mixed},\n    callback: () => void,\n    allowlist?: ?AnimatedPropsAllowlist,\n    config?: ?AnimatedNodeConfig,\n  ) {\n    super(config);\n    const [nodeKeys, nodes, props] = createAnimatedProps(inputProps, allowlist);\n    this.#nodeKeys = nodeKeys;\n    this.#nodes = nodes;\n    this.#props = props;\n    this.#callback = callback;\n  }\n\n  __getValue(): Object {\n    const props: {[string]: mixed} = {};\n\n    const keys = Object.keys(this.#props);\n    for (let ii = 0, length = keys.length; ii < length; ii++) {\n      const key = keys[ii];\n      const value = this.#props[key];\n\n      if (value instanceof AnimatedNode) {\n        props[key] = value.__getValue();\n      } else if (value instanceof AnimatedEvent) {\n        props[key] = value.__getHandler();\n      } else {\n        props[key] = value;\n      }\n    }\n\n    return props;\n  }\n\n  /**\n   * Creates a new `props` object that contains the same props as the supplied\n   * `staticProps` object, except with animated nodes for any props that were\n   * created by this `AnimatedProps` instance.\n   */\n  __getValueWithStaticProps(staticProps: Object): Object {\n    const props: {[string]: mixed} = {...staticProps};\n\n    const keys = Object.keys(staticProps);\n    for (let ii = 0, length = keys.length; ii < length; ii++) {\n      const key = keys[ii];\n      const maybeNode = this.#props[key];\n\n      if (key === 'style') {\n        const staticStyle = staticProps.style;\n        const flatStaticStyle = flattenStyle(staticStyle);\n        if (maybeNode instanceof AnimatedStyle) {\n          const mutableStyle: {[string]: mixed} =\n            flatStaticStyle == null\n              ? {}\n              : flatStaticStyle === staticStyle\n                ? // Copy the input style, since we'll mutate it below.\n                  {...flatStaticStyle}\n                : // Reuse `flatStaticStyle` if it is a newly created object.\n                  flatStaticStyle;\n\n          maybeNode.__replaceAnimatedNodeWithValues(mutableStyle);\n          props[key] = maybeNode.__getValueForStyle(mutableStyle);\n        } else {\n          props[key] = flatStaticStyle;\n        }\n      } else if (maybeNode instanceof AnimatedNode) {\n        props[key] = maybeNode.__getValue();\n      } else if (maybeNode instanceof AnimatedEvent) {\n        props[key] = maybeNode.__getHandler();\n      }\n    }\n\n    return props;\n  }\n\n  __getNativeAnimatedEventTuples(): $ReadOnlyArray<[string, AnimatedEvent]> {\n    const tuples = [];\n\n    const keys = Object.keys(this.#props);\n    for (let ii = 0, length = keys.length; ii < length; ii++) {\n      const key = keys[ii];\n      const value = this.#props[key];\n\n      if (value instanceof AnimatedEvent && value.__isNative) {\n        tuples.push([key, value]);\n      }\n    }\n\n    return tuples;\n  }\n\n  __getAnimatedValue(): Object {\n    const props: {[string]: mixed} = {};\n\n    const nodeKeys = this.#nodeKeys;\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const key = nodeKeys[ii];\n      const node = nodes[ii];\n      props[key] = node.__getAnimatedValue();\n    }\n\n    return props;\n  }\n\n  __attach(): void {\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const node = nodes[ii];\n      node.__addChild(this);\n    }\n    super.__attach();\n  }\n\n  __detach(): void {\n    if (this.__isNative && this.#target != null) {\n      this.#disconnectAnimatedView(this.#target);\n    }\n    this.#target = null;\n\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const node = nodes[ii];\n      node.__removeChild(this);\n    }\n\n    super.__detach();\n  }\n\n  update(): void {\n    this.#callback();\n  }\n\n  __makeNative(platformConfig: ?PlatformConfig): void {\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const node = nodes[ii];\n      node.__makeNative(platformConfig);\n    }\n\n    if (!this.__isNative) {\n      this.__isNative = true;\n\n      // Since this does not call the super.__makeNative, we need to store the\n      // supplied platformConfig here, before calling #connectAnimatedView\n      // where it will be needed to traverse the graph of attached values.\n      super.__setPlatformConfig(platformConfig);\n\n      if (this.#target != null) {\n        this.#connectAnimatedView(this.#target);\n      }\n    }\n  }\n\n  setNativeView(instance: TargetViewInstance): void {\n    if (this.#target?.instance === instance) {\n      return;\n    }\n    this.#target = {instance, connectedViewTag: null};\n    if (this.__isNative) {\n      this.#connectAnimatedView(this.#target);\n    }\n  }\n\n  #connectAnimatedView(target: TargetView): void {\n    invariant(this.__isNative, 'Expected node to be marked as \"native\"');\n    let viewTag: ?number = findNodeHandle(target.instance);\n    if (viewTag == null) {\n      if (process.env.NODE_ENV === 'test') {\n        viewTag = -1;\n      } else {\n        throw new Error('Unable to locate attached view in the native tree');\n      }\n    }\n    NativeAnimatedHelper.API.connectAnimatedNodeToView(\n      this.__getNativeTag(),\n      viewTag,\n    );\n    target.connectedViewTag = viewTag;\n  }\n\n  #disconnectAnimatedView(target: TargetView): void {\n    invariant(this.__isNative, 'Expected node to be marked as \"native\"');\n    const viewTag = target.connectedViewTag;\n    if (viewTag == null) {\n      return;\n    }\n    NativeAnimatedHelper.API.disconnectAnimatedNodeFromView(\n      this.__getNativeTag(),\n      viewTag,\n    );\n    target.connectedViewTag = null;\n  }\n\n  __restoreDefaultValues(): void {\n    // When using the native driver, view properties need to be restored to\n    // their default values manually since react no longer tracks them. This\n    // is needed to handle cases where a prop driven by native animated is removed\n    // after having been changed natively by an animation.\n    if (this.__isNative) {\n      NativeAnimatedHelper.API.restoreDefaultValues(this.__getNativeTag());\n    }\n  }\n\n  __getNativeConfig(): Object {\n    const platformConfig = this.__getPlatformConfig();\n    const propsConfig: {[string]: number} = {};\n\n    const nodeKeys = this.#nodeKeys;\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const key = nodeKeys[ii];\n      const node = nodes[ii];\n      node.__makeNative(platformConfig);\n      propsConfig[key] = node.__getNativeTag();\n    }\n\n    return {\n      type: 'props',\n      props: propsConfig,\n      debugID: this.__getDebugID(),\n    };\n  }\n}\n\n// Supported versions of JSC do not implement the newer Object.hasOwn. Remove\n// this shim when they do.\n// $FlowIgnore[method-unbinding]\nconst _hasOwnProp = Object.prototype.hasOwnProperty;\nconst hasOwn: (obj: $ReadOnly<{...}>, prop: string) => boolean =\n  // $FlowIgnore[method-unbinding]\n  Object.hasOwn ?? ((obj, prop) => _hasOwnProp.call(obj, prop));\n"],"mappings":"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","ignoreList":[]}