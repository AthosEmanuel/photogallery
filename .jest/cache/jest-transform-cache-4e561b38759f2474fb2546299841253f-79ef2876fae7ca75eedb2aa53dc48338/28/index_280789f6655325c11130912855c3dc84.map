{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeImagePicker","_geolocation","_interopRequireDefault","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","CameraComponent","_ref","onPhotoTaken","onClose","useEffect","openCamera","_ref2","_asyncToGenerator2","Platform","OS","granted","PermissionsAndroid","request","PERMISSIONS","CAMERA","RESULTS","GRANTED","Alert","alert","coords","locationGranted","ACCESS_FINE_LOCATION","Promise","resolve","Geolocation","getCurrentPosition","position","latitude","longitude","error","console","log","message","enableHighAccuracy","timeout","maximumAge","options","mediaType","saveToPhotos","cameraType","launchCamera","response","didCancel","errorCode","errorMessage","assets","length","asset","uri","apply","arguments","jsx","View","style","styles","container","StyleSheet","create","flex","backgroundColor","_default","exports"],"sources":["index.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport {\n  Alert,\n  PermissionsAndroid,\n  Platform,\n  StyleSheet,\n  View,\n} from 'react-native';\nimport { CameraOptions, launchCamera } from 'react-native-image-picker';\n\nimport Geolocation from '@react-native-community/geolocation';\n\ninterface CameraComponentProps {\n  onPhotoTaken?: (\n    uri: string,\n    coords?: { latitude: number; longitude: number },\n  ) => void;\n  onClose?: () => void;\n}\n\nconst CameraComponent: React.FC<CameraComponentProps> = ({\n  onPhotoTaken,\n  onClose,\n}) => {\n  useEffect(() => {\n    const openCamera = async () => {\n      // Permissão câmera\n      if (Platform.OS === 'android') {\n        const granted = await PermissionsAndroid.request(\n          PermissionsAndroid.PERMISSIONS.CAMERA,\n        );\n        if (granted !== PermissionsAndroid.RESULTS.GRANTED) {\n          Alert.alert('Permissão negada', 'Não será possível usar a câmera');\n          onClose && onClose();\n          return;\n        }\n      }\n\n      let coords: { latitude: number; longitude: number } | undefined;\n      if (Platform.OS === 'android' || Platform.OS === 'ios') {\n        const locationGranted =\n          Platform.OS === 'android'\n            ? await PermissionsAndroid.request(\n                PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,\n              )\n            : true;\n\n        if (\n          locationGranted === PermissionsAndroid.RESULTS.GRANTED ||\n          Platform.OS === 'ios'\n        ) {\n          await new Promise<void>(resolve => {\n            Geolocation.getCurrentPosition(\n              (position: {\n                coords: { latitude: number; longitude: number };\n              }) => {\n                coords = {\n                  latitude: position.coords.latitude,\n                  longitude: position.coords.longitude,\n                };\n                resolve();\n              },\n              error => {\n                console.log('Erro ao pegar localização:', error.message);\n                resolve();\n              },\n              { enableHighAccuracy: true, timeout: 10000, maximumAge: 1000 },\n            );\n          });\n        }\n      }\n\n      const options: CameraOptions = {\n        mediaType: 'photo',\n        saveToPhotos: true,\n        cameraType: 'back',\n      };\n\n      launchCamera(options, response => {\n        if (response.didCancel) {\n          console.log('Usuário cancelou a câmera');\n        } else if (response.errorCode) {\n          Alert.alert(\n            'Erro',\n            response.errorMessage || 'Erro ao acessar a câmera',\n          );\n        } else if (response.assets && response.assets.length > 0) {\n          const asset = response.assets[0];\n          if (asset.uri) {\n            onPhotoTaken && onPhotoTaken(asset.uri, coords);\n          }\n        }\n\n        onClose && onClose();\n      });\n    };\n\n    openCamera();\n  }, []);\n\n  return <View style={styles.container} />;\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'transparent',\n  },\n});\n\nexport default CameraComponent;\n"],"mappings":"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","ignoreList":[]}