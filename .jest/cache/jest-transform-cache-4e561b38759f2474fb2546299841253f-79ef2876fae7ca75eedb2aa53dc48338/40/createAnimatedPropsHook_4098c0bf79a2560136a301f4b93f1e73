b8780d422b322b047ac2ed1e90692623
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createAnimatedPropsHook;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _AnimatedNode = _interopRequireDefault(require("../../../Libraries/Animated/nodes/AnimatedNode"));
var _AnimatedProps = _interopRequireDefault(require("../../../Libraries/Animated/nodes/AnimatedProps"));
var _AnimatedValue = _interopRequireDefault(require("../../../Libraries/Animated/nodes/AnimatedValue"));
var _ReactFabricPublicInstanceUtils = require("../../../Libraries/ReactNative/ReactFabricPublicInstance/ReactFabricPublicInstanceUtils");
var _useRefEffect = _interopRequireDefault(require("../../../Libraries/Utilities/useRefEffect"));
var ReactNativeFeatureFlags = _interopRequireWildcard(require("../featureflags/ReactNativeFeatureFlags"));
var _createAnimatedPropsMemoHook = require("./createAnimatedPropsMemoHook");
var _NativeAnimatedHelper = _interopRequireDefault(require("./NativeAnimatedHelper"));
var _react = require("react");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function createAnimatedPropsHook(allowlist) {
  var useAnimatedPropsMemo = (0, _createAnimatedPropsMemoHook.createAnimatedPropsMemoHook)(allowlist);
  var useNativePropsInFabric = ReactNativeFeatureFlags.shouldUseSetNativePropsInFabric();
  return function useAnimatedProps(props) {
    var _useReducer = (0, _react.useReducer)(function (count) {
        return count + 1;
      }, 0),
      _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),
      scheduleUpdate = _useReducer2[1];
    var onUpdateRef = (0, _react.useRef)(null);
    var timerRef = (0, _react.useRef)(null);
    var node = useAnimatedPropsMemo(function () {
      return new _AnimatedProps.default(props, function () {
        return onUpdateRef.current == null ? void 0 : onUpdateRef.current();
      }, allowlist);
    }, props);
    (0, _react.useEffect)(function () {
      if (!_NativeAnimatedHelper.default.shouldSignalBatch) {
        _NativeAnimatedHelper.default.API.flushQueue();
      }
      var drivenAnimationEndedListener = null;
      if (node.__isNative) {
        drivenAnimationEndedListener = _NativeAnimatedHelper.default.nativeEventEmitter.addListener('onUserDrivenAnimationEnded', function (data) {
          node.update();
        });
      }
      return function () {
        var _drivenAnimationEnded;
        (_drivenAnimationEnded = drivenAnimationEndedListener) == null || _drivenAnimationEnded.remove();
      };
    });
    var useAnimatedPropsLifecycle = ReactNativeFeatureFlags.scheduleAnimatedCleanupInMicrotask() ? useAnimatedPropsLifecycleWithCleanupInMicrotask : useAnimatedPropsLifecycleWithPrevNodeRef;
    useAnimatedPropsLifecycle(node);
    var refEffect = (0, _react.useCallback)(function (instance) {
      node.setNativeView(instance);
      onUpdateRef.current = function () {
        if (process.env.NODE_ENV === 'test') {
          return scheduleUpdate();
        }
        var isFabricNode = isFabricInstance(instance);
        if (node.__isNative) {
          if (isFabricNode && !(ReactNativeFeatureFlags.cxxNativeAnimatedEnabled() && ReactNativeFeatureFlags.cxxNativeAnimatedRemoveJsSync())) {
            scheduleUpdate();
          }
          return;
        }
        if (typeof instance !== 'object' || typeof (instance == null ? void 0 : instance.setNativeProps) !== 'function') {
          return scheduleUpdate();
        }
        if (!isFabricNode) {
          return instance.setNativeProps(node.__getAnimatedValue());
        }
        if (!useNativePropsInFabric) {
          return scheduleUpdate();
        }
        instance.setNativeProps(node.__getAnimatedValue());
        if (timerRef.current != null) {
          clearTimeout(timerRef.current);
        }
        timerRef.current = setTimeout(function () {
          timerRef.current = null;
          scheduleUpdate();
        }, 48);
      };
      var target = getEventTarget(instance);
      var animatedValueListeners = [];
      var eventTuples = node.__getNativeAnimatedEventTuples();
      for (var _ref of eventTuples) {
        var _ref2 = (0, _slicedToArray2.default)(_ref, 2);
        var propName = _ref2[0];
        var propValue = _ref2[1];
        propValue.__attach(target, propName);
        addListenersToPropsValue(propValue, animatedValueListeners);
      }
      return function () {
        onUpdateRef.current = null;
        for (var _ref3 of eventTuples) {
          var _ref4 = (0, _slicedToArray2.default)(_ref3, 2);
          var _propName = _ref4[0];
          var _propValue = _ref4[1];
          _propValue.__detach(target, _propName);
        }
        for (var _ref5 of animatedValueListeners) {
          var _propValue2 = _ref5.propValue;
          var listenerId = _ref5.listenerId;
          _propValue2.removeListener(listenerId);
        }
      };
    }, [node]);
    var callbackRef = (0, _useRefEffect.default)(refEffect);
    return [reduceAnimatedProps(node, props), callbackRef];
  };
}
function reduceAnimatedProps(node, props) {
  return Object.assign({}, node.__getValueWithStaticProps(props), {
    collapsable: false
  });
}
function addListenersToPropsValue(propValue, accumulator) {
  if (propValue instanceof _AnimatedValue.default) {
    var listenerId = propValue.addListener(function () {});
    accumulator.push({
      propValue: propValue,
      listenerId: listenerId
    });
  } else if (Array.isArray(propValue)) {
    for (var prop of propValue) {
      addListenersToPropsValue(prop, accumulator);
    }
  } else if (propValue instanceof Object) {
    addAnimatedValuesListenersToProps(propValue, accumulator);
  }
}
function addAnimatedValuesListenersToProps(props, accumulator) {
  for (var propName in props) {
    var propValue = props[propName];
    addListenersToPropsValue(propValue, accumulator);
  }
}
function useAnimatedPropsLifecycleWithPrevNodeRef(node) {
  var prevNodeRef = (0, _react.useRef)(null);
  var isUnmountingRef = (0, _react.useRef)(false);
  (0, _react.useInsertionEffect)(function () {
    isUnmountingRef.current = false;
    return function () {
      isUnmountingRef.current = true;
    };
  }, []);
  (0, _react.useInsertionEffect)(function () {
    node.__attach();
    if (prevNodeRef.current != null) {
      var prevNode = prevNodeRef.current;
      prevNode.__restoreDefaultValues();
      prevNode.__detach();
      prevNodeRef.current = null;
    }
    return function () {
      if (isUnmountingRef.current) {
        node.__detach();
      } else {
        prevNodeRef.current = node;
      }
    };
  }, [node]);
}
function useAnimatedPropsLifecycleWithCleanupInMicrotask(node) {
  var isMounted = (0, _react.useRef)(false);
  (0, _react.useInsertionEffect)(function () {
    isMounted.current = true;
    node.__attach();
    return function () {
      isMounted.current = false;
      queueMicrotask(function () {
        if (isMounted.current) {
          node.__restoreDefaultValues();
        }
        node.__detach();
      });
    };
  }, [node]);
}
function getEventTarget(instance) {
  return typeof instance === 'object' && typeof (instance == null ? void 0 : instance.getScrollableNode) === 'function' ? instance.getScrollableNode() : instance;
}
function isFabricInstance(instance) {
  var _instance$getScrollRe;
  return (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance) || (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance == null || instance.getNativeScrollRef == null ? void 0 : instance.getNativeScrollRef()) || (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance == null || instance.getScrollResponder == null || (_instance$getScrollRe = instance.getScrollResponder()) == null || _instance$getScrollRe.getNativeScrollRef == null ? void 0 : _instance$getScrollRe.getNativeScrollRef());
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQW5pbWF0ZWROb2RlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfQW5pbWF0ZWRQcm9wcyIsIl9BbmltYXRlZFZhbHVlIiwiX1JlYWN0RmFicmljUHVibGljSW5zdGFuY2VVdGlscyIsIl91c2VSZWZFZmZlY3QiLCJSZWFjdE5hdGl2ZUZlYXR1cmVGbGFncyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX2NyZWF0ZUFuaW1hdGVkUHJvcHNNZW1vSG9vayIsIl9OYXRpdmVBbmltYXRlZEhlbHBlciIsIl9yZWFjdCIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiY3JlYXRlQW5pbWF0ZWRQcm9wc0hvb2siLCJhbGxvd2xpc3QiLCJ1c2VBbmltYXRlZFByb3BzTWVtbyIsImNyZWF0ZUFuaW1hdGVkUHJvcHNNZW1vSG9vayIsInVzZU5hdGl2ZVByb3BzSW5GYWJyaWMiLCJzaG91bGRVc2VTZXROYXRpdmVQcm9wc0luRmFicmljIiwidXNlQW5pbWF0ZWRQcm9wcyIsInByb3BzIiwiX3VzZVJlZHVjZXIiLCJ1c2VSZWR1Y2VyIiwiY291bnQiLCJfdXNlUmVkdWNlcjIiLCJfc2xpY2VkVG9BcnJheTIiLCJzY2hlZHVsZVVwZGF0ZSIsIm9uVXBkYXRlUmVmIiwidXNlUmVmIiwidGltZXJSZWYiLCJub2RlIiwiQW5pbWF0ZWRQcm9wcyIsImN1cnJlbnQiLCJ1c2VFZmZlY3QiLCJOYXRpdmVBbmltYXRlZEhlbHBlciIsInNob3VsZFNpZ25hbEJhdGNoIiwiQVBJIiwiZmx1c2hRdWV1ZSIsImRyaXZlbkFuaW1hdGlvbkVuZGVkTGlzdGVuZXIiLCJfX2lzTmF0aXZlIiwibmF0aXZlRXZlbnRFbWl0dGVyIiwiYWRkTGlzdGVuZXIiLCJkYXRhIiwidXBkYXRlIiwiX2RyaXZlbkFuaW1hdGlvbkVuZGVkIiwicmVtb3ZlIiwidXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZSIsInNjaGVkdWxlQW5pbWF0ZWRDbGVhbnVwSW5NaWNyb3Rhc2siLCJ1c2VBbmltYXRlZFByb3BzTGlmZWN5Y2xlV2l0aENsZWFudXBJbk1pY3JvdGFzayIsInVzZUFuaW1hdGVkUHJvcHNMaWZlY3ljbGVXaXRoUHJldk5vZGVSZWYiLCJyZWZFZmZlY3QiLCJ1c2VDYWxsYmFjayIsImluc3RhbmNlIiwic2V0TmF0aXZlVmlldyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImlzRmFicmljTm9kZSIsImlzRmFicmljSW5zdGFuY2UiLCJjeHhOYXRpdmVBbmltYXRlZEVuYWJsZWQiLCJjeHhOYXRpdmVBbmltYXRlZFJlbW92ZUpzU3luYyIsInNldE5hdGl2ZVByb3BzIiwiX19nZXRBbmltYXRlZFZhbHVlIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInRhcmdldCIsImdldEV2ZW50VGFyZ2V0IiwiYW5pbWF0ZWRWYWx1ZUxpc3RlbmVycyIsImV2ZW50VHVwbGVzIiwiX19nZXROYXRpdmVBbmltYXRlZEV2ZW50VHVwbGVzIiwiX3JlZiIsIl9yZWYyIiwicHJvcE5hbWUiLCJwcm9wVmFsdWUiLCJfX2F0dGFjaCIsImFkZExpc3RlbmVyc1RvUHJvcHNWYWx1ZSIsIl9yZWYzIiwiX3JlZjQiLCJfX2RldGFjaCIsIl9yZWY1IiwibGlzdGVuZXJJZCIsInJlbW92ZUxpc3RlbmVyIiwiY2FsbGJhY2tSZWYiLCJ1c2VSZWZFZmZlY3QiLCJyZWR1Y2VBbmltYXRlZFByb3BzIiwiYXNzaWduIiwiX19nZXRWYWx1ZVdpdGhTdGF0aWNQcm9wcyIsImNvbGxhcHNhYmxlIiwiYWNjdW11bGF0b3IiLCJBbmltYXRlZFZhbHVlIiwicHVzaCIsIkFycmF5IiwiaXNBcnJheSIsInByb3AiLCJhZGRBbmltYXRlZFZhbHVlc0xpc3RlbmVyc1RvUHJvcHMiLCJwcmV2Tm9kZVJlZiIsImlzVW5tb3VudGluZ1JlZiIsInVzZUluc2VydGlvbkVmZmVjdCIsInByZXZOb2RlIiwiX19yZXN0b3JlRGVmYXVsdFZhbHVlcyIsImlzTW91bnRlZCIsInF1ZXVlTWljcm90YXNrIiwiZ2V0U2Nyb2xsYWJsZU5vZGUiLCJfaW5zdGFuY2UkZ2V0U2Nyb2xsUmUiLCJpc0ZhYnJpY1B1YmxpY0luc3RhbmNlIiwiZ2V0TmF0aXZlU2Nyb2xsUmVmIiwiZ2V0U2Nyb2xsUmVzcG9uZGVyIl0sInNvdXJjZXMiOlsiY3JlYXRlQW5pbWF0ZWRQcm9wc0hvb2suanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93IHN0cmljdC1sb2NhbFxuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtBbmltYXRlZFByb3BzQWxsb3dsaXN0fSBmcm9tICcuLi8uLi8uLi9MaWJyYXJpZXMvQW5pbWF0ZWQvbm9kZXMvQW5pbWF0ZWRQcm9wcyc7XG5pbXBvcnQgdHlwZSB7RXZlbnRTdWJzY3JpcHRpb259IGZyb20gJy4uLy4uLy4uL0xpYnJhcmllcy9FdmVudEVtaXR0ZXIvTmF0aXZlRXZlbnRFbWl0dGVyJztcblxuaW1wb3J0IEFuaW1hdGVkTm9kZSBmcm9tICcuLi8uLi8uLi9MaWJyYXJpZXMvQW5pbWF0ZWQvbm9kZXMvQW5pbWF0ZWROb2RlJztcbmltcG9ydCBBbmltYXRlZFByb3BzIGZyb20gJy4uLy4uLy4uL0xpYnJhcmllcy9BbmltYXRlZC9ub2Rlcy9BbmltYXRlZFByb3BzJztcbmltcG9ydCBBbmltYXRlZFZhbHVlIGZyb20gJy4uLy4uLy4uL0xpYnJhcmllcy9BbmltYXRlZC9ub2Rlcy9BbmltYXRlZFZhbHVlJztcbmltcG9ydCB7aXNQdWJsaWNJbnN0YW5jZSBhcyBpc0ZhYnJpY1B1YmxpY0luc3RhbmNlfSBmcm9tICcuLi8uLi8uLi9MaWJyYXJpZXMvUmVhY3ROYXRpdmUvUmVhY3RGYWJyaWNQdWJsaWNJbnN0YW5jZS9SZWFjdEZhYnJpY1B1YmxpY0luc3RhbmNlVXRpbHMnO1xuaW1wb3J0IHVzZVJlZkVmZmVjdCBmcm9tICcuLi8uLi8uLi9MaWJyYXJpZXMvVXRpbGl0aWVzL3VzZVJlZkVmZmVjdCc7XG5pbXBvcnQgKiBhcyBSZWFjdE5hdGl2ZUZlYXR1cmVGbGFncyBmcm9tICcuLi9mZWF0dXJlZmxhZ3MvUmVhY3ROYXRpdmVGZWF0dXJlRmxhZ3MnO1xuaW1wb3J0IHtjcmVhdGVBbmltYXRlZFByb3BzTWVtb0hvb2t9IGZyb20gJy4vY3JlYXRlQW5pbWF0ZWRQcm9wc01lbW9Ib29rJztcbmltcG9ydCBOYXRpdmVBbmltYXRlZEhlbHBlciBmcm9tICcuL05hdGl2ZUFuaW1hdGVkSGVscGVyJztcbmltcG9ydCB7XG4gIHVzZUNhbGxiYWNrLFxuICB1c2VFZmZlY3QsXG4gIHVzZUluc2VydGlvbkVmZmVjdCxcbiAgdXNlUmVkdWNlcixcbiAgdXNlUmVmLFxufSBmcm9tICdyZWFjdCc7XG5cbnR5cGUgUmVkdWNlZFByb3BzPFRQcm9wcz4gPSB7XG4gIC4uLlRQcm9wcyxcbiAgY29sbGFwc2FibGU6IGJvb2xlYW4sXG4gIC4uLlxufTtcbnR5cGUgQ2FsbGJhY2tSZWY8VD4gPSBUID0+IG1peGVkO1xuXG5leHBvcnQgdHlwZSBBbmltYXRlZFByb3BzSG9vayA9IDxUUHJvcHM6IHsuLi59LCBUSW5zdGFuY2U+KFxuICBwcm9wczogVFByb3BzLFxuKSA9PiBbUmVkdWNlZFByb3BzPFRQcm9wcz4sIENhbGxiYWNrUmVmPFRJbnN0YW5jZSB8IG51bGw+XTtcblxudHlwZSBVcGRhdGVDYWxsYmFjayA9ICgpID0+IHZvaWQ7XG5cbnR5cGUgQW5pbWF0ZWRWYWx1ZUxpc3RlbmVycyA9IEFycmF5PHtcbiAgcHJvcFZhbHVlOiBBbmltYXRlZFZhbHVlLFxuICBsaXN0ZW5lcklkOiBzdHJpbmcsXG59PjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlQW5pbWF0ZWRQcm9wc0hvb2soXG4gIGFsbG93bGlzdDogP0FuaW1hdGVkUHJvcHNBbGxvd2xpc3QsXG4pOiBBbmltYXRlZFByb3BzSG9vayB7XG4gIGNvbnN0IHVzZUFuaW1hdGVkUHJvcHNNZW1vID0gY3JlYXRlQW5pbWF0ZWRQcm9wc01lbW9Ib29rKGFsbG93bGlzdCk7XG5cbiAgY29uc3QgdXNlTmF0aXZlUHJvcHNJbkZhYnJpYyA9XG4gICAgUmVhY3ROYXRpdmVGZWF0dXJlRmxhZ3Muc2hvdWxkVXNlU2V0TmF0aXZlUHJvcHNJbkZhYnJpYygpO1xuXG4gIHJldHVybiBmdW5jdGlvbiB1c2VBbmltYXRlZFByb3BzPFRQcm9wczogey4uLn0sIFRJbnN0YW5jZT4oXG4gICAgcHJvcHM6IFRQcm9wcyxcbiAgKTogW1JlZHVjZWRQcm9wczxUUHJvcHM+LCBDYWxsYmFja1JlZjxUSW5zdGFuY2UgfCBudWxsPl0ge1xuICAgIGNvbnN0IFssIHNjaGVkdWxlVXBkYXRlXSA9IHVzZVJlZHVjZXI8bnVtYmVyLCB2b2lkPihjb3VudCA9PiBjb3VudCArIDEsIDApO1xuICAgIGNvbnN0IG9uVXBkYXRlUmVmID0gdXNlUmVmPFVwZGF0ZUNhbGxiYWNrIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgdGltZXJSZWYgPSB1c2VSZWY8VGltZW91dElEIHwgbnVsbD4obnVsbCk7XG5cbiAgICBjb25zdCBub2RlID0gdXNlQW5pbWF0ZWRQcm9wc01lbW8oXG4gICAgICAoKSA9PiBuZXcgQW5pbWF0ZWRQcm9wcyhwcm9wcywgKCkgPT4gb25VcGRhdGVSZWYuY3VycmVudD8uKCksIGFsbG93bGlzdCksXG4gICAgICBwcm9wcyxcbiAgICApO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIC8vIEFuaW1hdGVkIHF1ZXVlIGZsdXNoIGlzIGhhbmRsZWQgZGV0ZXJtaW5pc3RpY2FsbHkgaW4gc2V0SW1tZWRpYXRlIGZvciB0aGUgZm9sbG93aW5nIGZlYXR1cmUgZmxhZ3M6XG4gICAgICAvLyBhbmltYXRlZFNob3VsZFNpZ25hbEJhdGNoLCBjeHhOYXRpdmVBbmltYXRlZEVuYWJsZWRcbiAgICAgIGlmICghTmF0aXZlQW5pbWF0ZWRIZWxwZXIuc2hvdWxkU2lnbmFsQmF0Y2gpIHtcbiAgICAgICAgLy8gSWYgbXVsdGlwbGUgY29tcG9uZW50cyBjYWxsIGBmbHVzaFF1ZXVlYCwgdGhlIGZpcnN0IG9uZSB3aWxsIGZsdXNoIHRoZVxuICAgICAgICAvLyBxdWV1ZSBhbmQgc3Vic2VxdWVudCBvbmVzIHdpbGwgZG8gbm90aGluZy5cbiAgICAgICAgTmF0aXZlQW5pbWF0ZWRIZWxwZXIuQVBJLmZsdXNoUXVldWUoKTtcbiAgICAgIH1cbiAgICAgIGxldCBkcml2ZW5BbmltYXRpb25FbmRlZExpc3RlbmVyOiA/RXZlbnRTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgaWYgKG5vZGUuX19pc05hdGl2ZSkge1xuICAgICAgICBkcml2ZW5BbmltYXRpb25FbmRlZExpc3RlbmVyID1cbiAgICAgICAgICBOYXRpdmVBbmltYXRlZEhlbHBlci5uYXRpdmVFdmVudEVtaXR0ZXIuYWRkTGlzdGVuZXIoXG4gICAgICAgICAgICAnb25Vc2VyRHJpdmVuQW5pbWF0aW9uRW5kZWQnLFxuICAgICAgICAgICAgZGF0YSA9PiB7XG4gICAgICAgICAgICAgIG5vZGUudXBkYXRlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGRyaXZlbkFuaW1hdGlvbkVuZGVkTGlzdGVuZXI/LnJlbW92ZSgpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIE5PVEU6IFRoaXMgZmVhdHVyZSBmbGFnIG11c3QgYmUgZXZhbHVhdGVkIGluc2lkZSB0aGUgaG9vayBiZWNhdXNlIHRoaXNcbiAgICAvLyBtb2R1bGUgZmFjdG9yeSBjYW4gYmUgZXZhbHVhdGVkIG11Y2ggc29vbmVyLCBiZWZvcmUgb3ZlcnJpZGVzIGFyZSBzZXQuXG4gICAgY29uc3QgdXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZSA9XG4gICAgICBSZWFjdE5hdGl2ZUZlYXR1cmVGbGFncy5zY2hlZHVsZUFuaW1hdGVkQ2xlYW51cEluTWljcm90YXNrKClcbiAgICAgICAgPyB1c2VBbmltYXRlZFByb3BzTGlmZWN5Y2xlV2l0aENsZWFudXBJbk1pY3JvdGFza1xuICAgICAgICA6IHVzZUFuaW1hdGVkUHJvcHNMaWZlY3ljbGVXaXRoUHJldk5vZGVSZWY7XG5cbiAgICB1c2VBbmltYXRlZFByb3BzTGlmZWN5Y2xlKG5vZGUpO1xuXG4gICAgLy8gVE9ETzogVGhpcyBcImVmZmVjdFwiIGRvZXMgdGhyZWUgdGhpbmdzOlxuICAgIC8vXG4gICAgLy8gICAxKSBDYWxsIGBzZXROYXRpdmVWaWV3YC5cbiAgICAvLyAgIDIpIFVwZGF0ZSBgb25VcGRhdGVSZWZgLlxuICAgIC8vICAgMykgVXBkYXRlIGxpc3RlbmVycyBmb3IgYEFuaW1hdGVkRXZlbnRgIHByb3BzLlxuICAgIC8vXG4gICAgLy8gSWRlYWxseSwgZWFjaCBvZiB0aGVzZSB3b3VsZCBiZSBzZXBhcmF0ZSBcImVmZmVjdHNcIiBzbyB0aGF0IHRoZXkgYXJlIG5vdFxuICAgIC8vIHVubmVjZXNzYXJpbHkgcmUtcnVuIHdoZW4gaXJyZWxldmFudCBkZXBlbmRlbmNpZXMgY2hhbmdlLiBGb3IgZXhhbXBsZSwgd2VcbiAgICAvLyBzaG91bGQgYmUgYWJsZSB0byBob2lzdCBhbGwgYEFuaW1hdGVkRXZlbnRgIHByb3BzIGFuZCBvbmx5IGRvICMzIGlmIGVpdGhlclxuICAgIC8vIHRoZSBgQW5pbWF0ZWRFdmVudGAgcHJvcHMgY2hhbmdlIG9yIGBpbnN0YW5jZWAgY2hhbmdlcy5cbiAgICAvL1xuICAgIC8vIEJ1dCB0aGVyZSBpcyBubyB3YXkgdG8gdHJhbnNwYXJlbnRseSBjb21wb3NlIHRocmVlIHNlcGFyYXRlIGNhbGxiYWNrIHJlZnMsXG4gICAgLy8gc28gd2UganVzdCBjb21iaW5lIHRoZW0gYWxsIGludG8gb25lIGZvciBub3cuXG4gICAgY29uc3QgcmVmRWZmZWN0ID0gdXNlQ2FsbGJhY2soXG4gICAgICAoaW5zdGFuY2U6IFRJbnN0YW5jZSkgPT4ge1xuICAgICAgICAvLyBOT1RFOiBUaGlzIG1heSBiZSBjYWxsZWQgbW9yZSBvZnRlbiB0aGFuIG5lY2Vzc2FyeSAoZS5nLiB3aGVuIGBwcm9wc2BcbiAgICAgICAgLy8gY2hhbmdlcyksIGJ1dCBgc2V0TmF0aXZlVmlld2AgYWxyZWFkeSBvcHRpbWl6ZXMgZm9yIHRoYXQuXG4gICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdXG4gICAgICAgIG5vZGUuc2V0TmF0aXZlVmlldyhpbnN0YW5jZSk7XG5cbiAgICAgICAgLy8gTk9URTogV2hlbiB1c2luZyB0aGUgSlMgYW5pbWF0aW9uIGRyaXZlciwgdGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgb25cbiAgICAgICAgLy8gZXZlcnkgYW5pbWF0aW9uIGZyYW1lLiBXaGVuIHVzaW5nIHRoZSBuYXRpdmUgZHJpdmVyLCB0aGlzIGNhbGxiYWNrIGlzXG4gICAgICAgIC8vIGNhbGxlZCB3aGVuIHRoZSBhbmltYXRpb24gY29tcGxldGVzLlxuICAgICAgICBvblVwZGF0ZVJlZi5jdXJyZW50ID0gKCkgPT4ge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XG4gICAgICAgICAgICAvLyBDaGVjayAxOiB0aGlzIGlzIGEgdGVzdC5cbiAgICAgICAgICAgIC8vIGNhbGwgYHNjaGVkdWxlVXBkYXRlYCB0byBieXBhc3MgdXNlIG9mIHNldE5hdGl2ZVByb3BzLlxuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgaXNGYWJyaWNOb2RlID0gaXNGYWJyaWNJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgICAgaWYgKG5vZGUuX19pc05hdGl2ZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgMjogdGhpcyBpcyBhbiBhbmltYXRpb24gZHJpdmVuIGJ5IG5hdGl2ZS5cbiAgICAgICAgICAgIC8vIEluIG5hdGl2ZSBkcml2ZW4gYW5pbWF0aW9ucywgdGhpcyBjYWxsYmFjayBpcyBvbmx5IGNhbGxlZCBvbmNlIHRoZSBhbmltYXRpb24gY29tcGxldGVzLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBpc0ZhYnJpY05vZGUgJiZcbiAgICAgICAgICAgICAgIShcbiAgICAgICAgICAgICAgICBSZWFjdE5hdGl2ZUZlYXR1cmVGbGFncy5jeHhOYXRpdmVBbmltYXRlZEVuYWJsZWQoKSAmJlxuICAgICAgICAgICAgICAgIFJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzLmN4eE5hdGl2ZUFuaW1hdGVkUmVtb3ZlSnNTeW5jKClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIC8vIENhbGwgYHNjaGVkdWxlVXBkYXRlYCB0byBzeW5jaHJvbmlzZSBGaWJlciBhbmQgU2hhZG93IHRyZWUuXG4gICAgICAgICAgICAgIC8vIE11c3Qgbm90IGJlIGNhbGxlZCBpbiBQYXBlci5cbiAgICAgICAgICAgICAgc2NoZWR1bGVVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlb2YgaW5zdGFuY2UgIT09ICdvYmplY3QnIHx8XG4gICAgICAgICAgICB0eXBlb2YgaW5zdGFuY2U/LnNldE5hdGl2ZVByb3BzICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBDaGVjayAzOiB0aGUgaW5zdGFuY2UgZG9lcyBub3Qgc3VwcG9ydCBzZXROYXRpdmVQcm9wcy4gQ2FsbCBgc2NoZWR1bGVVcGRhdGVgLlxuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpc0ZhYnJpY05vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIDQ6IHRoaXMgaXMgYSBwYXBlciBpbnN0YW5jZSwgY2FsbCBzZXROYXRpdmVQcm9wcy5cbiAgICAgICAgICAgIC8vICRGbG93SWdub3JlW25vdC1hLWZ1bmN0aW9uXSAtIEFzc3VtZSBpdCdzIHN0aWxsIGEgZnVuY3Rpb24uXG4gICAgICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS11c2VdXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2Uuc2V0TmF0aXZlUHJvcHMobm9kZS5fX2dldEFuaW1hdGVkVmFsdWUoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCF1c2VOYXRpdmVQcm9wc0luRmFicmljKSB7XG4gICAgICAgICAgICAvLyBDaGVjayA1OiBzZXROYXRpdmVQcm9wcyBhcmUgZGlzYWJsZWQuXG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVVcGRhdGUoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBUaGlzIGlzIGEgRmFicmljIGluc3RhbmNlIGFuZCBzZXROYXRpdmVQcm9wcyBpcyBzdXBwb3J0ZWQuXG5cbiAgICAgICAgICAvLyAkRmxvd0lnbm9yZVtub3QtYS1mdW5jdGlvbl0gLSBBc3N1bWUgaXQncyBzdGlsbCBhIGZ1bmN0aW9uLlxuICAgICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXVzZV1cbiAgICAgICAgICBpbnN0YW5jZS5zZXROYXRpdmVQcm9wcyhub2RlLl9fZ2V0QW5pbWF0ZWRWYWx1ZSgpKTtcblxuICAgICAgICAgIC8vIEtlZXBpbmcgc3RhdGUgb2YgRmliZXIgdHJlZSBhbmQgU2hhZG93IHRyZWUgaW4gc3luYy5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIFRoaXMgaXMgZG9uZSBieSBjYWxsaW5nIGBzY2hlZHVsZVVwZGF0ZWAgd2hpY2ggd2lsbCB0cmlnZ2VyIGEgY29tbWl0LlxuICAgICAgICAgIC8vIEhvd2V2ZXIsIFJlYWN0IGNvbW1pdCBpcyBub3QgZmFzdCBlbm91Z2ggdG8gZHJpdmUgYW5pbWF0aW9ucy5cbiAgICAgICAgICAvLyBUaGlzIGlzIHdoZXJlIHNldE5hdGl2ZVByb3BzIGNvbWVzIGluIGhhbmR5IGJ1dCB0aGUgc3RhdGUgYmV0d2VlblxuICAgICAgICAgIC8vIEZpYmVyIHRyZWUgYW5kIFNoYWRvdyB0cmVlIG5lZWRzIHRvIGJlIGtlcHQgaW4gc3luYy5cbiAgICAgICAgICAvLyBUaGUgZ29hbCBpcyB0byBjYWxsIGBzY2hlZHVsZVVwZGF0ZWAgYXMgbGl0dGxlIGFzIHBvc3NpYmxlIHRvIG1haW50YWluXG4gICAgICAgICAgLy8gcGVyZm9ybWFuY2UgYnV0IGZyZXF1ZW50bHkgZW5vdWdoIHRvIGtlZXAgc3RhdGUgaW4gc3luYy5cbiAgICAgICAgICAvLyBEZWJvdW5jZSBpcyBzZXQgdG8gNDhtcywgd2hpY2ggaXMgMyAqIHRoZSBkdXJhdGlvbiBvZiBhIGZyYW1lLlxuICAgICAgICAgIC8vIDMgZnJhbWVzIHdhcyB0aGUgaGlnaGVzdCB2YWx1ZSB3aGVyZSBmbGlja2VyaW5nIHN0YXRlIHdhcyBub3Qgb2JzZXJ2ZWQuXG4gICAgICAgICAgaWYgKHRpbWVyUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyUmVmLmN1cnJlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aW1lclJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aW1lclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICAgICAgfSwgNDgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGluc3RhbmNlKTtcbiAgICAgICAgY29uc3QgYW5pbWF0ZWRWYWx1ZUxpc3RlbmVyczogQW5pbWF0ZWRWYWx1ZUxpc3RlbmVycyA9IFtdO1xuICAgICAgICBjb25zdCBldmVudFR1cGxlcyA9IG5vZGUuX19nZXROYXRpdmVBbmltYXRlZEV2ZW50VHVwbGVzKCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBbcHJvcE5hbWUsIHByb3BWYWx1ZV0gb2YgZXZlbnRUdXBsZXMpIHtcbiAgICAgICAgICBwcm9wVmFsdWUuX19hdHRhY2godGFyZ2V0LCBwcm9wTmFtZSk7XG4gICAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF0gLSB0aGUgYGFkZExpc3RlbmVyc1RvUHJvcHNWYWx1ZWAgZHJpbGxzIGRvd24gdGhlIHByb3BWYWx1ZS5cbiAgICAgICAgICBhZGRMaXN0ZW5lcnNUb1Byb3BzVmFsdWUocHJvcFZhbHVlLCBhbmltYXRlZFZhbHVlTGlzdGVuZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgb25VcGRhdGVSZWYuY3VycmVudCA9IG51bGw7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IFtwcm9wTmFtZSwgcHJvcFZhbHVlXSBvZiBldmVudFR1cGxlcykge1xuICAgICAgICAgICAgcHJvcFZhbHVlLl9fZGV0YWNoKHRhcmdldCwgcHJvcE5hbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAoY29uc3Qge3Byb3BWYWx1ZSwgbGlzdGVuZXJJZH0gb2YgYW5pbWF0ZWRWYWx1ZUxpc3RlbmVycykge1xuICAgICAgICAgICAgcHJvcFZhbHVlLnJlbW92ZUxpc3RlbmVyKGxpc3RlbmVySWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBbbm9kZV0sXG4gICAgKTtcbiAgICBjb25zdCBjYWxsYmFja1JlZiA9IHVzZVJlZkVmZmVjdDxUSW5zdGFuY2U+KHJlZkVmZmVjdCk7XG5cbiAgICByZXR1cm4gW3JlZHVjZUFuaW1hdGVkUHJvcHM8VFByb3BzPihub2RlLCBwcm9wcyksIGNhbGxiYWNrUmVmXTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcmVkdWNlQW5pbWF0ZWRQcm9wczxUUHJvcHM+KFxuICBub2RlOiBBbmltYXRlZFByb3BzLFxuICBwcm9wczogVFByb3BzLFxuKTogUmVkdWNlZFByb3BzPFRQcm9wcz4ge1xuICAvLyBGb3JjZSBgY29sbGFwc2FibGVgIHRvIGJlIGZhbHNlIHNvIHRoYXQgdGhlIG5hdGl2ZSB2aWV3IGlzIG5vdCBmbGF0dGVuZWQuXG4gIC8vIEZsYXR0ZW5lZCB2aWV3cyBjYW5ub3QgYmUgYWNjdXJhdGVseSByZWZlcmVuY2VkIGJ5IHRoZSBuYXRpdmUgZHJpdmVyLlxuICByZXR1cm4ge1xuICAgIC4uLm5vZGUuX19nZXRWYWx1ZVdpdGhTdGF0aWNQcm9wcyhwcm9wcyksXG4gICAgY29sbGFwc2FibGU6IGZhbHNlLFxuICB9O1xufVxuXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcnNUb1Byb3BzVmFsdWUoXG4gIHByb3BWYWx1ZTogQW5pbWF0ZWRWYWx1ZSxcbiAgYWNjdW11bGF0b3I6IEFuaW1hdGVkVmFsdWVMaXN0ZW5lcnMsXG4pIHtcbiAgLy8gcHJvcFZhbHVlIGNhbiBiZSBhIHNjYWxhciB2YWx1ZSwgYW4gYXJyYXkgb3IgYW4gb2JqZWN0LlxuICBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWRWYWx1ZSkge1xuICAgIGNvbnN0IGxpc3RlbmVySWQgPSBwcm9wVmFsdWUuYWRkTGlzdGVuZXIoKCkgPT4ge30pO1xuICAgIGFjY3VtdWxhdG9yLnB1c2goe3Byb3BWYWx1ZSwgbGlzdGVuZXJJZH0pO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuICAgIC8vIEFuIGFycmF5IGNhbiBiZSBhbiBhcnJheSBvZiBzY2FsYXIgdmFsdWVzLCBhcnJheXMgb2YgYXJyYXlzLCBvciBhcnJheXMgb2Ygb2JqZWN0c1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBwcm9wVmFsdWUpIHtcbiAgICAgIGFkZExpc3RlbmVyc1RvUHJvcHNWYWx1ZShwcm9wLCBhY2N1bXVsYXRvcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHByb3BWYWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgIGFkZEFuaW1hdGVkVmFsdWVzTGlzdGVuZXJzVG9Qcm9wcyhwcm9wVmFsdWUsIGFjY3VtdWxhdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRBbmltYXRlZFZhbHVlc0xpc3RlbmVyc1RvUHJvcHMoXG4gIHByb3BzOiBBbmltYXRlZE5vZGUsXG4gIGFjY3VtdWxhdG9yOiBBbmltYXRlZFZhbHVlTGlzdGVuZXJzLFxuKSB7XG4gIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gcHJvcHMpIHtcbiAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gLSBUaGlzIGlzIGFuIG9iamVjdCBjb250YWluZWQgaW4gYSBwcm9wLCBidXQgd2UgZG9uJ3Qga25vdyB0aGUgZXhhY3QgdHlwZS5cbiAgICBjb25zdCBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgYWRkTGlzdGVuZXJzVG9Qcm9wc1ZhbHVlKHByb3BWYWx1ZSwgYWNjdW11bGF0b3IpO1xuICB9XG59XG5cbi8qKlxuICogTWFuYWdlcyB0aGUgbGlmZWN5Y2xlIG9mIHRoZSBzdXBwbGllZCBgQW5pbWF0ZWRQcm9wc2AgYnkgaW52b2tpbmcgYF9fYXR0YWNoYFxuICogYW5kIGBfX2RldGFjaGAuIEhvd2V2ZXIsIHRoaXMgaXMgbW9yZSBjb21wbGljYXRlZCBiZWNhdXNlIGBBbmltYXRlZFByb3BzYFxuICogdXNlcyByZWZlcmVuY2UgY291bnRpbmcgdG8gZGV0ZXJtaW5lIHdoZW4gdG8gcmVjdXJzaXZlbHkgZGV0YWNoIGl0cyBjaGlsZHJlblxuICogbm9kZXMuIFNvIGluIG9yZGVyIHRvIG9wdGltaXplIHRoaXMsIHdlIGF2b2lkIGRldGFjaGluZyB1bnRpbCB0aGUgbmV4dCBhdHRhY2hcbiAqIHVubGVzcyB3ZSBhcmUgdW5tb3VudGluZy5cbiAqL1xuZnVuY3Rpb24gdXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZVdpdGhQcmV2Tm9kZVJlZihub2RlOiBBbmltYXRlZFByb3BzKTogdm9pZCB7XG4gIGNvbnN0IHByZXZOb2RlUmVmID0gdXNlUmVmPD9BbmltYXRlZFByb3BzPihudWxsKTtcbiAgY29uc3QgaXNVbm1vdW50aW5nUmVmID0gdXNlUmVmPGJvb2xlYW4+KGZhbHNlKTtcblxuICB1c2VJbnNlcnRpb25FZmZlY3QoKCkgPT4ge1xuICAgIGlzVW5tb3VudGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzVW5tb3VudGluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgdXNlSW5zZXJ0aW9uRWZmZWN0KCgpID0+IHtcbiAgICBub2RlLl9fYXR0YWNoKCk7XG4gICAgaWYgKHByZXZOb2RlUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgY29uc3QgcHJldk5vZGUgPSBwcmV2Tm9kZVJlZi5jdXJyZW50O1xuICAgICAgLy8gVE9ETzogU3RvcCByZXN0b3JpbmcgZGVmYXVsdCB2YWx1ZXMgKHVubGVzcyBgcmVzZXRgIGlzIGNhbGxlZCkuXG4gICAgICBwcmV2Tm9kZS5fX3Jlc3RvcmVEZWZhdWx0VmFsdWVzKCk7XG4gICAgICBwcmV2Tm9kZS5fX2RldGFjaCgpO1xuICAgICAgcHJldk5vZGVSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoaXNVbm1vdW50aW5nUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgLy8gTk9URTogRG8gbm90IHJlc3RvcmUgZGVmYXVsdCB2YWx1ZXMgb24gdW5tb3VudCwgc2VlIEQxODE5NzczNS5cbiAgICAgICAgbm9kZS5fX2RldGFjaCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJldk5vZGVSZWYuY3VycmVudCA9IG5vZGU7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW25vZGVdKTtcbn1cblxuLyoqXG4gKiBNYW5hZ2VzIHRoZSBsaWZlY3ljbGUgb2YgdGhlIHN1cHBsaWVkIGBBbmltYXRlZFByb3BzYCBieSBpbnZva2luZyBgX19hdHRhY2hgXG4gKiBhbmQgYF9fZGV0YWNoYC4gSG93ZXZlciwgYF9fZGV0YWNoYCBvY2N1cnMgaW4gYSBtaWNyb3Rhc2sgZm9yIHRoZXNlIHJlYXNvbnM6XG4gKlxuICogICAxLiBPcHRpbWl6ZXMgZGV0YWNoaW5nIGFuZCBhdHRhY2hpbmcgYEFuaW1hdGVkTm9kZWAgaW5zdGFuY2VzIHRoYXQgcmVseSBvblxuICogICAgICByZWZlcmVuY2UgY291bnRpbmcgdG8gY2xlYW51cCBzdGF0ZSwgYnkgY2F1c2luZyBkZXRhY2ggdG8gYmUgc2NoZWR1bGVkXG4gKiAgICAgIGFmdGVyIGFueSBzdWJzZXF1ZW50IGF0dGFjaC5cbiAqICAgMi4gQXZvaWRzIGNhbGxpbmcgYGRldGFjaGAgZHVyaW5nIHRoZSBpbnNlcnRpb24gZWZmZWN0IHBoYXNlICh3aGljaFxuICogICAgICBvY2N1cnMgZHVyaW5nIHRoZSBjb21taXQgcGhhc2UpLCB3aGljaCBtYXkgaW52b2tlIGNvbXBsZXRpb24gY2FsbGJhY2tzLlxuICpcbiAqIFdlIHNob3VsZCBhdm9pZCBpbnZva2luZyBjb21wbGV0aW9uIGNhbGxiYWNrcyBkdXJpbmcgdGhlIGNvbW1pdCBwaGFzZSBiZWNhdXNlXG4gKiBjYWxsYmFja3MgbWF5IHVwZGF0ZSBzdGF0ZSwgd2hpY2ggaXMgdW5zdXBwb3J0ZWQgYW5kIHdpbGwgZm9yY2Ugc3luY2hyb25vdXNcbiAqIHVwZGF0ZXMuXG4gKi9cbmZ1bmN0aW9uIHVzZUFuaW1hdGVkUHJvcHNMaWZlY3ljbGVXaXRoQ2xlYW51cEluTWljcm90YXNrKFxuICBub2RlOiBBbmltYXRlZFByb3BzLFxuKTogdm9pZCB7XG4gIGNvbnN0IGlzTW91bnRlZCA9IHVzZVJlZjxib29sZWFuPihmYWxzZSk7XG5cbiAgdXNlSW5zZXJ0aW9uRWZmZWN0KCgpID0+IHtcbiAgICBpc01vdW50ZWQuY3VycmVudCA9IHRydWU7XG4gICAgbm9kZS5fX2F0dGFjaCgpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzTW91bnRlZC5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICAgIC8vIE5PVEU6IERvIG5vdCByZXN0b3JlIGRlZmF1bHQgdmFsdWVzIG9uIHVubW91bnQsIHNlZSBEMTgxOTc3MzUuXG4gICAgICAgIGlmIChpc01vdW50ZWQuY3VycmVudCkge1xuICAgICAgICAgIC8vIFRPRE86IFN0b3AgcmVzdG9yaW5nIGRlZmF1bHQgdmFsdWVzICh1bmxlc3MgYHJlc2V0YCBpcyBjYWxsZWQpLlxuICAgICAgICAgIG5vZGUuX19yZXN0b3JlRGVmYXVsdFZhbHVlcygpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUuX19kZXRhY2goKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sIFtub2RlXSk7XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50VGFyZ2V0PFRJbnN0YW5jZT4oaW5zdGFuY2U6IFRJbnN0YW5jZSk6IFRJbnN0YW5jZSB7XG4gIHJldHVybiB0eXBlb2YgaW5zdGFuY2UgPT09ICdvYmplY3QnICYmXG4gICAgdHlwZW9mIGluc3RhbmNlPy5nZXRTY3JvbGxhYmxlTm9kZSA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdXNlXSAtIExlZ2FjeSBpbnN0YW5jZSBhc3N1bXB0aW9ucy5cbiAgICAgIGluc3RhbmNlLmdldFNjcm9sbGFibGVOb2RlKClcbiAgICA6IGluc3RhbmNlO1xufVxuXG4vLyAkRmxvd0ZpeE1lW3VuY2xlYXItdHlwZV0gLSBMZWdhY3kgaW5zdGFuY2UgYXNzdW1wdGlvbnMuXG5mdW5jdGlvbiBpc0ZhYnJpY0luc3RhbmNlKGluc3RhbmNlOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBpc0ZhYnJpY1B1YmxpY0luc3RhbmNlKGluc3RhbmNlKSB8fFxuICAgIC8vIFNvbWUgY29tcG9uZW50cyBoYXZlIGEgc2V0TmF0aXZlUHJvcHMgZnVuY3Rpb24gYnV0IGFyZW4ndCBhIGhvc3QgY29tcG9uZW50XG4gICAgLy8gc3VjaCBhcyBsaXN0cyBsaWtlIEZsYXRMaXN0IGFuZCBTZWN0aW9uTGlzdC4gVGhlc2Ugc2hvdWxkIGFsc28gdXNlXG4gICAgLy8gZm9yY2VVcGRhdGUgaW4gRmFicmljIHNpbmNlIHNldE5hdGl2ZVByb3BzIGRvZXNuJ3QgZXhpc3Qgb24gdGhlIHVuZGVybHlpbmdcbiAgICAvLyBob3N0IGNvbXBvbmVudC4gVGhpcyBjcmF6eSBoYWNrIGlzIGVzc2VudGlhbGx5IHNwZWNpYWwgY2FzaW5nIHRob3NlIGxpc3RzIGFuZFxuICAgIC8vIFNjcm9sbFZpZXcgaXRzZWxmIHRvIHVzZSBmb3JjZVVwZGF0ZSBpbiBGYWJyaWMuXG4gICAgLy8gSWYgdGhlc2UgY29tcG9uZW50cyBlbmQgdXAgdXNpbmcgZm9yd2FyZFJlZiB0aGVuIHRoZXNlIGhhY2tzIGNhbiBnbyBhd2F5XG4gICAgLy8gYXMgaW5zdGFuY2Ugd291bGQgYWN0dWFsbHkgYmUgdGhlIHVuZGVybHlpbmcgaG9zdCBjb21wb25lbnQgYW5kIHRoZSBhYm92ZSBjaGVja1xuICAgIC8vIHdvdWxkIGJlIHN1ZmZpY2llbnQuXG4gICAgaXNGYWJyaWNQdWJsaWNJbnN0YW5jZShpbnN0YW5jZT8uZ2V0TmF0aXZlU2Nyb2xsUmVmPy4oKSkgfHxcbiAgICBpc0ZhYnJpY1B1YmxpY0luc3RhbmNlKFxuICAgICAgaW5zdGFuY2U/LmdldFNjcm9sbFJlc3BvbmRlcj8uKCk/LmdldE5hdGl2ZVNjcm9sbFJlZj8uKCksXG4gICAgKVxuICApO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFhQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxjQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxjQUFBLEdBQUFILHNCQUFB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