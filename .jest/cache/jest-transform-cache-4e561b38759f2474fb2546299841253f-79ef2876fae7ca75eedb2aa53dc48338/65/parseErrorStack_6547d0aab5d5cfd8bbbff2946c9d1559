0d2db860a47b8beb518c37c643b001ea
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseErrorStack;
var parseHermesStack = require('./parseHermesStack').default;
function convertHermesStack(stack) {
  var frames = [];
  for (var entry of stack.entries) {
    if (entry.type !== 'FRAME') {
      continue;
    }
    var location = entry.location,
      functionName = entry.functionName;
    if (location.type === 'NATIVE' || location.type === 'INTERNAL_BYTECODE') {
      continue;
    }
    frames.push({
      methodName: functionName,
      file: location.sourceUrl,
      lineNumber: location.line1Based,
      column: location.type === 'SOURCE' ? location.column1Based - 1 : location.virtualOffset0Based
    });
  }
  return frames;
}
function parseErrorStack(errorStack) {
  if (errorStack == null) {
    return [];
  }
  var stacktraceParser = require('stacktrace-parser');
  var parsedStack = Array.isArray(errorStack) ? errorStack : global.HermesInternal ? convertHermesStack(parseHermesStack(errorStack)) : stacktraceParser.parse(errorStack).map(function (frame) {
    return Object.assign({}, frame, {
      column: frame.column != null ? frame.column - 1 : null
    });
  });
  return parsedStack;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJwYXJzZUVycm9yU3RhY2siLCJwYXJzZUhlcm1lc1N0YWNrIiwicmVxdWlyZSIsImNvbnZlcnRIZXJtZXNTdGFjayIsInN0YWNrIiwiZnJhbWVzIiwiZW50cnkiLCJlbnRyaWVzIiwidHlwZSIsImxvY2F0aW9uIiwiZnVuY3Rpb25OYW1lIiwicHVzaCIsIm1ldGhvZE5hbWUiLCJmaWxlIiwic291cmNlVXJsIiwibGluZU51bWJlciIsImxpbmUxQmFzZWQiLCJjb2x1bW4iLCJjb2x1bW4xQmFzZWQiLCJ2aXJ0dWFsT2Zmc2V0MEJhc2VkIiwiZXJyb3JTdGFjayIsInN0YWNrdHJhY2VQYXJzZXIiLCJwYXJzZWRTdGFjayIsIkFycmF5IiwiaXNBcnJheSIsImdsb2JhbCIsIkhlcm1lc0ludGVybmFsIiwicGFyc2UiLCJtYXAiLCJmcmFtZSIsImFzc2lnbiJdLCJzb3VyY2VzIjpbInBhcnNlRXJyb3JTdGFjay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0XG4gKiBAZm9ybWF0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7U3RhY2tGcmFtZX0gZnJvbSAnLi4vTmF0aXZlRXhjZXB0aW9uc01hbmFnZXInO1xuaW1wb3J0IHR5cGUge0hlcm1lc1BhcnNlZFN0YWNrfSBmcm9tICcuL3BhcnNlSGVybWVzU3RhY2snO1xuXG5jb25zdCBwYXJzZUhlcm1lc1N0YWNrID0gcmVxdWlyZSgnLi9wYXJzZUhlcm1lc1N0YWNrJykuZGVmYXVsdDtcblxuZnVuY3Rpb24gY29udmVydEhlcm1lc1N0YWNrKHN0YWNrOiBIZXJtZXNQYXJzZWRTdGFjayk6IEFycmF5PFN0YWNrRnJhbWU+IHtcbiAgY29uc3QgZnJhbWVzOiBBcnJheTxTdGFja0ZyYW1lPiA9IFtdO1xuICBmb3IgKGNvbnN0IGVudHJ5IG9mIHN0YWNrLmVudHJpZXMpIHtcbiAgICBpZiAoZW50cnkudHlwZSAhPT0gJ0ZSQU1FJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHtsb2NhdGlvbiwgZnVuY3Rpb25OYW1lfSA9IGVudHJ5O1xuICAgIGlmIChsb2NhdGlvbi50eXBlID09PSAnTkFUSVZFJyB8fCBsb2NhdGlvbi50eXBlID09PSAnSU5URVJOQUxfQllURUNPREUnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgZnJhbWVzLnB1c2goe1xuICAgICAgbWV0aG9kTmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgZmlsZTogbG9jYXRpb24uc291cmNlVXJsLFxuICAgICAgbGluZU51bWJlcjogbG9jYXRpb24ubGluZTFCYXNlZCxcbiAgICAgIGNvbHVtbjpcbiAgICAgICAgbG9jYXRpb24udHlwZSA9PT0gJ1NPVVJDRSdcbiAgICAgICAgICA/IGxvY2F0aW9uLmNvbHVtbjFCYXNlZCAtIDFcbiAgICAgICAgICA6IGxvY2F0aW9uLnZpcnR1YWxPZmZzZXQwQmFzZWQsXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZyYW1lcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2VFcnJvclN0YWNrKFxuICBlcnJvclN0YWNrPzogc3RyaW5nLFxuKTogQXJyYXk8U3RhY2tGcmFtZT4ge1xuICBpZiAoZXJyb3JTdGFjayA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3Qgc3RhY2t0cmFjZVBhcnNlciA9IHJlcXVpcmUoJ3N0YWNrdHJhY2UtcGFyc2VyJyk7XG4gIGNvbnN0IHBhcnNlZFN0YWNrID0gQXJyYXkuaXNBcnJheShlcnJvclN0YWNrKVxuICAgID8gZXJyb3JTdGFja1xuICAgIDogZ2xvYmFsLkhlcm1lc0ludGVybmFsXG4gICAgICA/IGNvbnZlcnRIZXJtZXNTdGFjayhwYXJzZUhlcm1lc1N0YWNrKGVycm9yU3RhY2spKVxuICAgICAgOiBzdGFja3RyYWNlUGFyc2VyLnBhcnNlKGVycm9yU3RhY2spLm1hcCgoZnJhbWUpOiBTdGFja0ZyYW1lID0+ICh7XG4gICAgICAgICAgLi4uZnJhbWUsXG4gICAgICAgICAgY29sdW1uOiBmcmFtZS5jb2x1bW4gIT0gbnVsbCA/IGZyYW1lLmNvbHVtbiAtIDEgOiBudWxsLFxuICAgICAgICB9KSk7XG5cbiAgcmV0dXJuIHBhcnNlZFN0YWNrO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUFDQSxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxDQUFBRSxPQUFBLEdBQUFDLGVBQUE7QUFLYixJQUFNQyxnQkFBZ0IsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUNILE9BQU87QUFFOUQsU0FBU0ksa0JBQWtCQSxDQUFDQyxLQUF3QixFQUFxQjtFQUN2RSxJQUFNQyxNQUF5QixHQUFHLEVBQUU7RUFDcEMsS0FBSyxJQUFNQyxLQUFLLElBQUlGLEtBQUssQ0FBQ0csT0FBTyxFQUFFO0lBQ2pDLElBQUlELEtBQUssQ0FBQ0UsSUFBSSxLQUFLLE9BQU8sRUFBRTtNQUMxQjtJQUNGO0lBQ0EsSUFBT0MsUUFBUSxHQUFrQkgsS0FBSyxDQUEvQkcsUUFBUTtNQUFFQyxZQUFZLEdBQUlKLEtBQUssQ0FBckJJLFlBQVk7SUFDN0IsSUFBSUQsUUFBUSxDQUFDRCxJQUFJLEtBQUssUUFBUSxJQUFJQyxRQUFRLENBQUNELElBQUksS0FBSyxtQkFBbUIsRUFBRTtNQUN2RTtJQUNGO0lBQ0FILE1BQU0sQ0FBQ00sSUFBSSxDQUFDO01BQ1ZDLFVBQVUsRUFBRUYsWUFBWTtNQUN4QkcsSUFBSSxFQUFFSixRQUFRLENBQUNLLFNBQVM7TUFDeEJDLFVBQVUsRUFBRU4sUUFBUSxDQUFDTyxVQUFVO01BQy9CQyxNQUFNLEVBQ0pSLFFBQVEsQ0FBQ0QsSUFBSSxLQUFLLFFBQVEsR0FDdEJDLFFBQVEsQ0FBQ1MsWUFBWSxHQUFHLENBQUMsR0FDekJULFFBQVEsQ0FBQ1U7SUFDakIsQ0FBQyxDQUFDO0VBQ0o7RUFDQSxPQUFPZCxNQUFNO0FBQ2Y7QUFFZSxTQUFTTCxlQUFlQSxDQUNyQ29CLFVBQW1CLEVBQ0E7RUFDbkIsSUFBSUEsVUFBVSxJQUFJLElBQUksRUFBRTtJQUN0QixPQUFPLEVBQUU7RUFDWDtFQUVBLElBQU1DLGdCQUFnQixHQUFHbkIsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0VBQ3JELElBQU1vQixXQUFXLEdBQUdDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDSixVQUFVLENBQUMsR0FDekNBLFVBQVUsR0FDVkssTUFBTSxDQUFDQyxjQUFjLEdBQ25CdkIsa0JBQWtCLENBQUNGLGdCQUFnQixDQUFDbUIsVUFBVSxDQUFDLENBQUMsR0FDaERDLGdCQUFnQixDQUFDTSxLQUFLLENBQUNQLFVBQVUsQ0FBQyxDQUFDUSxHQUFHLENBQUMsVUFBQ0MsS0FBSztJQUFBLE9BQUFsQyxNQUFBLENBQUFtQyxNQUFBLEtBQ3hDRCxLQUFLO01BQ1JaLE1BQU0sRUFBRVksS0FBSyxDQUFDWixNQUFNLElBQUksSUFBSSxHQUFHWSxLQUFLLENBQUNaLE1BQU0sR0FBRyxDQUFDLEdBQUc7SUFBSTtFQUFBLENBQ3RELENBQUM7RUFFVCxPQUFPSyxXQUFXO0FBQ3BCIiwiaWdub3JlTGlzdCI6W119