ebc52ef8737b5c4a10869526bb2ab607
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
exports.flushValue = flushValue;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _classPrivateFieldLooseBase2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseBase"));
var _classPrivateFieldLooseKey2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseKey"));
var _NativeAnimatedHelper = _interopRequireDefault(require("../../../src/private/animated/NativeAnimatedHelper"));
var _InteractionManager = _interopRequireDefault(require("../../Interaction/InteractionManager"));
var _AnimatedInterpolation = _interopRequireDefault(require("./AnimatedInterpolation"));
var _AnimatedWithChildren2 = _interopRequireDefault(require("./AnimatedWithChildren"));
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _superPropGet(t, o, e, r) { var p = (0, _get2.default)((0, _getPrototypeOf2.default)(1 & r ? t.prototype : t), o, e); return 2 & r && "function" == typeof p ? function (t) { return p.apply(e, t); } : p; }
var NativeAnimatedAPI = _NativeAnimatedHelper.default.API;
function flushValue(rootNode) {
  var leaves = new Set();
  function findAnimatedStyles(node) {
    if (typeof node.update === 'function') {
      leaves.add(node);
    } else {
      node.__getChildren().forEach(findAnimatedStyles);
    }
  }
  findAnimatedStyles(rootNode);
  leaves.forEach(function (leaf) {
    return leaf.update();
  });
}
function _executeAsAnimatedBatch(id, operation) {
  NativeAnimatedAPI.setWaitingForIdentifier(id);
  operation();
  NativeAnimatedAPI.unsetWaitingForIdentifier(id);
}
var _listenerCount = (0, _classPrivateFieldLooseKey2.default)("listenerCount");
var _updateSubscription = (0, _classPrivateFieldLooseKey2.default)("updateSubscription");
var _ensureUpdateSubscriptionExists = (0, _classPrivateFieldLooseKey2.default)("ensureUpdateSubscriptionExists");
var AnimatedValue = exports.default = function (_AnimatedWithChildren) {
  function AnimatedValue(value, config) {
    var _this;
    (0, _classCallCheck2.default)(this, AnimatedValue);
    _this = _callSuper(this, AnimatedValue, [config]);
    Object.defineProperty(_this, _ensureUpdateSubscriptionExists, {
      value: _ensureUpdateSubscriptionExists2
    });
    Object.defineProperty(_this, _listenerCount, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(_this, _updateSubscription, {
      writable: true,
      value: void 0
    });
    if (typeof value !== 'number') {
      throw new Error('AnimatedValue: Attempting to set value to undefined');
    }
    (0, _classPrivateFieldLooseBase2.default)(_this, _listenerCount)[_listenerCount] = 0;
    (0, _classPrivateFieldLooseBase2.default)(_this, _updateSubscription)[_updateSubscription] = null;
    _this._startingValue = _this._value = value;
    _this._offset = 0;
    _this._animation = null;
    if (config && config.useNativeDriver) {
      _this.__makeNative();
    }
    return _this;
  }
  (0, _inherits2.default)(AnimatedValue, _AnimatedWithChildren);
  return (0, _createClass2.default)(AnimatedValue, [{
    key: "__detach",
    value: function __detach() {
      var _this2 = this;
      if (this.__isNative) {
        NativeAnimatedAPI.getValue(this.__getNativeTag(), function (value) {
          _this2._value = value - _this2._offset;
        });
      }
      this.stopAnimation();
      _superPropGet(AnimatedValue, "__detach", this, 3)([]);
    }
  }, {
    key: "__getValue",
    value: function __getValue() {
      return this._value + this._offset;
    }
  }, {
    key: "__makeNative",
    value: function __makeNative(platformConfig) {
      _superPropGet(AnimatedValue, "__makeNative", this, 3)([platformConfig]);
      if ((0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount] > 0) {
        (0, _classPrivateFieldLooseBase2.default)(this, _ensureUpdateSubscriptionExists)[_ensureUpdateSubscriptionExists]();
      }
    }
  }, {
    key: "addListener",
    value: function addListener(callback) {
      var id = _superPropGet(AnimatedValue, "addListener", this, 3)([callback]);
      (0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount]++;
      if (this.__isNative) {
        (0, _classPrivateFieldLooseBase2.default)(this, _ensureUpdateSubscriptionExists)[_ensureUpdateSubscriptionExists]();
      }
      return id;
    }
  }, {
    key: "removeListener",
    value: function removeListener(id) {
      _superPropGet(AnimatedValue, "removeListener", this, 3)([id]);
      (0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount]--;
      if (this.__isNative && (0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount] === 0) {
        var _classPrivateFieldLoo;
        (_classPrivateFieldLoo = (0, _classPrivateFieldLooseBase2.default)(this, _updateSubscription)[_updateSubscription]) == null || _classPrivateFieldLoo.remove();
      }
    }
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners() {
      _superPropGet(AnimatedValue, "removeAllListeners", this, 3)([]);
      (0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount] = 0;
      if (this.__isNative) {
        var _classPrivateFieldLoo2;
        (_classPrivateFieldLoo2 = (0, _classPrivateFieldLooseBase2.default)(this, _updateSubscription)[_updateSubscription]) == null || _classPrivateFieldLoo2.remove();
      }
    }
  }, {
    key: "setValue",
    value: function setValue(value) {
      var _this3 = this;
      if (this._animation) {
        this._animation.stop();
        this._animation = null;
      }
      this._updateValue(value, !this.__isNative);
      if (this.__isNative) {
        _executeAsAnimatedBatch(this.__getNativeTag().toString(), function () {
          return NativeAnimatedAPI.setAnimatedNodeValue(_this3.__getNativeTag(), value);
        });
      }
    }
  }, {
    key: "setOffset",
    value: function setOffset(offset) {
      this._offset = offset;
      if (this.__isNative) {
        NativeAnimatedAPI.setAnimatedNodeOffset(this.__getNativeTag(), offset);
      }
    }
  }, {
    key: "flattenOffset",
    value: function flattenOffset() {
      this._value += this._offset;
      this._offset = 0;
      if (this.__isNative) {
        NativeAnimatedAPI.flattenAnimatedNodeOffset(this.__getNativeTag());
      }
    }
  }, {
    key: "extractOffset",
    value: function extractOffset() {
      var _this4 = this;
      this._offset += this._value;
      this._value = 0;
      if (this.__isNative) {
        _executeAsAnimatedBatch(this.__getNativeTag().toString(), function () {
          return NativeAnimatedAPI.extractAnimatedNodeOffset(_this4.__getNativeTag());
        });
      }
    }
  }, {
    key: "stopAnimation",
    value: function stopAnimation(callback) {
      this.stopTracking();
      this._animation && this._animation.stop();
      this._animation = null;
      if (callback) {
        if (this.__isNative) {
          NativeAnimatedAPI.getValue(this.__getNativeTag(), callback);
        } else {
          callback(this.__getValue());
        }
      }
    }
  }, {
    key: "resetAnimation",
    value: function resetAnimation(callback) {
      this.stopAnimation(callback);
      this._value = this._startingValue;
      if (this.__isNative) {
        NativeAnimatedAPI.setAnimatedNodeValue(this.__getNativeTag(), this._startingValue);
      }
    }
  }, {
    key: "__onAnimatedValueUpdateReceived",
    value: function __onAnimatedValueUpdateReceived(value, offset) {
      this._updateValue(value, false);
      if (offset != null) {
        this._offset = offset;
      }
    }
  }, {
    key: "interpolate",
    value: function interpolate(config) {
      return new _AnimatedInterpolation.default(this, config);
    }
  }, {
    key: "animate",
    value: function animate(animation, callback) {
      var _this5 = this;
      var handle = null;
      if (animation.__isInteraction) {
        handle = _InteractionManager.default.createInteractionHandle();
      }
      var previousAnimation = this._animation;
      this._animation && this._animation.stop();
      this._animation = animation;
      animation.start(this._value, function (value) {
        _this5._updateValue(value, true);
      }, function (result) {
        _this5._animation = null;
        if (handle !== null) {
          _InteractionManager.default.clearInteractionHandle(handle);
        }
        callback && callback(result);
      }, previousAnimation, this);
    }
  }, {
    key: "stopTracking",
    value: function stopTracking() {
      this._tracking && this._tracking.__detach();
      this._tracking = null;
    }
  }, {
    key: "track",
    value: function track(tracking) {
      this.stopTracking();
      this._tracking = tracking;
      this._tracking && this._tracking.update();
    }
  }, {
    key: "_updateValue",
    value: function _updateValue(value, flush) {
      if (value === undefined) {
        throw new Error('AnimatedValue: Attempting to set value to undefined');
      }
      this._value = value;
      if (flush) {
        flushValue(this);
      }
      this.__callListeners(this.__getValue());
    }
  }, {
    key: "__getNativeConfig",
    value: function __getNativeConfig() {
      return {
        type: 'value',
        value: this._value,
        offset: this._offset,
        debugID: this.__getDebugID()
      };
    }
  }]);
}(_AnimatedWithChildren2.default);
function _ensureUpdateSubscriptionExists2() {
  var _this6 = this;
  if ((0, _classPrivateFieldLooseBase2.default)(this, _updateSubscription)[_updateSubscription] != null) {
    return;
  }
  var nativeTag = this.__getNativeTag();
  NativeAnimatedAPI.startListeningToAnimatedNodeValue(nativeTag);
  var subscription = _NativeAnimatedHelper.default.nativeEventEmitter.addListener('onAnimatedValueUpdate', function (data) {
    if (data.tag === nativeTag) {
      _this6.__onAnimatedValueUpdateReceived(data.value, data.offset);
    }
  });
  (0, _classPrivateFieldLooseBase2.default)(this, _updateSubscription)[_updateSubscription] = {
    remove: function remove() {
      if ((0, _classPrivateFieldLooseBase2.default)(_this6, _updateSubscription)[_updateSubscription] == null) {
        return;
      }
      (0, _classPrivateFieldLooseBase2.default)(_this6, _updateSubscription)[_updateSubscription] = null;
      subscription.remove();
      NativeAnimatedAPI.stopListeningToAnimatedNodeValue(nativeTag);
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlQW5pbWF0ZWRIZWxwZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9JbnRlcmFjdGlvbk1hbmFnZXIiLCJfQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIiwiX0FuaW1hdGVkV2l0aENoaWxkcmVuMiIsIl9jYWxsU3VwZXIiLCJ0IiwibyIsImUiLCJfZ2V0UHJvdG90eXBlT2YyIiwiZGVmYXVsdCIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiIsIl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiY29uc3RydWN0b3IiLCJhcHBseSIsIkJvb2xlYW4iLCJwcm90b3R5cGUiLCJ2YWx1ZU9mIiwiY2FsbCIsIl9zdXBlclByb3BHZXQiLCJyIiwicCIsIl9nZXQyIiwiTmF0aXZlQW5pbWF0ZWRBUEkiLCJOYXRpdmVBbmltYXRlZEhlbHBlciIsIkFQSSIsImZsdXNoVmFsdWUiLCJyb290Tm9kZSIsImxlYXZlcyIsIlNldCIsImZpbmRBbmltYXRlZFN0eWxlcyIsIm5vZGUiLCJ1cGRhdGUiLCJhZGQiLCJfX2dldENoaWxkcmVuIiwiZm9yRWFjaCIsImxlYWYiLCJfZXhlY3V0ZUFzQW5pbWF0ZWRCYXRjaCIsImlkIiwib3BlcmF0aW9uIiwic2V0V2FpdGluZ0ZvcklkZW50aWZpZXIiLCJ1bnNldFdhaXRpbmdGb3JJZGVudGlmaWVyIiwiX2xpc3RlbmVyQ291bnQiLCJfY2xhc3NQcml2YXRlRmllbGRMb29zZUtleTIiLCJfdXBkYXRlU3Vic2NyaXB0aW9uIiwiX2Vuc3VyZVVwZGF0ZVN1YnNjcmlwdGlvbkV4aXN0cyIsIkFuaW1hdGVkVmFsdWUiLCJleHBvcnRzIiwiX0FuaW1hdGVkV2l0aENoaWxkcmVuIiwidmFsdWUiLCJjb25maWciLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjazIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIl9lbnN1cmVVcGRhdGVTdWJzY3JpcHRpb25FeGlzdHMyIiwid3JpdGFibGUiLCJFcnJvciIsIl9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZTIiLCJfc3RhcnRpbmdWYWx1ZSIsIl92YWx1ZSIsIl9vZmZzZXQiLCJfYW5pbWF0aW9uIiwidXNlTmF0aXZlRHJpdmVyIiwiX19tYWtlTmF0aXZlIiwiX2luaGVyaXRzMiIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJfX2RldGFjaCIsIl90aGlzMiIsIl9faXNOYXRpdmUiLCJnZXRWYWx1ZSIsIl9fZ2V0TmF0aXZlVGFnIiwic3RvcEFuaW1hdGlvbiIsIl9fZ2V0VmFsdWUiLCJwbGF0Zm9ybUNvbmZpZyIsImFkZExpc3RlbmVyIiwiY2FsbGJhY2siLCJyZW1vdmVMaXN0ZW5lciIsIl9jbGFzc1ByaXZhdGVGaWVsZExvbyIsInJlbW92ZSIsInJlbW92ZUFsbExpc3RlbmVycyIsIl9jbGFzc1ByaXZhdGVGaWVsZExvbzIiLCJzZXRWYWx1ZSIsIl90aGlzMyIsInN0b3AiLCJfdXBkYXRlVmFsdWUiLCJ0b1N0cmluZyIsInNldEFuaW1hdGVkTm9kZVZhbHVlIiwic2V0T2Zmc2V0Iiwib2Zmc2V0Iiwic2V0QW5pbWF0ZWROb2RlT2Zmc2V0IiwiZmxhdHRlbk9mZnNldCIsImZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQiLCJleHRyYWN0T2Zmc2V0IiwiX3RoaXM0IiwiZXh0cmFjdEFuaW1hdGVkTm9kZU9mZnNldCIsInN0b3BUcmFja2luZyIsInJlc2V0QW5pbWF0aW9uIiwiX19vbkFuaW1hdGVkVmFsdWVVcGRhdGVSZWNlaXZlZCIsImludGVycG9sYXRlIiwiQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIiwiYW5pbWF0ZSIsImFuaW1hdGlvbiIsIl90aGlzNSIsImhhbmRsZSIsIl9faXNJbnRlcmFjdGlvbiIsIkludGVyYWN0aW9uTWFuYWdlciIsImNyZWF0ZUludGVyYWN0aW9uSGFuZGxlIiwicHJldmlvdXNBbmltYXRpb24iLCJzdGFydCIsInJlc3VsdCIsImNsZWFySW50ZXJhY3Rpb25IYW5kbGUiLCJfdHJhY2tpbmciLCJ0cmFjayIsInRyYWNraW5nIiwiZmx1c2giLCJ1bmRlZmluZWQiLCJfX2NhbGxMaXN0ZW5lcnMiLCJfX2dldE5hdGl2ZUNvbmZpZyIsInR5cGUiLCJkZWJ1Z0lEIiwiX19nZXREZWJ1Z0lEIiwiQW5pbWF0ZWRXaXRoQ2hpbGRyZW4iLCJfdGhpczYiLCJuYXRpdmVUYWciLCJzdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUiLCJzdWJzY3JpcHRpb24iLCJuYXRpdmVFdmVudEVtaXR0ZXIiLCJkYXRhIiwidGFnIiwic3RvcExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUiXSwic291cmNlcyI6WyJBbmltYXRlZFZhbHVlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtFdmVudFN1YnNjcmlwdGlvbn0gZnJvbSAnLi4vLi4vdmVuZG9yL2VtaXR0ZXIvRXZlbnRFbWl0dGVyJztcbmltcG9ydCB0eXBlIHtQbGF0Zm9ybUNvbmZpZ30gZnJvbSAnLi4vQW5pbWF0ZWRQbGF0Zm9ybUNvbmZpZyc7XG5pbXBvcnQgdHlwZSBBbmltYXRpb24gZnJvbSAnLi4vYW5pbWF0aW9ucy9BbmltYXRpb24nO1xuaW1wb3J0IHR5cGUge0VuZENhbGxiYWNrfSBmcm9tICcuLi9hbmltYXRpb25zL0FuaW1hdGlvbic7XG5pbXBvcnQgdHlwZSB7SW50ZXJwb2xhdGlvbkNvbmZpZ1R5cGV9IGZyb20gJy4vQW5pbWF0ZWRJbnRlcnBvbGF0aW9uJztcbmltcG9ydCB0eXBlIEFuaW1hdGVkTm9kZSBmcm9tICcuL0FuaW1hdGVkTm9kZSc7XG5pbXBvcnQgdHlwZSB7QW5pbWF0ZWROb2RlQ29uZmlnfSBmcm9tICcuL0FuaW1hdGVkTm9kZSc7XG5pbXBvcnQgdHlwZSBBbmltYXRlZFRyYWNraW5nIGZyb20gJy4vQW5pbWF0ZWRUcmFja2luZyc7XG5cbmltcG9ydCBOYXRpdmVBbmltYXRlZEhlbHBlciBmcm9tICcuLi8uLi8uLi9zcmMvcHJpdmF0ZS9hbmltYXRlZC9OYXRpdmVBbmltYXRlZEhlbHBlcic7XG5pbXBvcnQgSW50ZXJhY3Rpb25NYW5hZ2VyIGZyb20gJy4uLy4uL0ludGVyYWN0aW9uL0ludGVyYWN0aW9uTWFuYWdlcic7XG5pbXBvcnQgQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIGZyb20gJy4vQW5pbWF0ZWRJbnRlcnBvbGF0aW9uJztcbmltcG9ydCBBbmltYXRlZFdpdGhDaGlsZHJlbiBmcm9tICcuL0FuaW1hdGVkV2l0aENoaWxkcmVuJztcblxuZXhwb3J0IHR5cGUgQW5pbWF0ZWRWYWx1ZUNvbmZpZyA9ICRSZWFkT25seTx7XG4gIC4uLkFuaW1hdGVkTm9kZUNvbmZpZyxcbiAgdXNlTmF0aXZlRHJpdmVyOiBib29sZWFuLFxufT47XG5cbmNvbnN0IE5hdGl2ZUFuaW1hdGVkQVBJID0gTmF0aXZlQW5pbWF0ZWRIZWxwZXIuQVBJO1xuXG4vKipcbiAqIEFuaW1hdGVkIHdvcmtzIGJ5IGJ1aWxkaW5nIGEgZGlyZWN0ZWQgYWN5Y2xpYyBncmFwaCBvZiBkZXBlbmRlbmNpZXNcbiAqIHRyYW5zcGFyZW50bHkgd2hlbiB5b3UgcmVuZGVyIHlvdXIgQW5pbWF0ZWQgY29tcG9uZW50cy5cbiAqXG4gKiAgICAgICAgICAgICAgIG5ldyBBbmltYXRlZC5WYWx1ZSgwKVxuICogICAgIC5pbnRlcnBvbGF0ZSgpICAgICAgICAuaW50ZXJwb2xhdGUoKSAgICBuZXcgQW5pbWF0ZWQuVmFsdWUoMSlcbiAqICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICAgIHRyYW5zbGF0ZVkgICAgICBzY2FsZVxuICogICAgICAgICAgc3R5bGUgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtXG4gKiAgICAgICAgIFZpZXcjMjM0ICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlldyMxMjNcbiAqXG4gKiBBKSBUb3AgRG93biBwaGFzZVxuICogV2hlbiBhbiBBbmltYXRlZC5WYWx1ZSBpcyB1cGRhdGVkLCB3ZSByZWN1cnNpdmVseSBnbyBkb3duIHRocm91Z2ggdGhpc1xuICogZ3JhcGggaW4gb3JkZXIgdG8gZmluZCBsZWFmIG5vZGVzOiB0aGUgdmlld3MgdGhhdCB3ZSBmbGFnIGFzIG5lZWRpbmdcbiAqIGFuIHVwZGF0ZS5cbiAqXG4gKiBCKSBCb3R0b20gVXAgcGhhc2VcbiAqIFdoZW4gYSB2aWV3IGlzIGZsYWdnZWQgYXMgbmVlZGluZyBhbiB1cGRhdGUsIHdlIHJlY3Vyc2l2ZWx5IGdvIGJhY2sgdXBcbiAqIGluIG9yZGVyIHRvIGJ1aWxkIHRoZSBuZXcgdmFsdWUgdGhhdCBpdCBuZWVkcy4gVGhlIHJlYXNvbiB3aHkgd2UgbmVlZFxuICogdGhpcyB0d28tcGhhc2VzIHByb2Nlc3MgaXMgdG8gZGVhbCB3aXRoIGNvbXBvc2l0ZSBwcm9wcyBzdWNoIGFzXG4gKiB0cmFuc2Zvcm0gd2hpY2ggY2FuIHJlY2VpdmUgdmFsdWVzIGZyb20gbXVsdGlwbGUgcGFyZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZsdXNoVmFsdWUocm9vdE5vZGU6IEFuaW1hdGVkTm9kZSk6IHZvaWQge1xuICBjb25zdCBsZWF2ZXMgPSBuZXcgU2V0PHt1cGRhdGU6ICgpID0+IHZvaWQsIC4uLn0+KCk7XG4gIGZ1bmN0aW9uIGZpbmRBbmltYXRlZFN0eWxlcyhub2RlOiBBbmltYXRlZE5vZGUpIHtcbiAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICBpZiAodHlwZW9mIG5vZGUudXBkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBsZWF2ZXMuYWRkKChub2RlOiBhbnkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZS5fX2dldENoaWxkcmVuKCkuZm9yRWFjaChmaW5kQW5pbWF0ZWRTdHlsZXMpO1xuICAgIH1cbiAgfVxuICBmaW5kQW5pbWF0ZWRTdHlsZXMocm9vdE5vZGUpO1xuICBsZWF2ZXMuZm9yRWFjaChsZWFmID0+IGxlYWYudXBkYXRlKCkpO1xufVxuXG4vKipcbiAqIFNvbWUgb3BlcmF0aW9ucyBhcmUgZXhlY3V0ZWQgb25seSBvbiBiYXRjaCBlbmQsIHdoaWNoIGlzIF9tb3N0bHlfIHNjaGVkdWxlZCB3aGVuXG4gKiBBbmltYXRlZCBjb21wb25lbnQgcHJvcHMgY2hhbmdlLiBGb3Igc29tZSBvZiB0aGUgY2hhbmdlcyB3aGljaCByZXF1aXJlIGltbWVkaWF0ZSBleGVjdXRpb25cbiAqIChlLmcuIHNldFZhbHVlKSwgd2UgY3JlYXRlIGEgc2VwYXJhdGUgYmF0Y2ggaW4gY2FzZSBub25lIGlzIHNjaGVkdWxlZC5cbiAqL1xuZnVuY3Rpb24gX2V4ZWN1dGVBc0FuaW1hdGVkQmF0Y2goaWQ6IHN0cmluZywgb3BlcmF0aW9uOiAoKSA9PiB2b2lkKSB7XG4gIE5hdGl2ZUFuaW1hdGVkQVBJLnNldFdhaXRpbmdGb3JJZGVudGlmaWVyKGlkKTtcbiAgb3BlcmF0aW9uKCk7XG4gIE5hdGl2ZUFuaW1hdGVkQVBJLnVuc2V0V2FpdGluZ0ZvcklkZW50aWZpZXIoaWQpO1xufVxuXG4vKipcbiAqIFN0YW5kYXJkIHZhbHVlIGZvciBkcml2aW5nIGFuaW1hdGlvbnMuICBPbmUgYEFuaW1hdGVkLlZhbHVlYCBjYW4gZHJpdmVcbiAqIG11bHRpcGxlIHByb3BlcnRpZXMgaW4gYSBzeW5jaHJvbml6ZWQgZmFzaGlvbiwgYnV0IGNhbiBvbmx5IGJlIGRyaXZlbiBieSBvbmVcbiAqIG1lY2hhbmlzbSBhdCBhIHRpbWUuICBVc2luZyBhIG5ldyBtZWNoYW5pc20gKGUuZy4gc3RhcnRpbmcgYSBuZXcgYW5pbWF0aW9uLFxuICogb3IgY2FsbGluZyBgc2V0VmFsdWVgKSB3aWxsIHN0b3AgYW55IHByZXZpb3VzIG9uZXMuXG4gKlxuICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWR2YWx1ZVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRlZFZhbHVlIGV4dGVuZHMgQW5pbWF0ZWRXaXRoQ2hpbGRyZW4ge1xuICAjbGlzdGVuZXJDb3VudDogbnVtYmVyO1xuICAjdXBkYXRlU3Vic2NyaXB0aW9uOiA/RXZlbnRTdWJzY3JpcHRpb247XG5cbiAgX3ZhbHVlOiBudW1iZXI7XG4gIF9zdGFydGluZ1ZhbHVlOiBudW1iZXI7XG4gIF9vZmZzZXQ6IG51bWJlcjtcbiAgX2FuaW1hdGlvbjogP0FuaW1hdGlvbjtcbiAgX3RyYWNraW5nOiA/QW5pbWF0ZWRUcmFja2luZztcblxuICBjb25zdHJ1Y3Rvcih2YWx1ZTogbnVtYmVyLCBjb25maWc/OiA/QW5pbWF0ZWRWYWx1ZUNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQW5pbWF0ZWRWYWx1ZTogQXR0ZW1wdGluZyB0byBzZXQgdmFsdWUgdG8gdW5kZWZpbmVkJyk7XG4gICAgfVxuXG4gICAgdGhpcy4jbGlzdGVuZXJDb3VudCA9IDA7XG4gICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uID0gbnVsbDtcblxuICAgIHRoaXMuX3N0YXJ0aW5nVmFsdWUgPSB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuX29mZnNldCA9IDA7XG4gICAgdGhpcy5fYW5pbWF0aW9uID0gbnVsbDtcbiAgICBpZiAoY29uZmlnICYmIGNvbmZpZy51c2VOYXRpdmVEcml2ZXIpIHtcbiAgICAgIHRoaXMuX19tYWtlTmF0aXZlKCk7XG4gICAgfVxuICB9XG5cbiAgX19kZXRhY2goKSB7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuZ2V0VmFsdWUodGhpcy5fX2dldE5hdGl2ZVRhZygpLCB2YWx1ZSA9PiB7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWUgLSB0aGlzLl9vZmZzZXQ7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG4gICAgc3VwZXIuX19kZXRhY2goKTtcbiAgfVxuXG4gIF9fZ2V0VmFsdWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWUgKyB0aGlzLl9vZmZzZXQ7XG4gIH1cblxuICBfX21ha2VOYXRpdmUocGxhdGZvcm1Db25maWc6ID9QbGF0Zm9ybUNvbmZpZyk6IHZvaWQge1xuICAgIHN1cGVyLl9fbWFrZU5hdGl2ZShwbGF0Zm9ybUNvbmZpZyk7XG4gICAgaWYgKHRoaXMuI2xpc3RlbmVyQ291bnQgPiAwKSB7XG4gICAgICB0aGlzLiNlbnN1cmVVcGRhdGVTdWJzY3JpcHRpb25FeGlzdHMoKTtcbiAgICB9XG4gIH1cblxuICBhZGRMaXN0ZW5lcihjYWxsYmFjazogKHZhbHVlOiBhbnkpID0+IG1peGVkKTogc3RyaW5nIHtcbiAgICBjb25zdCBpZCA9IHN1cGVyLmFkZExpc3RlbmVyKGNhbGxiYWNrKTtcbiAgICB0aGlzLiNsaXN0ZW5lckNvdW50Kys7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgdGhpcy4jZW5zdXJlVXBkYXRlU3Vic2NyaXB0aW9uRXhpc3RzKCk7XG4gICAgfVxuICAgIHJldHVybiBpZDtcbiAgfVxuXG4gIHJlbW92ZUxpc3RlbmVyKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBzdXBlci5yZW1vdmVMaXN0ZW5lcihpZCk7XG4gICAgdGhpcy4jbGlzdGVuZXJDb3VudC0tO1xuICAgIGlmICh0aGlzLl9faXNOYXRpdmUgJiYgdGhpcy4jbGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uPy5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICByZW1vdmVBbGxMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgc3VwZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgdGhpcy4jbGlzdGVuZXJDb3VudCA9IDA7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uPy5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICAjZW5zdXJlVXBkYXRlU3Vic2NyaXB0aW9uRXhpc3RzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLiN1cGRhdGVTdWJzY3JpcHRpb24gIT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBuYXRpdmVUYWcgPSB0aGlzLl9fZ2V0TmF0aXZlVGFnKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRBUEkuc3RhcnRMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKG5hdGl2ZVRhZyk7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uOiBFdmVudFN1YnNjcmlwdGlvbiA9XG4gICAgICBOYXRpdmVBbmltYXRlZEhlbHBlci5uYXRpdmVFdmVudEVtaXR0ZXIuYWRkTGlzdGVuZXIoXG4gICAgICAgICdvbkFuaW1hdGVkVmFsdWVVcGRhdGUnLFxuICAgICAgICBkYXRhID0+IHtcbiAgICAgICAgICBpZiAoZGF0YS50YWcgPT09IG5hdGl2ZVRhZykge1xuICAgICAgICAgICAgdGhpcy5fX29uQW5pbWF0ZWRWYWx1ZVVwZGF0ZVJlY2VpdmVkKGRhdGEudmFsdWUsIGRhdGEub2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uID0ge1xuICAgICAgcmVtb3ZlOiAoKSA9PiB7XG4gICAgICAgIC8vIE9ubHkgdGhpcyBmdW5jdGlvbiBhc3NpZ25zIHRvIGB0aGlzLiN1cGRhdGVTdWJzY3JpcHRpb25gLlxuICAgICAgICBpZiAodGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnJlbW92ZSgpO1xuICAgICAgICBOYXRpdmVBbmltYXRlZEFQSS5zdG9wTGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZShuYXRpdmVUYWcpO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERpcmVjdGx5IHNldCB0aGUgdmFsdWUuICBUaGlzIHdpbGwgc3RvcCBhbnkgYW5pbWF0aW9ucyBydW5uaW5nIG9uIHRoZSB2YWx1ZVxuICAgKiBhbmQgdXBkYXRlIGFsbCB0aGUgYm91bmQgcHJvcGVydGllcy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWR2YWx1ZSNzZXR2YWx1ZVxuICAgKi9cbiAgc2V0VmFsdWUodmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbmltYXRpb24pIHtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbi5zdG9wKCk7XG4gICAgICB0aGlzLl9hbmltYXRpb24gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVWYWx1ZShcbiAgICAgIHZhbHVlLFxuICAgICAgIXRoaXMuX19pc05hdGl2ZSAvKiBkb24ndCBwZXJmb3JtIGEgZmx1c2ggZm9yIG5hdGl2ZWx5IGRyaXZlbiB2YWx1ZXMgKi8sXG4gICAgKTtcbiAgICBpZiAodGhpcy5fX2lzTmF0aXZlKSB7XG4gICAgICBfZXhlY3V0ZUFzQW5pbWF0ZWRCYXRjaCh0aGlzLl9fZ2V0TmF0aXZlVGFnKCkudG9TdHJpbmcoKSwgKCkgPT5cbiAgICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuc2V0QW5pbWF0ZWROb2RlVmFsdWUodGhpcy5fX2dldE5hdGl2ZVRhZygpLCB2YWx1ZSksXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFuIG9mZnNldCB0aGF0IGlzIGFwcGxpZWQgb24gdG9wIG9mIHdoYXRldmVyIHZhbHVlIGlzIHNldCwgd2hldGhlciB2aWFcbiAgICogYHNldFZhbHVlYCwgYW4gYW5pbWF0aW9uLCBvciBgQW5pbWF0ZWQuZXZlbnRgLiAgVXNlZnVsIGZvciBjb21wZW5zYXRpbmdcbiAgICogdGhpbmdzIGxpa2UgdGhlIHN0YXJ0IG9mIGEgcGFuIGdlc3R1cmUuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkdmFsdWUjc2V0b2Zmc2V0XG4gICAqL1xuICBzZXRPZmZzZXQob2Zmc2V0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9vZmZzZXQgPSBvZmZzZXQ7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuc2V0QW5pbWF0ZWROb2RlT2Zmc2V0KHRoaXMuX19nZXROYXRpdmVUYWcoKSwgb2Zmc2V0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBvZmZzZXQgdmFsdWUgaW50byB0aGUgYmFzZSB2YWx1ZSBhbmQgcmVzZXRzIHRoZSBvZmZzZXQgdG8gemVyby5cbiAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgdmFsdWUgaXMgdW5jaGFuZ2VkLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVlI2ZsYXR0ZW5vZmZzZXRcbiAgICovXG4gIGZsYXR0ZW5PZmZzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fdmFsdWUgKz0gdGhpcy5fb2Zmc2V0O1xuICAgIHRoaXMuX29mZnNldCA9IDA7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuZmxhdHRlbkFuaW1hdGVkTm9kZU9mZnNldCh0aGlzLl9fZ2V0TmF0aXZlVGFnKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBvZmZzZXQgdmFsdWUgdG8gdGhlIGJhc2UgdmFsdWUsIGFuZCByZXNldHMgdGhlIGJhc2UgdmFsdWUgdG8gemVyby5cbiAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgdmFsdWUgaXMgdW5jaGFuZ2VkLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVlI2V4dHJhY3RvZmZzZXRcbiAgICovXG4gIGV4dHJhY3RPZmZzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fb2Zmc2V0ICs9IHRoaXMuX3ZhbHVlO1xuICAgIHRoaXMuX3ZhbHVlID0gMDtcbiAgICBpZiAodGhpcy5fX2lzTmF0aXZlKSB7XG4gICAgICBfZXhlY3V0ZUFzQW5pbWF0ZWRCYXRjaCh0aGlzLl9fZ2V0TmF0aXZlVGFnKCkudG9TdHJpbmcoKSwgKCkgPT5cbiAgICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuZXh0cmFjdEFuaW1hdGVkTm9kZU9mZnNldCh0aGlzLl9fZ2V0TmF0aXZlVGFnKCkpLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcHMgYW55IHJ1bm5pbmcgYW5pbWF0aW9uIG9yIHRyYWNraW5nLiBgY2FsbGJhY2tgIGlzIGludm9rZWQgd2l0aCB0aGVcbiAgICogZmluYWwgdmFsdWUgYWZ0ZXIgc3RvcHBpbmcgdGhlIGFuaW1hdGlvbiwgd2hpY2ggaXMgdXNlZnVsIGZvciB1cGRhdGluZ1xuICAgKiBzdGF0ZSB0byBtYXRjaCB0aGUgYW5pbWF0aW9uIHBvc2l0aW9uIHdpdGggbGF5b3V0LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVlI3N0b3BhbmltYXRpb25cbiAgICovXG4gIHN0b3BBbmltYXRpb24oY2FsbGJhY2s/OiA/KHZhbHVlOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3BUcmFja2luZygpO1xuICAgIHRoaXMuX2FuaW1hdGlvbiAmJiB0aGlzLl9hbmltYXRpb24uc3RvcCgpO1xuICAgIHRoaXMuX2FuaW1hdGlvbiA9IG51bGw7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBpZiAodGhpcy5fX2lzTmF0aXZlKSB7XG4gICAgICAgIE5hdGl2ZUFuaW1hdGVkQVBJLmdldFZhbHVlKHRoaXMuX19nZXROYXRpdmVUYWcoKSwgY2FsbGJhY2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5fX2dldFZhbHVlKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wcyBhbnkgYW5pbWF0aW9uIGFuZCByZXNldHMgdGhlIHZhbHVlIHRvIGl0cyBvcmlnaW5hbC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWR2YWx1ZSNyZXNldGFuaW1hdGlvblxuICAgKi9cbiAgcmVzZXRBbmltYXRpb24oY2FsbGJhY2s/OiA/KHZhbHVlOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3BBbmltYXRpb24oY2FsbGJhY2spO1xuICAgIHRoaXMuX3ZhbHVlID0gdGhpcy5fc3RhcnRpbmdWYWx1ZTtcbiAgICBpZiAodGhpcy5fX2lzTmF0aXZlKSB7XG4gICAgICBOYXRpdmVBbmltYXRlZEFQSS5zZXRBbmltYXRlZE5vZGVWYWx1ZShcbiAgICAgICAgdGhpcy5fX2dldE5hdGl2ZVRhZygpLFxuICAgICAgICB0aGlzLl9zdGFydGluZ1ZhbHVlLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBfX29uQW5pbWF0ZWRWYWx1ZVVwZGF0ZVJlY2VpdmVkKHZhbHVlOiBudW1iZXIsIG9mZnNldD86IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZVZhbHVlKHZhbHVlLCBmYWxzZSAvKmZsdXNoKi8pO1xuICAgIGlmIChvZmZzZXQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fb2Zmc2V0ID0gb2Zmc2V0O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZXMgdGhlIHZhbHVlIGJlZm9yZSB1cGRhdGluZyB0aGUgcHJvcGVydHksIGUuZy4gbWFwcGluZyAwLTEgdG9cbiAgICogMC0xMC5cbiAgICovXG4gIGludGVycG9sYXRlPE91dHB1dFQ6IG51bWJlciB8IHN0cmluZz4oXG4gICAgY29uZmlnOiBJbnRlcnBvbGF0aW9uQ29uZmlnVHlwZTxPdXRwdXRUPixcbiAgKTogQW5pbWF0ZWRJbnRlcnBvbGF0aW9uPE91dHB1dFQ+IHtcbiAgICByZXR1cm4gbmV3IEFuaW1hdGVkSW50ZXJwb2xhdGlvbih0aGlzLCBjb25maWcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGljYWxseSBvbmx5IHVzZWQgaW50ZXJuYWxseSwgYnV0IGNvdWxkIGJlIHVzZWQgYnkgYSBjdXN0b20gQW5pbWF0aW9uXG4gICAqIGNsYXNzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVlI2FuaW1hdGVcbiAgICovXG4gIGFuaW1hdGUoYW5pbWF0aW9uOiBBbmltYXRpb24sIGNhbGxiYWNrOiA/RW5kQ2FsbGJhY2spOiB2b2lkIHtcbiAgICBsZXQgaGFuZGxlID0gbnVsbDtcbiAgICBpZiAoYW5pbWF0aW9uLl9faXNJbnRlcmFjdGlvbikge1xuICAgICAgaGFuZGxlID0gSW50ZXJhY3Rpb25NYW5hZ2VyLmNyZWF0ZUludGVyYWN0aW9uSGFuZGxlKCk7XG4gICAgfVxuICAgIGNvbnN0IHByZXZpb3VzQW5pbWF0aW9uID0gdGhpcy5fYW5pbWF0aW9uO1xuICAgIHRoaXMuX2FuaW1hdGlvbiAmJiB0aGlzLl9hbmltYXRpb24uc3RvcCgpO1xuICAgIHRoaXMuX2FuaW1hdGlvbiA9IGFuaW1hdGlvbjtcbiAgICBhbmltYXRpb24uc3RhcnQoXG4gICAgICB0aGlzLl92YWx1ZSxcbiAgICAgIHZhbHVlID0+IHtcbiAgICAgICAgLy8gTmF0aXZlbHkgZHJpdmVuIGFuaW1hdGlvbnMgd2lsbCBuZXZlciBjYWxsIGludG8gdGhhdCBjYWxsYmFjaywgdGhlcmVmb3JlIHdlIGNhbiBhbHdheXNcbiAgICAgICAgLy8gcGFzcyBmbHVzaCA9IHRydWUgdG8gYWxsb3cgdGhlIHVwZGF0ZWQgdmFsdWUgdG8gcHJvcGFnYXRlIHRvIG5hdGl2ZSB3aXRoIHNldE5hdGl2ZVByb3BzXG4gICAgICAgIHRoaXMuX3VwZGF0ZVZhbHVlKHZhbHVlLCB0cnVlIC8qIGZsdXNoICovKTtcbiAgICAgIH0sXG4gICAgICByZXN1bHQgPT4ge1xuICAgICAgICB0aGlzLl9hbmltYXRpb24gPSBudWxsO1xuICAgICAgICBpZiAoaGFuZGxlICE9PSBudWxsKSB7XG4gICAgICAgICAgSW50ZXJhY3Rpb25NYW5hZ2VyLmNsZWFySW50ZXJhY3Rpb25IYW5kbGUoaGFuZGxlKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXN1bHQpO1xuICAgICAgfSxcbiAgICAgIHByZXZpb3VzQW5pbWF0aW9uLFxuICAgICAgdGhpcyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGljYWxseSBvbmx5IHVzZWQgaW50ZXJuYWxseS5cbiAgICovXG4gIHN0b3BUcmFja2luZygpOiB2b2lkIHtcbiAgICB0aGlzLl90cmFja2luZyAmJiB0aGlzLl90cmFja2luZy5fX2RldGFjaCgpO1xuICAgIHRoaXMuX3RyYWNraW5nID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUeXBpY2FsbHkgb25seSB1c2VkIGludGVybmFsbHkuXG4gICAqL1xuICB0cmFjayh0cmFja2luZzogQW5pbWF0ZWRUcmFja2luZyk6IHZvaWQge1xuICAgIHRoaXMuc3RvcFRyYWNraW5nKCk7XG4gICAgdGhpcy5fdHJhY2tpbmcgPSB0cmFja2luZztcbiAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgdHJhY2tpbmcgYW5pbWF0aW9uIHN0YXJ0cyBleGVjdXRpbmdcbiAgICB0aGlzLl90cmFja2luZyAmJiB0aGlzLl90cmFja2luZy51cGRhdGUoKTtcbiAgfVxuXG4gIF91cGRhdGVWYWx1ZSh2YWx1ZTogbnVtYmVyLCBmbHVzaDogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FuaW1hdGVkVmFsdWU6IEF0dGVtcHRpbmcgdG8gc2V0IHZhbHVlIHRvIHVuZGVmaW5lZCcpO1xuICAgIH1cblxuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgaWYgKGZsdXNoKSB7XG4gICAgICBmbHVzaFZhbHVlKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLl9fY2FsbExpc3RlbmVycyh0aGlzLl9fZ2V0VmFsdWUoKSk7XG4gIH1cblxuICBfX2dldE5hdGl2ZUNvbmZpZygpOiBPYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgdmFsdWU6IHRoaXMuX3ZhbHVlLFxuICAgICAgb2Zmc2V0OiB0aGlzLl9vZmZzZXQsXG4gICAgICBkZWJ1Z0lEOiB0aGlzLl9fZ2V0RGVidWdJRCgpLFxuICAgIH07XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFtQkEsSUFBQUEscUJBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLG1CQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxzQkFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsc0JBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUEwRCxTQUFBSSxXQUFBQyxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSxXQUFBRCxDQUFBLE9BQUFFLGdCQUFBLENBQUFDLE9BQUEsRUFBQUgsQ0FBQSxPQUFBSSwyQkFBQSxDQUFBRCxPQUFBLEVBQUFKLENBQUEsRUFBQU0seUJBQUEsS0FBQUMsT0FBQSxDQUFBQyxTQUFBLENBQUFQLENBQUEsRUFBQUMsQ0FBQSxZQUFBQyxnQkFBQSxDQUFBQyxPQUFBLEVBQUFKLENBQUEsRUFBQVMsV0FBQSxJQUFBUixDQUFBLENBQUFTLEtBQUEsQ0FBQVYsQ0FBQSxFQUFBRSxDQUFB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