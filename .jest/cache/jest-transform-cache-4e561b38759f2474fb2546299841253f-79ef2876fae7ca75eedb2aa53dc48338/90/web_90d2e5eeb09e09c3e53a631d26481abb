fc160cedd00a451ab0f46869e226c95c
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.camera = camera;
exports.imageLibrary = imageLibrary;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var DEFAULT_OPTIONS = {
  mediaType: 'photo',
  includeBase64: false,
  selectionLimit: 1
};
function camera() {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_OPTIONS;
  var callback = arguments.length > 1 ? arguments[1] : undefined;
  if (options.mediaType !== 'photo') {
    var result = {
      errorCode: 'others',
      errorMessage: 'For now, only photo mediaType is supported for web'
    };
    if (callback) callback(result);
    return Promise.resolve(result);
  }
  var container = document.createElement('div');
  var wrapper = document.createElement('div');
  var content = document.createElement('div');
  var buttons = document.createElement('div');
  var btnCapture = document.createElement('button');
  var btnBack = document.createElement('button');
  var btnSave = document.createElement('button');
  var btnCancel = document.createElement('button');
  var video = document.createElement('video');
  var canvas = document.createElement('canvas');
  var currentMediaStream = null;
  navigator.mediaDevices.getUserMedia({
    audio: false,
    video: true
  }).then(function (stream) {
    currentMediaStream = stream;
    video.srcObject = stream;
    video.play();
  }).catch(function (err) {
    console.log(err);
  });
  var isAlreadyUsingFontAwesome = !!document.getElementsByClassName('fa').length;
  if (!isAlreadyUsingFontAwesome) {
    var isAlreadyInjectedFontAwesome = !!document.getElementById('injected-font-awesome');
    if (!isAlreadyInjectedFontAwesome) {
      var head = document.getElementsByTagName('HEAD')[0];
      var link = document.createElement('link');
      link.id = 'injected-font-awesome';
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css';
      head.appendChild(link);
    }
  }
  container.style.cssText = `    
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
  `;
  wrapper.style.cssText = `
    position: relative;
    min-height: min(480px, 100vh);
    min-width: min(640px, 100vw);
    border-radius: 8px 8px 0 0;
    background-color: #333333;
  `;
  video.style.cssText = canvas.style.cssText = `
    position: absolute;
    top: 0;
    left: 0;
    border-radius: 8px 8px 0 0;
  `;
  content.style.cssText = `
    display: flex;
    flex-direction: column;
    margin: auto;
  `;
  buttons.style.cssText = `
    display: flex;
    align-items: center;
    justify-content: space-evenly;
    min-height: 60px;
    background-color: #333333;
    border-radius: 0 0 8px 8px;  
  `;
  btnCapture.innerHTML = '<i class="fa fa-2x fa-camera"></i>';
  btnBack.innerHTML = '<i class="fa fa-2x fa-undo"></i>';
  btnSave.innerHTML = '<i class="fa fa-2x fa-check"></i>';
  btnCancel.innerHTML = '<i class="fa fa-2x fa-close"></i>';
  btnCapture.style.cssText = btnBack.style.cssText = btnSave.style.cssText = btnCancel.style.cssText = `
    padding: 10px;
    color: #f2f2f2;
    border: 0;
    background: transparent;
  `;
  wrapper.append(video);
  wrapper.append(canvas);
  content.append(wrapper);
  content.append(buttons);
  container.append(content);
  document.body.appendChild(container);
  var hasPhoto = false;
  var handleButtons = function handleButtons() {
    buttons.innerHTML = '';
    if (hasPhoto) {
      buttons.append(btnBack);
      buttons.append(btnSave);
    } else {
      buttons.append(btnCapture);
    }
    buttons.append(btnCancel);
  };
  handleButtons();
  function stopCamera() {
    document.body.removeChild(container);
    if (!currentMediaStream) return;
    currentMediaStream.getTracks().forEach(function (track) {
      track.stop();
    });
    video.srcObject = null;
    currentMediaStream = null;
  }
  return new Promise(function (resolve) {
    btnCapture.addEventListener('click', (0, _asyncToGenerator2.default)(function* () {
      var _canvas$getContext;
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      (_canvas$getContext = canvas.getContext('2d')) == null || _canvas$getContext.drawImage(video, 0, 0, canvas.width, canvas.height);
      hasPhoto = true;
      handleButtons();
    }));
    btnBack.addEventListener('click', function () {
      var _canvas$getContext2;
      (_canvas$getContext2 = canvas.getContext('2d')) == null || _canvas$getContext2.clearRect(0, 0, canvas.width, canvas.height);
      hasPhoto = false;
      handleButtons();
    });
    btnSave.addEventListener('click', (0, _asyncToGenerator2.default)(function* () {
      var uri = canvas.toDataURL('image/png');
      var asset = {
        uri: uri
      };
      var result = {
        assets: [asset]
      };
      if (callback) callback(result);
      resolve(result);
      stopCamera();
    }));
    btnCancel.addEventListener('click', (0, _asyncToGenerator2.default)(function* () {
      var result = {
        assets: [],
        didCancel: true
      };
      if (callback) callback(result);
      resolve(result);
      stopCamera();
    }));
  });
}
function imageLibrary() {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_OPTIONS;
  var callback = arguments.length > 1 ? arguments[1] : undefined;
  if (options.mediaType !== 'photo') {
    var result = {
      errorCode: 'others',
      errorMessage: 'For now, only photo mediaType is supported for web'
    };
    if (callback) callback(result);
    return Promise.resolve(result);
  }
  var input = document.createElement('input');
  input.style.display = 'none';
  input.setAttribute('type', 'file');
  input.setAttribute('accept', getWebMediaType(options.mediaType));
  if (options.selectionLimit > 1) {
    input.setAttribute('multiple', 'multiple');
  }
  document.body.appendChild(input);
  return new Promise(function (resolve) {
    var inputChangeHandler = function () {
      var _ref4 = (0, _asyncToGenerator2.default)(function* () {
        if (input.files) {
          if (options.selectionLimit <= 1) {
            var img = yield readFile(input.files[0], {
              includeBase64: options.includeBase64
            });
            var _result = {
              assets: [img]
            };
            if (callback) callback(_result);
            resolve(_result);
          } else {
            var imgs = yield Promise.all(Array.from(input.files).map(function (file) {
              return readFile(file, {
                includeBase64: options.includeBase64
              });
            }));
            var _result2 = {
              didCancel: false,
              assets: imgs
            };
            if (callback) callback(_result2);
            resolve(_result2);
          }
        }
        cleanup();
      });
      return function inputChangeHandler() {
        return _ref4.apply(this, arguments);
      };
    }();
    var inputCancelHandler = function () {
      var _ref5 = (0, _asyncToGenerator2.default)(function* () {
        resolve({
          didCancel: true
        });
        cleanup();
      });
      return function inputCancelHandler() {
        return _ref5.apply(this, arguments);
      };
    }();
    var cleanup = function cleanup() {
      input.removeEventListener('change', inputChangeHandler);
      input.removeEventListener('cancel', inputCancelHandler);
      document.body.removeChild(input);
    };
    input.addEventListener('change', inputChangeHandler);
    input.addEventListener('cancel', inputCancelHandler);
    var event = new MouseEvent('click');
    input.dispatchEvent(event);
  });
}
function readFile(targetFile, options) {
  return new Promise(function (resolve, reject) {
    var reader = new FileReader();
    reader.onerror = function () {
      reject(new Error(`Failed to read the selected media because the operation failed.`));
    };
    reader.onload = function (_ref6) {
      var target = _ref6.target;
      var uri = target == null ? void 0 : target.result;
      var returnRaw = function returnRaw() {
        return resolve({
          uri: uri,
          width: 0,
          height: 0
        });
      };
      if (typeof uri === 'string') {
        var image = new Image();
        image.src = uri;
        image.onload = function () {
          var _image$naturalWidth, _image$naturalHeight;
          return resolve(Object.assign({
            uri: uri,
            width: (_image$naturalWidth = image.naturalWidth) != null ? _image$naturalWidth : image.width,
            height: (_image$naturalHeight = image.naturalHeight) != null ? _image$naturalHeight : image.height
          }, options.includeBase64 && {
            base64: uri.substr(uri.indexOf(',') + 1)
          }));
        };
        image.onerror = function () {
          return returnRaw();
        };
      } else {
        returnRaw();
      }
    };
    reader.readAsDataURL(targetFile);
  });
}
function getWebMediaType(mediaType) {
  var _webMediaTypes$mediaT;
  var webMediaTypes = {
    photo: 'image/*',
    video: 'video/*',
    mixed: 'image/*,video/*'
  };
  return (_webMediaTypes$mediaT = webMediaTypes[mediaType]) != null ? _webMediaTypes$mediaT : webMediaTypes.photo;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJERUZBVUxUX09QVElPTlMiLCJtZWRpYVR5cGUiLCJpbmNsdWRlQmFzZTY0Iiwic2VsZWN0aW9uTGltaXQiLCJjYW1lcmEiLCJvcHRpb25zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2FsbGJhY2siLCJyZXN1bHQiLCJlcnJvckNvZGUiLCJlcnJvck1lc3NhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIndyYXBwZXIiLCJjb250ZW50IiwiYnV0dG9ucyIsImJ0bkNhcHR1cmUiLCJidG5CYWNrIiwiYnRuU2F2ZSIsImJ0bkNhbmNlbCIsInZpZGVvIiwiY2FudmFzIiwiY3VycmVudE1lZGlhU3RyZWFtIiwibmF2aWdhdG9yIiwibWVkaWFEZXZpY2VzIiwiZ2V0VXNlck1lZGlhIiwiYXVkaW8iLCJ0aGVuIiwic3RyZWFtIiwic3JjT2JqZWN0IiwicGxheSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImlzQWxyZWFkeVVzaW5nRm9udEF3ZXNvbWUiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaXNBbHJlYWR5SW5qZWN0ZWRGb250QXdlc29tZSIsImdldEVsZW1lbnRCeUlkIiwiaGVhZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGluayIsImlkIiwicmVsIiwidHlwZSIsImhyZWYiLCJhcHBlbmRDaGlsZCIsInN0eWxlIiwiY3NzVGV4dCIsImlubmVySFRNTCIsImFwcGVuZCIsImJvZHkiLCJoYXNQaG90byIsImhhbmRsZUJ1dHRvbnMiLCJzdG9wQ2FtZXJhIiwicmVtb3ZlQ2hpbGQiLCJnZXRUcmFja3MiLCJmb3JFYWNoIiwidHJhY2siLCJzdG9wIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9hc3luY1RvR2VuZXJhdG9yMiIsImRlZmF1bHQiLCJfY2FudmFzJGdldENvbnRleHQiLCJ3aWR0aCIsInZpZGVvV2lkdGgiLCJoZWlnaHQiLCJ2aWRlb0hlaWdodCIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJfY2FudmFzJGdldENvbnRleHQyIiwiY2xlYXJSZWN0IiwidXJpIiwidG9EYXRhVVJMIiwiYXNzZXQiLCJhc3NldHMiLCJkaWRDYW5jZWwiLCJpbWFnZUxpYnJhcnkiLCJpbnB1dCIsImRpc3BsYXkiLCJzZXRBdHRyaWJ1dGUiLCJnZXRXZWJNZWRpYVR5cGUiLCJpbnB1dENoYW5nZUhhbmRsZXIiLCJfcmVmNCIsImZpbGVzIiwiaW1nIiwicmVhZEZpbGUiLCJpbWdzIiwiYWxsIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwiZmlsZSIsImNsZWFudXAiLCJhcHBseSIsImlucHV0Q2FuY2VsSGFuZGxlciIsIl9yZWY1IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiTW91c2VFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJ0YXJnZXRGaWxlIiwicmVqZWN0IiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9uZXJyb3IiLCJFcnJvciIsIm9ubG9hZCIsIl9yZWY2IiwidGFyZ2V0IiwicmV0dXJuUmF3IiwiaW1hZ2UiLCJJbWFnZSIsInNyYyIsIl9pbWFnZSRuYXR1cmFsV2lkdGgiLCJfaW1hZ2UkbmF0dXJhbEhlaWdodCIsIk9iamVjdCIsImFzc2lnbiIsIm5hdHVyYWxXaWR0aCIsIm5hdHVyYWxIZWlnaHQiLCJiYXNlNjQiLCJzdWJzdHIiLCJpbmRleE9mIiwicmVhZEFzRGF0YVVSTCIsIl93ZWJNZWRpYVR5cGVzJG1lZGlhVCIsIndlYk1lZGlhVHlwZXMiLCJwaG90byIsIm1peGVkIl0sInNvdXJjZXMiOlsid2ViLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENhbWVyYU9wdGlvbnMsXG4gIEltYWdlTGlicmFyeU9wdGlvbnMsXG4gIENhbGxiYWNrLFxuICBJbWFnZVBpY2tlclJlc3BvbnNlLFxuICBFcnJvckNvZGUsXG4gIEFzc2V0LFxuICBNZWRpYVR5cGUsXG59IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgREVGQVVMVF9PUFRJT05TOiBQaWNrPFxuICBJbWFnZUxpYnJhcnlPcHRpb25zICYgQ2FtZXJhT3B0aW9ucyxcbiAgJ21lZGlhVHlwZScgfCAnaW5jbHVkZUJhc2U2NCcgfCAnc2VsZWN0aW9uTGltaXQnXG4+ID0ge1xuICBtZWRpYVR5cGU6ICdwaG90bycsXG4gIGluY2x1ZGVCYXNlNjQ6IGZhbHNlLFxuICBzZWxlY3Rpb25MaW1pdDogMSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjYW1lcmEoXG4gIG9wdGlvbnM6IENhbWVyYU9wdGlvbnMgPSBERUZBVUxUX09QVElPTlMsXG4gIGNhbGxiYWNrPzogQ2FsbGJhY2ssXG4pOiBQcm9taXNlPEltYWdlUGlja2VyUmVzcG9uc2U+IHtcbiAgaWYgKG9wdGlvbnMubWVkaWFUeXBlICE9PSAncGhvdG8nKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgZXJyb3JDb2RlOiAnb3RoZXJzJyBhcyBFcnJvckNvZGUsXG4gICAgICBlcnJvck1lc3NhZ2U6ICdGb3Igbm93LCBvbmx5IHBob3RvIG1lZGlhVHlwZSBpcyBzdXBwb3J0ZWQgZm9yIHdlYicsXG4gICAgfVxuXG4gICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhyZXN1bHQpO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICB9XG5cbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnN0IGJ0bkNhcHR1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgY29uc3QgYnRuQmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBjb25zdCBidG5TYXZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIGNvbnN0IGJ0bkNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXG4gIGxldCBjdXJyZW50TWVkaWFTdHJlYW06IE1lZGlhU3RyZWFtIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gaW5pdCB2aWRlb1xuICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IGF1ZGlvOiBmYWxzZSwgdmlkZW86IHRydWUgfSlcbiAgICAudGhlbihzdHJlYW0gPT4ge1xuICAgICAgY3VycmVudE1lZGlhU3RyZWFtID0gc3RyZWFtO1xuICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgICAgdmlkZW8ucGxheSgpO1xuICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG5cbiAgY29uc3QgaXNBbHJlYWR5VXNpbmdGb250QXdlc29tZSA9ICEhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZmEnKS5sZW5ndGg7XG5cbiAgaWYgKCFpc0FscmVhZHlVc2luZ0ZvbnRBd2Vzb21lKSB7XG4gICAgY29uc3QgaXNBbHJlYWR5SW5qZWN0ZWRGb250QXdlc29tZSA9ICEhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luamVjdGVkLWZvbnQtYXdlc29tZScpO1xuICAgIGlmICghaXNBbHJlYWR5SW5qZWN0ZWRGb250QXdlc29tZSkgeyBcbiAgICAgIC8vIGluamVjdCBmb250LWF3ZXNvbWVcbiAgICAgIGNvbnN0IGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnSEVBRCcpWzBdO1xuICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICAgIGxpbmsuaWQgPSAnaW5qZWN0ZWQtZm9udC1hd2Vzb21lJztcbiAgICAgIGxpbmsucmVsID0gJ3N0eWxlc2hlZXQnO1xuICAgICAgbGluay50eXBlID0gJ3RleHQvY3NzJztcbiAgICAgIGxpbmsuaHJlZiA9ICdodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNC43LjAvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzJztcbiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgfVxuICB9XG5cbiAgY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBgICAgIFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjkpO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYDtcbiAgXG4gIHdyYXBwZXIuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgbWluLWhlaWdodDogbWluKDQ4MHB4LCAxMDB2aCk7XG4gICAgbWluLXdpZHRoOiBtaW4oNjQwcHgsIDEwMHZ3KTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHggOHB4IDAgMDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xuICBgO1xuXG4gIHZpZGVvLnN0eWxlLmNzc1RleHQgPSBcbiAgY2FudmFzLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweCA4cHggMCAwO1xuICBgO1xuXG4gIGNvbnRlbnQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWFyZ2luOiBhdXRvO1xuICBgO1xuXG4gIGJ1dHRvbnMuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7XG4gICAgbWluLWhlaWdodDogNjBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xuICAgIGJvcmRlci1yYWRpdXM6IDAgMCA4cHggOHB4OyAgXG4gIGA7XG4gXG4gIGJ0bkNhcHR1cmUuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtMnggZmEtY2FtZXJhXCI+PC9pPic7XG4gIC8vIGJ0bkNhcHR1cmUudGl0bGUgPSAnQ2FwdHVyZSc7XG4gIGJ0bkJhY2suaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtMnggZmEtdW5kb1wiPjwvaT4nO1xuICAvLyBidG5CYWNrLnRpdGxlID0gJ0JhY2snO1xuICBidG5TYXZlLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLTJ4IGZhLWNoZWNrXCI+PC9pPic7XG4gIC8vIGJ0blNhdmUudGl0bGUgPSAnQXBwbHknO1xuICBidG5DYW5jZWwuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwiZmEgZmEtMnggZmEtY2xvc2VcIj48L2k+JztcbiAgLy8gYnRuQ2FuY2VsLnRpdGxlID0gJ0NhbmNlbCc7XG5cbiAgYnRuQ2FwdHVyZS5zdHlsZS5jc3NUZXh0ID1cbiAgYnRuQmFjay5zdHlsZS5jc3NUZXh0ID1cbiAgYnRuU2F2ZS5zdHlsZS5jc3NUZXh0ID1cbiAgYnRuQ2FuY2VsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgcGFkZGluZzogMTBweDtcbiAgICBjb2xvcjogI2YyZjJmMjtcbiAgICBib3JkZXI6IDA7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGA7XG5cbiAgd3JhcHBlci5hcHBlbmQodmlkZW8pO1xuICB3cmFwcGVyLmFwcGVuZChjYW52YXMpO1xuICBjb250ZW50LmFwcGVuZCh3cmFwcGVyKTtcbiAgY29udGVudC5hcHBlbmQoYnV0dG9ucyk7XG4gIGNvbnRhaW5lci5hcHBlbmQoY29udGVudCk7XG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXG4gIGxldCBoYXNQaG90byA9IGZhbHNlO1xuXG4gIGNvbnN0IGhhbmRsZUJ1dHRvbnMgPSAoKSA9PiB7XG4gICAgYnV0dG9ucy5pbm5lckhUTUwgPSAnJztcbiAgICBpZiAoaGFzUGhvdG8pIHtcbiAgICAgIGJ1dHRvbnMuYXBwZW5kKGJ0bkJhY2spO1xuICAgICAgYnV0dG9ucy5hcHBlbmQoYnRuU2F2ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvbnMuYXBwZW5kKGJ0bkNhcHR1cmUpO1xuICAgIH1cbiAgICBidXR0b25zLmFwcGVuZChidG5DYW5jZWwpO1xuICB9XG5cbiAgaGFuZGxlQnV0dG9ucygpO1xuXG4gIGZ1bmN0aW9uIHN0b3BDYW1lcmEoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChjb250YWluZXIpO1xuXG4gICAgaWYgKCFjdXJyZW50TWVkaWFTdHJlYW0pIHJldHVybjtcbiAgXG4gICAgY3VycmVudE1lZGlhU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICB0cmFjay5zdG9wKCk7XG4gICAgfSk7XG4gICAgdmlkZW8uc3JjT2JqZWN0ID0gbnVsbDtcbiAgICBjdXJyZW50TWVkaWFTdHJlYW0gPSBudWxsO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgYnRuQ2FwdHVyZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHZpZGVvLnZpZGVvV2lkdGg7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gdmlkZW8udmlkZW9IZWlnaHQ7XG4gICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKT8uZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgaGFzUGhvdG8gPSB0cnVlO1xuICAgICAgaGFuZGxlQnV0dG9ucygpO1xuICAgIH0pXG5cbiAgICBidG5CYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY2FudmFzLmdldENvbnRleHQoJzJkJyk/LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgaGFzUGhvdG8gPSBmYWxzZTtcbiAgICAgIGhhbmRsZUJ1dHRvbnMoKTtcbiAgICB9KVxuXG4gICAgYnRuU2F2ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVyaSA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuICAgICAgY29uc3QgYXNzZXQ6IEFzc2V0ID0geyB1cmkgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHthc3NldHM6IFthc3NldF19O1xuXG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICByZXNvbHZlKHJlc3VsdCk7XG5cbiAgICAgIHN0b3BDYW1lcmEoKTtcbiAgICB9KVxuICAgIFxuICAgIGJ0bkNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgYXNzZXRzOiBbXSxcbiAgICAgICAgZGlkQ2FuY2VsOiB0cnVlLFxuICAgICAgfVxuXG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICByZXNvbHZlKHJlc3VsdCk7XG5cbiAgICAgIHN0b3BDYW1lcmEoKTtcbiAgICB9KVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW1hZ2VMaWJyYXJ5KFxuICBvcHRpb25zOiBJbWFnZUxpYnJhcnlPcHRpb25zID0gREVGQVVMVF9PUFRJT05TLFxuICBjYWxsYmFjaz86IENhbGxiYWNrLFxuKTogUHJvbWlzZTxJbWFnZVBpY2tlclJlc3BvbnNlPiB7XG4gIC8vIE9ubHkgc3VwcG9ydGluZyAncGhvdG8nIG1lZGlhVHlwZSBmb3Igbm93LlxuICBpZiAob3B0aW9ucy5tZWRpYVR5cGUgIT09ICdwaG90bycpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBlcnJvckNvZGU6ICdvdGhlcnMnIGFzIEVycm9yQ29kZSxcbiAgICAgIGVycm9yTWVzc2FnZTogJ0ZvciBub3csIG9ubHkgcGhvdG8gbWVkaWFUeXBlIGlzIHN1cHBvcnRlZCBmb3Igd2ViJyxcbiAgICB9O1xuXG4gICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhyZXN1bHQpO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICB9XG5cbiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBpbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZmlsZScpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2FjY2VwdCcsIGdldFdlYk1lZGlhVHlwZShvcHRpb25zLm1lZGlhVHlwZSkpO1xuXG4gIGlmIChvcHRpb25zLnNlbGVjdGlvbkxpbWl0ISA+IDEpIHtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ211bHRpcGxlJywgJ211bHRpcGxlJyk7XG4gIH1cblxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlucHV0KTtcblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBpbnB1dENoYW5nZUhhbmRsZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoaW5wdXQuZmlsZXMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuc2VsZWN0aW9uTGltaXQhIDw9IDEpIHtcbiAgICAgICAgICBjb25zdCBpbWcgPSBhd2FpdCByZWFkRmlsZShpbnB1dC5maWxlc1swXSwge1xuICAgICAgICAgICAgaW5jbHVkZUJhc2U2NDogb3B0aW9ucy5pbmNsdWRlQmFzZTY0LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0ge2Fzc2V0czogW2ltZ119O1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhyZXN1bHQpO1xuXG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGltZ3MgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIEFycmF5LmZyb20oaW5wdXQuZmlsZXMpLm1hcCgoZmlsZSkgPT5cbiAgICAgICAgICAgICAgcmVhZEZpbGUoZmlsZSwge2luY2x1ZGVCYXNlNjQ6IG9wdGlvbnMuaW5jbHVkZUJhc2U2NH0pLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZGlkQ2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgIGFzc2V0czogaW1ncyxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhyZXN1bHQpO1xuXG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGlucHV0Q2FuY2VsSGFuZGxlciA9IGFzeW5jICgpID0+IHtcbiAgICAgIHJlc29sdmUoe2RpZENhbmNlbDogdHJ1ZX0pO1xuICAgICAgY2xlYW51cCgpO1xuICAgIH07XG5cbiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaW5wdXRDaGFuZ2VIYW5kbGVyKTtcbiAgICAgIGlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbmNlbCcsIGlucHV0Q2FuY2VsSGFuZGxlcik7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlucHV0KTtcbiAgICB9O1xuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaW5wdXRDaGFuZ2VIYW5kbGVyKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjYW5jZWwnLCBpbnB1dENhbmNlbEhhbmRsZXIpO1xuXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snKTtcbiAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRGaWxlKFxuICB0YXJnZXRGaWxlOiBCbG9iLFxuICBvcHRpb25zOiBQYXJ0aWFsPEltYWdlTGlicmFyeU9wdGlvbnM+LFxuKTogUHJvbWlzZTxBc3NldD4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICByZWplY3QoXG4gICAgICAgIG5ldyBFcnJvcihcbiAgICAgICAgICBgRmFpbGVkIHRvIHJlYWQgdGhlIHNlbGVjdGVkIG1lZGlhIGJlY2F1c2UgdGhlIG9wZXJhdGlvbiBmYWlsZWQuYCxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfTtcbiAgICByZWFkZXIub25sb2FkID0gKHt0YXJnZXR9KSA9PiB7XG4gICAgICBjb25zdCB1cmkgPSB0YXJnZXQ/LnJlc3VsdDtcblxuICAgICAgY29uc3QgcmV0dXJuUmF3ID0gKCkgPT5cbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgdXJpOiB1cmkgYXMgc3RyaW5nLFxuICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmICh0eXBlb2YgdXJpID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWFnZS5zcmMgPSB1cmk7XG4gICAgICAgIGltYWdlLm9ubG9hZCA9ICgpID0+XG4gICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICB1cmksXG4gICAgICAgICAgICB3aWR0aDogaW1hZ2UubmF0dXJhbFdpZHRoID8/IGltYWdlLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBpbWFnZS5uYXR1cmFsSGVpZ2h0ID8/IGltYWdlLmhlaWdodCxcbiAgICAgICAgICAgIC8vIFRoZSBibG9iJ3MgcmVzdWx0IGNhbm5vdCBiZSBkaXJlY3RseSBkZWNvZGVkIGFzIEJhc2U2NCB3aXRob3V0XG4gICAgICAgICAgICAvLyBmaXJzdCByZW1vdmluZyB0aGUgRGF0YS1VUkwgZGVjbGFyYXRpb24gcHJlY2VkaW5nIHRoZVxuICAgICAgICAgICAgLy8gQmFzZTY0LWVuY29kZWQgZGF0YS4gVG8gcmV0cmlldmUgb25seSB0aGUgQmFzZTY0IGVuY29kZWQgc3RyaW5nLFxuICAgICAgICAgICAgLy8gZmlyc3QgcmVtb3ZlIGRhdGE6Ki8qO2Jhc2U2NCwgZnJvbSB0aGUgcmVzdWx0LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ZpbGVSZWFkZXIvcmVhZEFzRGF0YVVSTFxuICAgICAgICAgICAgLi4uKG9wdGlvbnMuaW5jbHVkZUJhc2U2NCAmJiB7XG4gICAgICAgICAgICAgIGJhc2U2NDogdXJpLnN1YnN0cih1cmkuaW5kZXhPZignLCcpICsgMSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgaW1hZ2Uub25lcnJvciA9ICgpID0+IHJldHVyblJhdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuUmF3KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKHRhcmdldEZpbGUpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0V2ViTWVkaWFUeXBlKG1lZGlhVHlwZTogTWVkaWFUeXBlKSB7XG4gIGNvbnN0IHdlYk1lZGlhVHlwZXMgPSB7XG4gICAgcGhvdG86ICdpbWFnZS8qJyxcbiAgICB2aWRlbzogJ3ZpZGVvLyonLFxuICAgIG1peGVkOiAnaW1hZ2UvKix2aWRlby8qJyxcbiAgfTtcblxuICByZXR1cm4gd2ViTWVkaWFUeXBlc1ttZWRpYVR5cGVdID8/IHdlYk1lZGlhVHlwZXMucGhvdG87XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFVQSxJQUFNQSxlQUdMLEdBQUc7RUFDRkMsU0FBUyxFQUFFLE9BQU87RUFDbEJDLGFBQWEsRUFBRSxLQUFLO0VBQ3BCQyxjQUFjLEVBQUU7QUFDbEIsQ0FBQztBQUVNLFNBQVNDLE1BQU1BLENBQUEsRUFHVTtFQUFBLElBRjlCQyxPQUFzQixHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBR04sZUFBZTtFQUFBLElBQ3hDUyxRQUFtQixHQUFBSCxTQUFBLENBQUFDLE1BQUEsT0FBQUQsU0FBQSxNQUFBRSxTQUFBO0VBRW5CLElBQUlILE9BQU8sQ0FBQ0osU0FBUyxLQUFLLE9BQU8sRUFBRTtJQUNqQyxJQUFNUyxNQUFNLEdBQUc7TUFDYkMsU0FBUyxFQUFFLFFBQXFCO01BQ2hDQyxZQUFZLEVBQUU7SUFDaEIsQ0FBQztJQUVELElBQUlILFFBQVEsRUFBRUEsUUFBUSxDQUFDQyxNQUFNLENBQUM7SUFFOUIsT0FBT0csT0FBTyxDQUFDQyxPQUFPLENBQUNKLE1BQU0sQ0FBQztFQUNoQztFQUVBLElBQU1LLFNBQVMsR0FBR0MsUUFBUSxDQUFDQyxhQUFhLENBQUMsS0FBSyxDQUFDO0VBQy9DLElBQU1DLE9BQU8sR0FBR0YsUUFBUSxDQUFDQyxhQUFhLENBQUMsS0FBSyxDQUFDO0VBQzdDLElBQU1FLE9BQU8sR0FBR0gsUUFBUSxDQUFDQyxhQUFhLENBQUMsS0FBSyxDQUFD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