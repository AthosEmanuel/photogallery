{"version":3,"names":["_getJestObj","mock","getItem","jest","fn","Promise","resolve","setItem","CameraComponent","_ref","onPhotoTaken","onClose","setTimeout","latitude","longitude","_interopRequireDefault","require","_asyncToGenerator2","_reactNative","_react","_interopRequireWildcard","_asyncStorage","_native","_Home","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_require","describe","beforeEach","clearAllMocks","it","_render","render","jsx","NavigationContainer","children","getByPlaceholderText","getByTestId","expect","toBeTruthy","_render2","themeButton","fireEvent","press","_render3","cameraButton","act","waitFor","AsyncStorage","toHaveBeenCalledTimes","toHaveBeenCalledWith","stringContaining","_render4","queryAllByRole","photos","uri","date","JSON","stringify","changeText","filtered","filter","p","toLowerCase","includes","toHaveLength","toBe","mockNavigate","mockPhotos","_render5","updatedPhotos"],"sources":["HomeScreen.test.tsx"],"sourcesContent":["import { fireEvent, render, waitFor } from '@testing-library/react-native';\nimport React, { act } from 'react';\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { NavigationContainer } from '@react-navigation/native';\nimport HomeScreen from '../src/screen/Home';\n\n// Mock do AsyncStorage\njest.mock('@react-native-async-storage/async-storage', () => ({\n  getItem: jest.fn(() => Promise.resolve(null)),\n  setItem: jest.fn(() => Promise.resolve()),\n}));\n\n// Mock do CameraComponent\njest.mock('../src/components/', () => ({\n  CameraComponent: ({ onPhotoTaken, onClose }: any) => {\n    // Simula a foto sendo tirada imediatamente\n    setTimeout(() => {\n      onPhotoTaken('fake-uri', { latitude: 10, longitude: 20 });\n      onClose && onClose();\n    }, 0);\n    return null;\n  },\n}));\n\ndescribe('HomeScreen', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should render search input and camera button', () => {\n    const { getByPlaceholderText, getByTestId } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    expect(getByPlaceholderText('Buscar por data...')).toBeTruthy();\n    expect(getByTestId('camera-button')).toBeTruthy();\n    expect(getByTestId('theme-button')).toBeTruthy();\n  });\n\n  it('should toggle dark mode', () => {\n    const { getByTestId } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    const themeButton = getByTestId('theme-button');\n\n    fireEvent.press(themeButton); // ativa dark mode\n    fireEvent.press(themeButton); // volta ao light mode\n  });\n\n  it('should open camera and handle photo taken', async () => {\n    const { getByTestId } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    const cameraButton = getByTestId('camera-button');\n    await act(async () => {\n      fireEvent.press(cameraButton);\n    });\n\n    // Espera o AsyncStorage.setItem ser chamado\n    await waitFor(() => {\n      expect(AsyncStorage.setItem).toHaveBeenCalledTimes(1);\n      expect(AsyncStorage.setItem).toHaveBeenCalledWith(\n        '@photos',\n        expect.stringContaining('fake-uri'),\n      );\n    });\n  });\n\n  it('should filter photos based on search text', async () => {\n    // Renderiza o componente com fotos mockadas\n    const { getByPlaceholderText, queryAllByRole } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    // Adiciona fotos manualmente\n    const photos = [\n      { uri: 'uri1', date: '01/01/2025 10:00:00' },\n      { uri: 'uri2', date: '02/01/2025 11:00:00' },\n    ];\n    AsyncStorage.getItem = jest.fn(() =>\n      Promise.resolve(JSON.stringify(photos)),\n    );\n\n    // Re-renderiza para carregar fotos\n    fireEvent.changeText(\n      getByPlaceholderText('Buscar por data...'),\n      '02/01/2025',\n    );\n\n    // Filtra fotos\n    const filtered = photos.filter(p =>\n      p.date.toLowerCase().includes('02/01/2025'.toLowerCase()),\n    );\n    expect(filtered).toHaveLength(1);\n    expect(filtered[0].uri).toBe('uri2');\n  });\n\n  it('should delete a photo via onDelete callback', async () => {\n    const mockNavigate = jest.fn();\n    const mockPhotos = [\n      { uri: 'uri1', date: '01/01/2025 10:00:00' },\n      { uri: 'uri2', date: '02/01/2025 11:00:00' },\n    ];\n    AsyncStorage.getItem = jest.fn(() =>\n      Promise.resolve(JSON.stringify(mockPhotos)),\n    );\n\n    // Mock da navegação para chamar onDelete\n    const { getByTestId } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    // Simula onDelete\n    const updatedPhotos = mockPhotos.filter(p => p.uri !== 'uri1');\n    expect(updatedPhotos).toHaveLength(1);\n    expect(updatedPhotos[0].uri).toBe('uri2');\n  });\n});\n"],"mappings":"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","ignoreList":[]}