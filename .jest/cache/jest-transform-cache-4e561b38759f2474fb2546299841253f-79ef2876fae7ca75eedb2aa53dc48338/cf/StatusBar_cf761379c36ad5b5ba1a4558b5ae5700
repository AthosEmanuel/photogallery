f1416337d25e0ac42b57277a8d50b35d
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _processColor = _interopRequireDefault(require("../../StyleSheet/processColor"));
var _Platform = _interopRequireDefault(require("../../Utilities/Platform"));
var _NativeStatusBarManagerAndroid = _interopRequireDefault(require("./NativeStatusBarManagerAndroid"));
var _NativeStatusBarManagerIOS = _interopRequireDefault(require("./NativeStatusBarManagerIOS"));
var _invariant = _interopRequireDefault(require("invariant"));
var React = _interopRequireWildcard(require("react"));
var _StatusBar, _NativeStatusBarManag;
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2.default)(o), (0, _possibleConstructorReturn2.default)(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2.default)(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function mergePropsStack(propsStack, defaultValues) {
  return propsStack.reduce(function (prev, cur) {
    for (var prop in cur) {
      if (cur[prop] != null) {
        prev[prop] = cur[prop];
      }
    }
    return prev;
  }, Object.assign({}, defaultValues));
}
function createStackEntry(props) {
  var _props$animated, _props$showHideTransi;
  var animated = (_props$animated = props.animated) != null ? _props$animated : false;
  var showHideTransition = (_props$showHideTransi = props.showHideTransition) != null ? _props$showHideTransi : 'fade';
  return {
    backgroundColor: props.backgroundColor != null ? {
      value: props.backgroundColor,
      animated: animated
    } : null,
    barStyle: props.barStyle != null ? {
      value: props.barStyle,
      animated: animated
    } : null,
    translucent: props.translucent,
    hidden: props.hidden != null ? {
      value: props.hidden,
      animated: animated,
      transition: showHideTransition
    } : null,
    networkActivityIndicatorVisible: props.networkActivityIndicatorVisible
  };
}
var StatusBar = function (_React$Component) {
  function StatusBar() {
    var _this;
    (0, _classCallCheck2.default)(this, StatusBar);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _callSuper(this, StatusBar, [].concat(args));
    _this._stackEntry = null;
    return _this;
  }
  (0, _inherits2.default)(StatusBar, _React$Component);
  return (0, _createClass2.default)(StatusBar, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this._stackEntry = StatusBar.pushStackEntry(this.props);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this._stackEntry != null) {
        StatusBar.popStackEntry(this._stackEntry);
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      if (this._stackEntry != null) {
        this._stackEntry = StatusBar.replaceStackEntry(this._stackEntry, this.props);
      }
    }
  }, {
    key: "render",
    value: function render() {
      return null;
    }
  }], [{
    key: "setHidden",
    value: function setHidden(hidden, animation) {
      animation = animation || 'none';
      StatusBar._defaultProps.hidden.value = hidden;
      if (_Platform.default.OS === 'ios') {
        _NativeStatusBarManagerIOS.default.setHidden(hidden, animation);
      } else if (_Platform.default.OS === 'android') {
        _NativeStatusBarManagerAndroid.default.setHidden(hidden);
      }
    }
  }, {
    key: "setBarStyle",
    value: function setBarStyle(style, animated) {
      animated = animated || false;
      StatusBar._defaultProps.barStyle.value = style;
      if (_Platform.default.OS === 'ios') {
        _NativeStatusBarManagerIOS.default.setStyle(style, animated);
      } else if (_Platform.default.OS === 'android') {
        _NativeStatusBarManagerAndroid.default.setStyle(style);
      }
    }
  }, {
    key: "setNetworkActivityIndicatorVisible",
    value: function setNetworkActivityIndicatorVisible(visible) {
      if (_Platform.default.OS !== 'ios') {
        console.warn('`setNetworkActivityIndicatorVisible` is only available on iOS');
        return;
      }
      StatusBar._defaultProps.networkActivityIndicatorVisible = visible;
      _NativeStatusBarManagerIOS.default.setNetworkActivityIndicatorVisible(visible);
    }
  }, {
    key: "setBackgroundColor",
    value: function setBackgroundColor(color, animated) {
      if (_Platform.default.OS !== 'android') {
        console.warn('`setBackgroundColor` is only available on Android');
        return;
      }
      animated = animated || false;
      StatusBar._defaultProps.backgroundColor.value = color;
      var processedColor = (0, _processColor.default)(color);
      if (processedColor == null) {
        console.warn(`\`StatusBar.setBackgroundColor\`: Color ${String(color)} parsed to null or undefined`);
        return;
      }
      (0, _invariant.default)(typeof processedColor === 'number', 'Unexpected color given for StatusBar.setBackgroundColor');
      _NativeStatusBarManagerAndroid.default.setColor(processedColor, animated);
    }
  }, {
    key: "setTranslucent",
    value: function setTranslucent(translucent) {
      if (_Platform.default.OS !== 'android') {
        console.warn('`setTranslucent` is only available on Android');
        return;
      }
      StatusBar._defaultProps.translucent = translucent;
      _NativeStatusBarManagerAndroid.default.setTranslucent(translucent);
    }
  }, {
    key: "pushStackEntry",
    value: function pushStackEntry(props) {
      var entry = createStackEntry(props);
      StatusBar._propsStack.push(entry);
      StatusBar._updatePropsStack();
      return entry;
    }
  }, {
    key: "popStackEntry",
    value: function popStackEntry(entry) {
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack.splice(index, 1);
      }
      StatusBar._updatePropsStack();
    }
  }, {
    key: "replaceStackEntry",
    value: function replaceStackEntry(entry, props) {
      var newEntry = createStackEntry(props);
      var index = StatusBar._propsStack.indexOf(entry);
      if (index !== -1) {
        StatusBar._propsStack[index] = newEntry;
      }
      StatusBar._updatePropsStack();
      return newEntry;
    }
  }]);
}(React.Component);
_StatusBar = StatusBar;
StatusBar._propsStack = [];
StatusBar._defaultProps = createStackEntry({
  backgroundColor: _Platform.default.OS === 'android' ? (_NativeStatusBarManag = _NativeStatusBarManagerAndroid.default.getConstants().DEFAULT_BACKGROUND_COLOR) != null ? _NativeStatusBarManag : 'black' : 'black',
  barStyle: 'default',
  translucent: false,
  hidden: false,
  networkActivityIndicatorVisible: false
});
StatusBar._updateImmediate = null;
StatusBar._currentValues = null;
StatusBar.currentHeight = _Platform.default.OS === 'android' ? _NativeStatusBarManagerAndroid.default.getConstants().HEIGHT : null;
StatusBar._updatePropsStack = function () {
  clearImmediate(_StatusBar._updateImmediate);
  _StatusBar._updateImmediate = setImmediate(function () {
    var oldProps = _StatusBar._currentValues;
    var mergedProps = mergePropsStack(_StatusBar._propsStack, _StatusBar._defaultProps);
    if (_Platform.default.OS === 'ios') {
      var _oldProps$barStyle, _oldProps$hidden;
      if (!oldProps || ((_oldProps$barStyle = oldProps.barStyle) == null ? void 0 : _oldProps$barStyle.value) !== mergedProps.barStyle.value) {
        _NativeStatusBarManagerIOS.default.setStyle(mergedProps.barStyle.value, mergedProps.barStyle.animated || false);
      }
      if (!oldProps || ((_oldProps$hidden = oldProps.hidden) == null ? void 0 : _oldProps$hidden.value) !== mergedProps.hidden.value) {
        _NativeStatusBarManagerIOS.default.setHidden(mergedProps.hidden.value, mergedProps.hidden.animated ? mergedProps.hidden.transition : 'none');
      }
      if (!oldProps || oldProps.networkActivityIndicatorVisible !== mergedProps.networkActivityIndicatorVisible) {
        _NativeStatusBarManagerIOS.default.setNetworkActivityIndicatorVisible(mergedProps.networkActivityIndicatorVisible);
      }
    } else if (_Platform.default.OS === 'android') {
      var _oldProps$hidden2;
      _NativeStatusBarManagerAndroid.default.setStyle(mergedProps.barStyle.value);
      var processedColor = (0, _processColor.default)(mergedProps.backgroundColor.value);
      if (processedColor == null) {
        console.warn(`\`StatusBar._updatePropsStack\`: Color ${mergedProps.backgroundColor.value} parsed to null or undefined`);
      } else {
        (0, _invariant.default)(typeof processedColor === 'number', 'Unexpected color given in StatusBar._updatePropsStack');
        _NativeStatusBarManagerAndroid.default.setColor(processedColor, mergedProps.backgroundColor.animated);
      }
      if (!oldProps || ((_oldProps$hidden2 = oldProps.hidden) == null ? void 0 : _oldProps$hidden2.value) !== mergedProps.hidden.value) {
        _NativeStatusBarManagerAndroid.default.setHidden(mergedProps.hidden.value);
      }
      if (!oldProps || oldProps.translucent !== mergedProps.translucent || mergedProps.translucent) {
        _NativeStatusBarManagerAndroid.default.setTranslucent(mergedProps.translucent);
      }
    }
    _StatusBar._currentValues = mergedProps;
  });
};
var _default = exports.default = StatusBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcHJvY2Vzc0NvbG9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfUGxhdGZvcm0iLCJfTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQiLCJfTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUyIsIl9pbnZhcmlhbnQiLCJSZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX1N0YXR1c0JhciIsIl9OYXRpdmVTdGF0dXNCYXJNYW5hZyIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJfdCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX2NhbGxTdXBlciIsIl9nZXRQcm90b3R5cGVPZjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImNvbnN0cnVjdG9yIiwiYXBwbHkiLCJCb29sZWFuIiwicHJvdG90eXBlIiwidmFsdWVPZiIsIm1lcmdlUHJvcHNTdGFjayIsInByb3BzU3RhY2siLCJkZWZhdWx0VmFsdWVzIiwicmVkdWNlIiwicHJldiIsImN1ciIsInByb3AiLCJhc3NpZ24iLCJjcmVhdGVTdGFja0VudHJ5IiwicHJvcHMiLCJfcHJvcHMkYW5pbWF0ZWQiLCJfcHJvcHMkc2hvd0hpZGVUcmFuc2kiLCJhbmltYXRlZCIsInNob3dIaWRlVHJhbnNpdGlvbiIsImJhY2tncm91bmRDb2xvciIsInZhbHVlIiwiYmFyU3R5bGUiLCJ0cmFuc2x1Y2VudCIsImhpZGRlbiIsInRyYW5zaXRpb24iLCJuZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlIiwiU3RhdHVzQmFyIiwiX1JlYWN0JENvbXBvbmVudCIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiY29uY2F0IiwiX3N0YWNrRW50cnkiLCJfaW5oZXJpdHMyIiwiX2NyZWF0ZUNsYXNzMiIsImtleSIsImNvbXBvbmVudERpZE1vdW50IiwicHVzaFN0YWNrRW50cnkiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInBvcFN0YWNrRW50cnkiLCJjb21wb25lbnREaWRVcGRhdGUiLCJyZXBsYWNlU3RhY2tFbnRyeSIsInJlbmRlciIsInNldEhpZGRlbiIsImFuaW1hdGlvbiIsIl9kZWZhdWx0UHJvcHMiLCJQbGF0Zm9ybSIsIk9TIiwiTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUyIsIk5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkIiwic2V0QmFyU3R5bGUiLCJzdHlsZSIsInNldFN0eWxlIiwic2V0TmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSIsInZpc2libGUiLCJjb25zb2xlIiwid2FybiIsInNldEJhY2tncm91bmRDb2xvciIsImNvbG9yIiwicHJvY2Vzc2VkQ29sb3IiLCJwcm9jZXNzQ29sb3IiLCJTdHJpbmciLCJpbnZhcmlhbnQiLCJzZXRDb2xvciIsInNldFRyYW5zbHVjZW50IiwiZW50cnkiLCJfcHJvcHNTdGFjayIsInB1c2giLCJfdXBkYXRlUHJvcHNTdGFjayIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsIm5ld0VudHJ5IiwiQ29tcG9uZW50IiwiZ2V0Q29uc3RhbnRzIiwiREVGQVVMVF9CQUNLR1JPVU5EX0NPTE9SIiwiX3VwZGF0ZUltbWVkaWF0ZSIsIl9jdXJyZW50VmFsdWVzIiwiY3VycmVudEhlaWdodCIsIkhFSUdIVCIsImNsZWFySW1tZWRpYXRlIiwic2V0SW1tZWRpYXRlIiwib2xkUHJvcHMiLCJtZXJnZWRQcm9wcyIsIl9vbGRQcm9wcyRiYXJTdHlsZSIsIl9vbGRQcm9wcyRoaWRkZW4iLCJfb2xkUHJvcHMkaGlkZGVuMiIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlN0YXR1c0Jhci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgdHlwZSB7Q29sb3JWYWx1ZX0gZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0JztcblxuaW1wb3J0IHByb2Nlc3NDb2xvciBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L3Byb2Nlc3NDb2xvcic7XG5pbXBvcnQgUGxhdGZvcm0gZnJvbSAnLi4vLi4vVXRpbGl0aWVzL1BsYXRmb3JtJztcbmltcG9ydCBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZCBmcm9tICcuL05hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkJztcbmltcG9ydCBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TIGZyb20gJy4vTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbi8qKlxuICogU3RhdHVzIGJhciBzdHlsZVxuICovXG5leHBvcnQgdHlwZSBTdGF0dXNCYXJTdHlsZSA9ICRLZXlzPHtcbiAgLyoqXG4gICAqIERlZmF1bHQgc3RhdHVzIGJhciBzdHlsZSAoZGFyayBmb3IgaU9TLCBsaWdodCBmb3IgQW5kcm9pZClcbiAgICovXG4gIGRlZmF1bHQ6IHN0cmluZyxcbiAgLyoqXG4gICAqIERhcmsgYmFja2dyb3VuZCwgd2hpdGUgdGV4dHMgYW5kIGljb25zXG4gICAqL1xuICAnbGlnaHQtY29udGVudCc6IHN0cmluZyxcbiAgLyoqXG4gICAqIExpZ2h0IGJhY2tncm91bmQsIGRhcmsgdGV4dHMgYW5kIGljb25zXG4gICAqL1xuICAnZGFyay1jb250ZW50Jzogc3RyaW5nLFxuICAuLi5cbn0+O1xuXG4vKipcbiAqIFN0YXR1cyBiYXIgYW5pbWF0aW9uXG4gKi9cbmV4cG9ydCB0eXBlIFN0YXR1c0JhckFuaW1hdGlvbiA9ICRLZXlzPHtcbiAgLyoqXG4gICAqIE5vIGFuaW1hdGlvblxuICAgKi9cbiAgbm9uZTogc3RyaW5nLFxuICAvKipcbiAgICogRmFkZSBhbmltYXRpb25cbiAgICovXG4gIGZhZGU6IHN0cmluZyxcbiAgLyoqXG4gICAqIFNsaWRlIGFuaW1hdGlvblxuICAgKi9cbiAgc2xpZGU6IHN0cmluZyxcbiAgLi4uXG59PjtcblxuZXhwb3J0IHR5cGUgU3RhdHVzQmFyUHJvcHNBbmRyb2lkID0gJFJlYWRPbmx5PHtcbiAgLyoqXG4gICAqIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBzdGF0dXMgYmFyLlxuICAgKlxuICAgKiBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgcHJvcCBoYXMgbm8gZWZmZWN0IG9uIEFuZHJvaWQgMTUrXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBiYWNrZ3JvdW5kQ29sb3I/OiA/Q29sb3JWYWx1ZSxcbiAgLyoqXG4gICAqIElmIHRoZSBzdGF0dXMgYmFyIGlzIHRyYW5zbHVjZW50LlxuICAgKiBXaGVuIHRyYW5zbHVjZW50IGlzIHNldCB0byB0cnVlLCB0aGUgYXBwIHdpbGwgZHJhdyB1bmRlciB0aGUgc3RhdHVzIGJhci5cbiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiB1c2luZyBhIHNlbWkgdHJhbnNwYXJlbnQgc3RhdHVzIGJhciBjb2xvci5cbiAgICpcbiAgICogUGxlYXNlIG5vdGUgdGhhdCB0aGlzIHByb3AgaGFzIG5vIGVmZmVjdCBvbiBBbmRyb2lkIDE1K1xuICAgKlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgdHJhbnNsdWNlbnQ/OiA/Ym9vbGVhbixcbn0+O1xuXG5leHBvcnQgdHlwZSBTdGF0dXNCYXJQcm9wc0lPUyA9ICRSZWFkT25seTx7XG4gIC8qKlxuICAgKiBJZiB0aGUgbmV0d29yayBhY3Rpdml0eSBpbmRpY2F0b3Igc2hvdWxkIGJlIHZpc2libGUuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIG5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGU/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIFRoZSB0cmFuc2l0aW9uIGVmZmVjdCB3aGVuIHNob3dpbmcgYW5kIGhpZGluZyB0aGUgc3RhdHVzIGJhciB1c2luZyB0aGUgYGhpZGRlbmBcbiAgICogcHJvcC4gRGVmYXVsdHMgdG8gJ2ZhZGUnLlxuICAgKlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBzaG93SGlkZVRyYW5zaXRpb24/OiA/KCdmYWRlJyB8ICdzbGlkZScgfCAnbm9uZScpLFxufT47XG5cbnR5cGUgU3RhdHVzQmFyQmFzZVByb3BzID0gJFJlYWRPbmx5PHtcbiAgLyoqXG4gICAqIElmIHRoZSBzdGF0dXMgYmFyIGlzIGhpZGRlbi5cbiAgICovXG4gIGhpZGRlbj86ID9ib29sZWFuLFxuICAvKipcbiAgICogSWYgdGhlIHRyYW5zaXRpb24gYmV0d2VlbiBzdGF0dXMgYmFyIHByb3BlcnR5IGNoYW5nZXMgc2hvdWxkIGJlIGFuaW1hdGVkLlxuICAgKiBTdXBwb3J0ZWQgZm9yIGJhY2tncm91bmRDb2xvciwgYmFyU3R5bGUgYW5kIGhpZGRlbi5cbiAgICovXG4gIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb2xvciBvZiB0aGUgc3RhdHVzIGJhciB0ZXh0LlxuICAgKi9cbiAgYmFyU3R5bGU/OiA/KCdkZWZhdWx0JyB8ICdsaWdodC1jb250ZW50JyB8ICdkYXJrLWNvbnRlbnQnKSxcbn0+O1xuXG5leHBvcnQgdHlwZSBTdGF0dXNCYXJQcm9wcyA9ICRSZWFkT25seTx7XG4gIC4uLlN0YXR1c0JhclByb3BzQW5kcm9pZCxcbiAgLi4uU3RhdHVzQmFyUHJvcHNJT1MsXG4gIC4uLlN0YXR1c0JhckJhc2VQcm9wcyxcbn0+O1xuXG50eXBlIFN0YWNrUHJvcHMgPSB7XG4gIGJhY2tncm91bmRDb2xvcjogP3tcbiAgICB2YWx1ZTogU3RhdHVzQmFyUHJvcHNbJ2JhY2tncm91bmRDb2xvciddLFxuICAgIGFuaW1hdGVkOiBib29sZWFuLFxuICB9LFxuICBiYXJTdHlsZTogP3tcbiAgICB2YWx1ZTogU3RhdHVzQmFyUHJvcHNbJ2JhclN0eWxlJ10sXG4gICAgYW5pbWF0ZWQ6IGJvb2xlYW4sXG4gIH0sXG4gIHRyYW5zbHVjZW50OiBTdGF0dXNCYXJQcm9wc1sndHJhbnNsdWNlbnQnXSxcbiAgaGlkZGVuOiA/e1xuICAgIHZhbHVlOiBib29sZWFuLFxuICAgIGFuaW1hdGVkOiBib29sZWFuLFxuICAgIHRyYW5zaXRpb246IFN0YXR1c0JhclByb3BzWydzaG93SGlkZVRyYW5zaXRpb24nXSxcbiAgfSxcbiAgbmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZTogU3RhdHVzQmFyUHJvcHNbJ25ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUnXSxcbn07XG5cbi8qKlxuICogTWVyZ2VzIHRoZSBwcm9wIHN0YWNrIHdpdGggdGhlIGRlZmF1bHQgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBtZXJnZVByb3BzU3RhY2soXG4gIHByb3BzU3RhY2s6IEFycmF5PE9iamVjdD4sXG4gIGRlZmF1bHRWYWx1ZXM6IE9iamVjdCxcbik6IE9iamVjdCB7XG4gIHJldHVybiBwcm9wc1N0YWNrLnJlZHVjZShcbiAgICAocHJldiwgY3VyKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IHByb3AgaW4gY3VyKSB7XG4gICAgICAgIGlmIChjdXJbcHJvcF0gIT0gbnVsbCkge1xuICAgICAgICAgIHByZXZbcHJvcF0gPSBjdXJbcHJvcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBwcmV2O1xuICAgIH0sXG4gICAgey4uLmRlZmF1bHRWYWx1ZXN9LFxuICApO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gb2JqZWN0IHRvIGluc2VydCBpbiB0aGUgcHJvcHMgc3RhY2sgZnJvbSB0aGUgcHJvcHNcbiAqIGFuZCB0aGUgdHJhbnNpdGlvbi9hbmltYXRpb24gaW5mby5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RhY2tFbnRyeShwcm9wczogU3RhdHVzQmFyUHJvcHMpOiBTdGFja1Byb3BzIHtcbiAgY29uc3QgYW5pbWF0ZWQgPSBwcm9wcy5hbmltYXRlZCA/PyBmYWxzZTtcbiAgY29uc3Qgc2hvd0hpZGVUcmFuc2l0aW9uID0gcHJvcHMuc2hvd0hpZGVUcmFuc2l0aW9uID8/ICdmYWRlJztcbiAgcmV0dXJuIHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6XG4gICAgICBwcm9wcy5iYWNrZ3JvdW5kQ29sb3IgIT0gbnVsbFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wcy5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICBhbmltYXRlZCxcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICBiYXJTdHlsZTpcbiAgICAgIHByb3BzLmJhclN0eWxlICE9IG51bGxcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMuYmFyU3R5bGUsXG4gICAgICAgICAgICBhbmltYXRlZCxcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICB0cmFuc2x1Y2VudDogcHJvcHMudHJhbnNsdWNlbnQsXG4gICAgaGlkZGVuOlxuICAgICAgcHJvcHMuaGlkZGVuICE9IG51bGxcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB2YWx1ZTogcHJvcHMuaGlkZGVuLFxuICAgICAgICAgICAgYW5pbWF0ZWQsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBzaG93SGlkZVRyYW5zaXRpb24sXG4gICAgICAgICAgfVxuICAgICAgICA6IG51bGwsXG4gICAgbmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZTogcHJvcHMubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSxcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21wb25lbnQgdG8gY29udHJvbCB0aGUgYXBwIHN0YXR1cyBiYXIuXG4gKlxuICogSXQgaXMgcG9zc2libGUgdG8gaGF2ZSBtdWx0aXBsZSBgU3RhdHVzQmFyYCBjb21wb25lbnRzIG1vdW50ZWQgYXQgdGhlIHNhbWVcbiAqIHRpbWUuIFRoZSBwcm9wcyB3aWxsIGJlIG1lcmdlZCBpbiB0aGUgb3JkZXIgdGhlIGBTdGF0dXNCYXJgIGNvbXBvbmVudHMgd2VyZVxuICogbW91bnRlZC5cbiAqXG4gKiAjIyMgSW1wZXJhdGl2ZSBBUElcbiAqXG4gKiBGb3IgY2FzZXMgd2hlcmUgdXNpbmcgYSBjb21wb25lbnQgaXMgbm90IGlkZWFsLCB0aGVyZSBhcmUgc3RhdGljIG1ldGhvZHNcbiAqIHRvIG1hbmlwdWxhdGUgdGhlIGBTdGF0dXNCYXJgIGRpc3BsYXkgc3RhY2suIFRoZXNlIG1ldGhvZHMgaGF2ZSB0aGUgc2FtZVxuICogYmVoYXZpb3IgYXMgbW91bnRpbmcgYW5kIHVubW91bnRpbmcgYSBgU3RhdHVzQmFyYCBjb21wb25lbnQuXG4gKlxuICogRm9yIGV4YW1wbGUsIHlvdSBjYW4gY2FsbCBgU3RhdHVzQmFyLnB1c2hTdGFja0VudHJ5YCB0byB1cGRhdGUgdGhlIHN0YXR1cyBiYXJcbiAqIGJlZm9yZSBsYXVuY2hpbmcgYSB0aGlyZC1wYXJ0eSBuYXRpdmUgVUkgY29tcG9uZW50LCBhbmQgdGhlbiBjYWxsXG4gKiBgU3RhdHVzQmFyLnBvcFN0YWNrRW50cnlgIHdoZW4gY29tcGxldGVkLlxuICpcbiAqIGBgYFxuICogY29uc3Qgb3BlblRoaXJkUGFydHlCdWdSZXBvcnRlciA9IGFzeW5jICgpID0+IHtcbiAqICAgLy8gVGhlIGJ1ZyByZXBvcnRlciBoYXMgYSBkYXJrIGJhY2tncm91bmQsIHNvIHdlIHB1c2ggYSBuZXcgc3RhdHVzIGJhciBzdHlsZS5cbiAqICAgY29uc3Qgc3RhY2tFbnRyeSA9IFN0YXR1c0Jhci5wdXNoU3RhY2tFbnRyeSh7YmFyU3R5bGU6ICdsaWdodC1jb250ZW50J30pO1xuICpcbiAqICAgLy8gYG9wZW5gIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgVUkgaXMgZGlzbWlzc2VkLlxuICogICBhd2FpdCBCdWdSZXBvcnRlci5vcGVuKCk7XG4gKlxuICogICAvLyBEb24ndCBmb3JnZXQgdG8gY2FsbCBgcG9wU3RhY2tFbnRyeWAgd2hlbiB5b3UncmUgZG9uZS5cbiAqICAgU3RhdHVzQmFyLnBvcFN0YWNrRW50cnkoc3RhY2tFbnRyeSk7XG4gKiB9O1xuICogYGBgXG4gKlxuICogVGhlcmUgaXMgYSBsZWdhY3kgaW1wZXJhdGl2ZSBBUEkgdGhhdCBlbmFibGVzIHlvdSB0byBtYW51YWxseSB1cGRhdGUgdGhlXG4gKiBzdGF0dXMgYmFyIHN0eWxlcy4gSG93ZXZlciwgdGhlIGxlZ2FjeSBBUEkgZG9lcyBub3QgdXBkYXRlIHRoZSBpbnRlcm5hbFxuICogYFN0YXR1c0JhcmAgZGlzcGxheSBzdGFjaywgd2hpY2ggbWVhbnMgdGhhdCBhbnkgY2hhbmdlcyB3aWxsIGJlIG92ZXJyaWRkZW5cbiAqIHdoZW5ldmVyIGEgYFN0YXR1c0JhcmAgY29tcG9uZW50IGlzIG1vdW50ZWQgb3IgdW5tb3VudGVkLlxuICpcbiAqIEl0IGlzIHN0cm9uZ2x5IGFkdmlzZWQgdGhhdCB5b3UgdXNlIGBwdXNoU3RhY2tFbnRyeWAsIGBwb3BTdGFja0VudHJ5YCwgb3JcbiAqIGByZXBsYWNlU3RhY2tFbnRyeWAgaW5zdGVhZCBvZiB0aGUgc3RhdGljIG1ldGhvZHMgYmVnaW5uaW5nIHdpdGggYHNldGAuXG4gKlxuICogIyMjIENvbnN0YW50c1xuICpcbiAqIGBjdXJyZW50SGVpZ2h0YCAoQW5kcm9pZCBvbmx5KSBUaGUgaGVpZ2h0IG9mIHRoZSBzdGF0dXMgYmFyLlxuICovXG5jbGFzcyBTdGF0dXNCYXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8U3RhdHVzQmFyUHJvcHM+IHtcbiAgc3RhdGljIF9wcm9wc1N0YWNrOiBBcnJheTxTdGFja1Byb3BzPiA9IFtdO1xuXG4gIHN0YXRpYyBfZGVmYXVsdFByb3BzOiBhbnkgPSBjcmVhdGVTdGFja0VudHJ5KHtcbiAgICBiYWNrZ3JvdW5kQ29sb3I6XG4gICAgICBQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnXG4gICAgICAgID8gTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuZ2V0Q29uc3RhbnRzKClcbiAgICAgICAgICAgIC5ERUZBVUxUX0JBQ0tHUk9VTkRfQ09MT1IgPz8gJ2JsYWNrJ1xuICAgICAgICA6ICdibGFjaycsXG4gICAgYmFyU3R5bGU6ICdkZWZhdWx0JyxcbiAgICB0cmFuc2x1Y2VudDogZmFsc2UsXG4gICAgaGlkZGVuOiBmYWxzZSxcbiAgICBuZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlOiBmYWxzZSxcbiAgfSk7XG5cbiAgLy8gVGltZXIgZm9yIHVwZGF0aW5nIHRoZSBuYXRpdmUgbW9kdWxlIHZhbHVlcyBhdCB0aGUgZW5kIG9mIHRoZSBmcmFtZS5cbiAgc3RhdGljIF91cGRhdGVJbW1lZGlhdGU6ID9udW1iZXIgPSBudWxsO1xuXG4gIC8vIFRoZSBjdXJyZW50IG1lcmdlZCB2YWx1ZXMgZnJvbSB0aGUgcHJvcHMgc3RhY2suXG4gIHN0YXRpYyBfY3VycmVudFZhbHVlczogP1N0YWNrUHJvcHMgPSBudWxsO1xuXG4gIC8vIFRPRE8oamFuaWMpOiBQcm92aWRlIGEgcmVhbCBBUEkgdG8gZGVhbCB3aXRoIHN0YXR1cyBiYXIgaGVpZ2h0LiBTZWUgdGhlXG4gIC8vIGRpc2N1c3Npb24gaW4gIzYxOTUuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBoZWlnaHQgb2YgdGhlIHN0YXR1cyBiYXIgb24gdGhlIGRldmljZS5cbiAgICpcbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHN0YXRpYyBjdXJyZW50SGVpZ2h0OiA/bnVtYmVyID1cbiAgICBQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnXG4gICAgICA/IE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLmdldENvbnN0YW50cygpLkhFSUdIVFxuICAgICAgOiBudWxsO1xuXG4gIC8vIFByb3ZpZGUgYW4gaW1wZXJhdGl2ZSBBUEkgYXMgc3RhdGljIGZ1bmN0aW9ucyBvZiB0aGUgY29tcG9uZW50LlxuICAvLyBTZWUgdGhlIGNvcnJlc3BvbmRpbmcgcHJvcCBmb3IgbW9yZSBkZXRhaWwuXG5cbiAgLyoqXG4gICAqIFNob3cgb3IgaGlkZSB0aGUgc3RhdHVzIGJhclxuICAgKiBAcGFyYW0gaGlkZGVuIEhpZGUgdGhlIHN0YXR1cyBiYXIuXG4gICAqIEBwYXJhbSBhbmltYXRpb24gT3B0aW9uYWwgYW5pbWF0aW9uIHdoZW5cbiAgICogICAgY2hhbmdpbmcgdGhlIHN0YXR1cyBiYXIgaGlkZGVuIHByb3BlcnR5LlxuICAgKi9cbiAgc3RhdGljIHNldEhpZGRlbihoaWRkZW46IGJvb2xlYW4sIGFuaW1hdGlvbj86IFN0YXR1c0JhckFuaW1hdGlvbikge1xuICAgIGFuaW1hdGlvbiA9IGFuaW1hdGlvbiB8fCAnbm9uZSc7XG4gICAgU3RhdHVzQmFyLl9kZWZhdWx0UHJvcHMuaGlkZGVuLnZhbHVlID0gaGlkZGVuO1xuICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHtcbiAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1Muc2V0SGlkZGVuKGhpZGRlbiwgYW5pbWF0aW9uKTtcbiAgICB9IGVsc2UgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldEhpZGRlbihoaWRkZW4pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXR1cyBiYXIgc3R5bGVcbiAgICogQHBhcmFtIHN0eWxlIFN0YXR1cyBiYXIgc3R5bGUgdG8gc2V0XG4gICAqIEBwYXJhbSBhbmltYXRlZCBBbmltYXRlIHRoZSBzdHlsZSBjaGFuZ2UuXG4gICAqL1xuICBzdGF0aWMgc2V0QmFyU3R5bGUoc3R5bGU6IFN0YXR1c0JhclN0eWxlLCBhbmltYXRlZD86IGJvb2xlYW4pIHtcbiAgICBhbmltYXRlZCA9IGFuaW1hdGVkIHx8IGZhbHNlO1xuICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLmJhclN0eWxlLnZhbHVlID0gc3R5bGU7XG4gICAgaWYgKFBsYXRmb3JtLk9TID09PSAnaW9zJykge1xuICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUy5zZXRTdHlsZShzdHlsZSwgYW5pbWF0ZWQpO1xuICAgIH0gZWxzZSBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0U3R5bGUoc3R5bGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBERVBSRUNBVEVEIC0gVGhlIHN0YXR1cyBiYXIgbmV0d29yayBhY3Rpdml0eSBpbmRpY2F0b3IgaXMgbm90IHN1cHBvcnRlZCBpbiBpT1MgMTMgYW5kIGxhdGVyLiBUaGlzIHdpbGwgYmUgcmVtb3ZlZCBpbiBhIGZ1dHVyZSByZWxlYXNlLlxuICAgKiBAcGFyYW0gdmlzaWJsZSBTaG93IHRoZSBpbmRpY2F0b3IuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBzdGF0aWMgc2V0TmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgaWYgKFBsYXRmb3JtLk9TICE9PSAnaW9zJykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnYHNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGVgIGlzIG9ubHkgYXZhaWxhYmxlIG9uIGlPUycsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlID0gdmlzaWJsZTtcbiAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TLnNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUodmlzaWJsZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgc3RhdHVzIGJhclxuICAgKiBAcGFyYW0gY29sb3IgQmFja2dyb3VuZCBjb2xvci5cbiAgICogQHBhcmFtIGFuaW1hdGVkIEFuaW1hdGUgdGhlIHN0eWxlIGNoYW5nZS5cbiAgICovXG4gIHN0YXRpYyBzZXRCYWNrZ3JvdW5kQ29sb3IoY29sb3I6IENvbG9yVmFsdWUsIGFuaW1hdGVkPzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChQbGF0Zm9ybS5PUyAhPT0gJ2FuZHJvaWQnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2BzZXRCYWNrZ3JvdW5kQ29sb3JgIGlzIG9ubHkgYXZhaWxhYmxlIG9uIEFuZHJvaWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYW5pbWF0ZWQgPSBhbmltYXRlZCB8fCBmYWxzZTtcbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy5iYWNrZ3JvdW5kQ29sb3IudmFsdWUgPSBjb2xvcjtcblxuICAgIGNvbnN0IHByb2Nlc3NlZENvbG9yID0gcHJvY2Vzc0NvbG9yKGNvbG9yKTtcbiAgICBpZiAocHJvY2Vzc2VkQ29sb3IgPT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgXFxgU3RhdHVzQmFyLnNldEJhY2tncm91bmRDb2xvclxcYDogQ29sb3IgJHtTdHJpbmcoY29sb3IpfSBwYXJzZWQgdG8gbnVsbCBvciB1bmRlZmluZWRgLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaW52YXJpYW50KFxuICAgICAgdHlwZW9mIHByb2Nlc3NlZENvbG9yID09PSAnbnVtYmVyJyxcbiAgICAgICdVbmV4cGVjdGVkIGNvbG9yIGdpdmVuIGZvciBTdGF0dXNCYXIuc2V0QmFja2dyb3VuZENvbG9yJyxcbiAgICApO1xuXG4gICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0Q29sb3IocHJvY2Vzc2VkQ29sb3IsIGFuaW1hdGVkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb250cm9sIHRoZSB0cmFuc2x1Y2VuY3kgb2YgdGhlIHN0YXR1cyBiYXJcbiAgICogQHBhcmFtIHRyYW5zbHVjZW50IFNldCBhcyB0cmFuc2x1Y2VudC5cbiAgICovXG4gIHN0YXRpYyBzZXRUcmFuc2x1Y2VudCh0cmFuc2x1Y2VudDogYm9vbGVhbikge1xuICAgIGlmIChQbGF0Zm9ybS5PUyAhPT0gJ2FuZHJvaWQnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2BzZXRUcmFuc2x1Y2VudGAgaXMgb25seSBhdmFpbGFibGUgb24gQW5kcm9pZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBTdGF0dXNCYXIuX2RlZmF1bHRQcm9wcy50cmFuc2x1Y2VudCA9IHRyYW5zbHVjZW50O1xuICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJBbmRyb2lkLnNldFRyYW5zbHVjZW50KHRyYW5zbHVjZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXNoIGEgU3RhdHVzQmFyIGVudHJ5IG9udG8gdGhlIHN0YWNrLlxuICAgKiBUaGUgcmV0dXJuIHZhbHVlIHNob3VsZCBiZSBwYXNzZWQgdG8gYHBvcFN0YWNrRW50cnlgIHdoZW4gY29tcGxldGUuXG4gICAqXG4gICAqIEBwYXJhbSBwcm9wcyBPYmplY3QgY29udGFpbmluZyB0aGUgU3RhdHVzQmFyIHByb3BzIHRvIHVzZSBpbiB0aGUgc3RhY2sgZW50cnkuXG4gICAqL1xuICBzdGF0aWMgcHVzaFN0YWNrRW50cnkocHJvcHM6IFN0YXR1c0JhclByb3BzKTogU3RhY2tQcm9wcyB7XG4gICAgY29uc3QgZW50cnkgPSBjcmVhdGVTdGFja0VudHJ5KHByb3BzKTtcbiAgICBTdGF0dXNCYXIuX3Byb3BzU3RhY2sucHVzaChlbnRyeSk7XG4gICAgU3RhdHVzQmFyLl91cGRhdGVQcm9wc1N0YWNrKCk7XG4gICAgcmV0dXJuIGVudHJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIFBvcCBhIFN0YXR1c0JhciBlbnRyeSBmcm9tIHRoZSBzdGFjay5cbiAgICpcbiAgICogQHBhcmFtIGVudHJ5IEVudHJ5IHJldHVybmVkIGZyb20gYHB1c2hTdGFja0VudHJ5YC5cbiAgICovXG4gIHN0YXRpYyBwb3BTdGFja0VudHJ5KGVudHJ5OiBTdGFja1Byb3BzKSB7XG4gICAgY29uc3QgaW5kZXggPSBTdGF0dXNCYXIuX3Byb3BzU3RhY2suaW5kZXhPZihlbnRyeSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgU3RhdHVzQmFyLl9wcm9wc1N0YWNrLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgYW4gZXhpc3RpbmcgU3RhdHVzQmFyIHN0YWNrIGVudHJ5IHdpdGggbmV3IHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0gZW50cnkgRW50cnkgcmV0dXJuZWQgZnJvbSBgcHVzaFN0YWNrRW50cnlgIHRvIHJlcGxhY2UuXG4gICAqIEBwYXJhbSBwcm9wcyBPYmplY3QgY29udGFpbmluZyB0aGUgU3RhdHVzQmFyIHByb3BzIHRvIHVzZSBpbiB0aGUgcmVwbGFjZW1lbnQgc3RhY2sgZW50cnkuXG4gICAqL1xuICBzdGF0aWMgcmVwbGFjZVN0YWNrRW50cnkoXG4gICAgZW50cnk6IFN0YWNrUHJvcHMsXG4gICAgcHJvcHM6IFN0YXR1c0JhclByb3BzLFxuICApOiBTdGFja1Byb3BzIHtcbiAgICBjb25zdCBuZXdFbnRyeSA9IGNyZWF0ZVN0YWNrRW50cnkocHJvcHMpO1xuICAgIGNvbnN0IGluZGV4ID0gU3RhdHVzQmFyLl9wcm9wc1N0YWNrLmluZGV4T2YoZW50cnkpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIFN0YXR1c0Jhci5fcHJvcHNTdGFja1tpbmRleF0gPSBuZXdFbnRyeTtcbiAgICB9XG4gICAgU3RhdHVzQmFyLl91cGRhdGVQcm9wc1N0YWNrKCk7XG4gICAgcmV0dXJuIG5ld0VudHJ5O1xuICB9XG5cbiAgX3N0YWNrRW50cnk6ID9TdGFja1Byb3BzID0gbnVsbDtcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvLyBFdmVyeSB0aW1lIGEgU3RhdHVzQmFyIGNvbXBvbmVudCBpcyBtb3VudGVkLCB3ZSBwdXNoIGl0J3MgcHJvcCB0byBhIHN0YWNrXG4gICAgLy8gYW5kIGFsd2F5cyB1cGRhdGUgdGhlIG5hdGl2ZSBzdGF0dXMgYmFyIHdpdGggdGhlIHByb3BzIGZyb20gdGhlIHRvcCBvZiB0aGVuXG4gICAgLy8gc3RhY2suIFRoaXMgYWxsb3dzIGhhdmluZyBtdWx0aXBsZSBTdGF0dXNCYXIgY29tcG9uZW50cyBhbmQgdGhlIG9uZSB0aGF0IGlzXG4gICAgLy8gYWRkZWQgbGFzdCBvciBpcyBkZWVwZXIgaW4gdGhlIHZpZXcgaGllcmFyY2h5IHdpbGwgaGF2ZSBwcmlvcml0eS5cbiAgICB0aGlzLl9zdGFja0VudHJ5ID0gU3RhdHVzQmFyLnB1c2hTdGFja0VudHJ5KHRoaXMucHJvcHMpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgLy8gV2hlbiBhIFN0YXR1c0JhciBpcyB1bm1vdW50ZWQsIHJlbW92ZSBpdHNlbGYgZnJvbSB0aGUgc3RhY2sgYW5kIHVwZGF0ZVxuICAgIC8vIHRoZSBuYXRpdmUgYmFyIHdpdGggdGhlIG5leHQgcHJvcHMuXG4gICAgaWYgKHRoaXMuX3N0YWNrRW50cnkgIT0gbnVsbCkge1xuICAgICAgU3RhdHVzQmFyLnBvcFN0YWNrRW50cnkodGhpcy5fc3RhY2tFbnRyeSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIGlmICh0aGlzLl9zdGFja0VudHJ5ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX3N0YWNrRW50cnkgPSBTdGF0dXNCYXIucmVwbGFjZVN0YWNrRW50cnkoXG4gICAgICAgIHRoaXMuX3N0YWNrRW50cnksXG4gICAgICAgIHRoaXMucHJvcHMsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBuYXRpdmUgc3RhdHVzIGJhciB3aXRoIHRoZSBwcm9wcyBmcm9tIHRoZSBzdGFjay5cbiAgICovXG4gIHN0YXRpYyBfdXBkYXRlUHJvcHNTdGFjayA9ICgpID0+IHtcbiAgICAvLyBTZW5kIHRoZSB1cGRhdGUgdG8gdGhlIG5hdGl2ZSBtb2R1bGUgb25seSBvbmNlIGF0IHRoZSBlbmQgb2YgdGhlIGZyYW1lLlxuICAgIGNsZWFySW1tZWRpYXRlKFN0YXR1c0Jhci5fdXBkYXRlSW1tZWRpYXRlKTtcbiAgICBTdGF0dXNCYXIuX3VwZGF0ZUltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZSgoKSA9PiB7XG4gICAgICBjb25zdCBvbGRQcm9wcyA9IFN0YXR1c0Jhci5fY3VycmVudFZhbHVlcztcbiAgICAgIGNvbnN0IG1lcmdlZFByb3BzID0gbWVyZ2VQcm9wc1N0YWNrKFxuICAgICAgICBTdGF0dXNCYXIuX3Byb3BzU3RhY2ssXG4gICAgICAgIFN0YXR1c0Jhci5fZGVmYXVsdFByb3BzLFxuICAgICAgKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBwcm9wcyB0aGF0IGhhdmUgY2hhbmdlZCB1c2luZyB0aGUgbWVyZ2VkIHZhbHVlcyBmcm9tIHRoZSBwcm9wcyBzdGFjay5cbiAgICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2lvcycpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFvbGRQcm9wcyB8fFxuICAgICAgICAgIG9sZFByb3BzLmJhclN0eWxlPy52YWx1ZSAhPT0gbWVyZ2VkUHJvcHMuYmFyU3R5bGUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlcklPUy5zZXRTdHlsZShcbiAgICAgICAgICAgIG1lcmdlZFByb3BzLmJhclN0eWxlLnZhbHVlLFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuYmFyU3R5bGUuYW5pbWF0ZWQgfHwgZmFsc2UsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9sZFByb3BzIHx8IG9sZFByb3BzLmhpZGRlbj8udmFsdWUgIT09IG1lcmdlZFByb3BzLmhpZGRlbi52YWx1ZSkge1xuICAgICAgICAgIE5hdGl2ZVN0YXR1c0Jhck1hbmFnZXJJT1Muc2V0SGlkZGVuKFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuaGlkZGVuLnZhbHVlLFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuaGlkZGVuLmFuaW1hdGVkXG4gICAgICAgICAgICAgID8gbWVyZ2VkUHJvcHMuaGlkZGVuLnRyYW5zaXRpb25cbiAgICAgICAgICAgICAgOiAnbm9uZScsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhb2xkUHJvcHMgfHxcbiAgICAgICAgICBvbGRQcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlICE9PVxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMubmV0d29ya0FjdGl2aXR5SW5kaWNhdG9yVmlzaWJsZVxuICAgICAgICApIHtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VySU9TLnNldE5ldHdvcmtBY3Rpdml0eUluZGljYXRvclZpc2libGUoXG4gICAgICAgICAgICBtZXJnZWRQcm9wcy5uZXR3b3JrQWN0aXZpdHlJbmRpY2F0b3JWaXNpYmxlLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICAgICAgICAvL3RvZG8oVDYwNjg0Nzg3KTogQWRkIGJhY2sgb3B0aW1pemF0aW9uIHRvIG9ubHkgdXBkYXRlIGJhciBzdHlsZSBhbmRcbiAgICAgICAgLy9iYWNrZ3JvdW5kIGNvbG9yIGlmIHRoZSBuZXcgdmFsdWUgaXMgZGlmZmVyZW50IGZyb20gdGhlIG9sZCB2YWx1ZS5cbiAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0U3R5bGUobWVyZ2VkUHJvcHMuYmFyU3R5bGUudmFsdWUpO1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRDb2xvciA9IHByb2Nlc3NDb2xvcihtZXJnZWRQcm9wcy5iYWNrZ3JvdW5kQ29sb3IudmFsdWUpO1xuICAgICAgICBpZiAocHJvY2Vzc2VkQ29sb3IgPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIGBcXGBTdGF0dXNCYXIuX3VwZGF0ZVByb3BzU3RhY2tcXGA6IENvbG9yICR7bWVyZ2VkUHJvcHMuYmFja2dyb3VuZENvbG9yLnZhbHVlfSBwYXJzZWQgdG8gbnVsbCBvciB1bmRlZmluZWRgLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgICAgdHlwZW9mIHByb2Nlc3NlZENvbG9yID09PSAnbnVtYmVyJyxcbiAgICAgICAgICAgICdVbmV4cGVjdGVkIGNvbG9yIGdpdmVuIGluIFN0YXR1c0Jhci5fdXBkYXRlUHJvcHNTdGFjaycsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRDb2xvcihcbiAgICAgICAgICAgIHByb2Nlc3NlZENvbG9yLFxuICAgICAgICAgICAgbWVyZ2VkUHJvcHMuYmFja2dyb3VuZENvbG9yLmFuaW1hdGVkLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvbGRQcm9wcyB8fCBvbGRQcm9wcy5oaWRkZW4/LnZhbHVlICE9PSBtZXJnZWRQcm9wcy5oaWRkZW4udmFsdWUpIHtcbiAgICAgICAgICBOYXRpdmVTdGF0dXNCYXJNYW5hZ2VyQW5kcm9pZC5zZXRIaWRkZW4obWVyZ2VkUHJvcHMuaGlkZGVuLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBY3Rpdml0aWVzIGFyZSBub3QgdHJhbnNsdWNlbnQgYnkgZGVmYXVsdCwgc28gYWx3YXlzIHNldCBpZiB0cnVlLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgIW9sZFByb3BzIHx8XG4gICAgICAgICAgb2xkUHJvcHMudHJhbnNsdWNlbnQgIT09IG1lcmdlZFByb3BzLnRyYW5zbHVjZW50IHx8XG4gICAgICAgICAgbWVyZ2VkUHJvcHMudHJhbnNsdWNlbnRcbiAgICAgICAgKSB7XG4gICAgICAgICAgTmF0aXZlU3RhdHVzQmFyTWFuYWdlckFuZHJvaWQuc2V0VHJhbnNsdWNlbnQobWVyZ2VkUHJvcHMudHJhbnNsdWNlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgcHJvcCB2YWx1ZXMuXG4gICAgICBTdGF0dXNCYXIuX2N1cnJlbnRWYWx1ZXMgPSBtZXJnZWRQcm9wcztcbiAgICB9KTtcbiAgfTtcblxuICByZW5kZXIoKTogUmVhY3QuTm9kZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RhdHVzQmFyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBWUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsOEJBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLDBCQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxVQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxLQUFBLEdBQUFDLHVCQUFBLENBQUFOLE9BQUE7QUFBK0IsSUFBQU8sVUFBQSxFQUFBQyxxQkFBQTtBQUFBLFNBQUFGLHdCQUFBRyxDQUFBLEVBQUFDLENBQUEsNkJBQUFDLE9BQUEsTUFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBTCx1QkFBQSxZQUFBQSx3QkFBQUcs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