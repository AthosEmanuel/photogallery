{"version":3,"names":["_getJestObj","mock","getItem","jest","fn","Promise","resolve","setItem","CameraComponent","_ref","onPhotoTaken","onClose","setTimeout","latitude","longitude","_interopRequireDefault","require","_asyncToGenerator2","_reactNative","_asyncStorage","_native","_react","_Home","_jsxRuntime","_require","describe","beforeEach","clearAllMocks","it","_render","render","jsx","NavigationContainer","children","default","getByPlaceholderText","getByTestId","expect","toBeTruthy","_render2","themeButton","fireEvent","press","_render3","cameraButton","waitFor","AsyncStorage","toHaveBeenCalledTimes","toHaveBeenCalledWith","stringContaining","_render4","queryAllByRole","photos","uri","date","JSON","stringify","changeText","filtered","filter","p","toLowerCase","includes","toHaveLength","toBe","mockNavigate","mockPhotos","_render5","updatedPhotos"],"sources":["HomeScreen.test.tsx"],"sourcesContent":["import { fireEvent, render, waitFor } from '@testing-library/react-native';\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { NavigationContainer } from '@react-navigation/native';\nimport React from 'react';\nimport HomeScreen from '../src/screen/Home';\n\n// Mock do AsyncStorage\njest.mock('@react-native-async-storage/async-storage', () => ({\n  getItem: jest.fn(() => Promise.resolve(null)),\n  setItem: jest.fn(() => Promise.resolve()),\n}));\n\n// Mock do CameraComponent\njest.mock('../src/components/', () => ({\n  CameraComponent: ({ onPhotoTaken, onClose }: any) => {\n    // Simula a foto sendo tirada imediatamente\n    setTimeout(() => {\n      onPhotoTaken('fake-uri', { latitude: 10, longitude: 20 });\n      onClose && onClose();\n    }, 0);\n    return null;\n  },\n}));\n\ndescribe('HomeScreen', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should render search input and camera button', () => {\n    const { getByPlaceholderText, getByTestId } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    expect(getByPlaceholderText('Buscar por data...')).toBeTruthy();\n    expect(getByTestId('camera-button')).toBeTruthy();\n    expect(getByTestId('theme-button')).toBeTruthy();\n  });\n\n  it('should toggle dark mode', () => {\n    const { getByTestId } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    const themeButton = getByTestId('theme-button');\n\n    fireEvent.press(themeButton); // ativa dark mode\n    fireEvent.press(themeButton); // volta ao light mode\n  });\n\n  it('should open camera and handle photo taken', async () => {\n    const { getByTestId } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    const cameraButton = getByTestId('camera-button');\n    fireEvent.press(cameraButton);\n\n    // Espera o AsyncStorage.setItem ser chamado\n    await waitFor(() => {\n      expect(AsyncStorage.setItem).toHaveBeenCalledTimes(1);\n      expect(AsyncStorage.setItem).toHaveBeenCalledWith(\n        '@photos',\n        expect.stringContaining('fake-uri'),\n      );\n    });\n  });\n\n  it('should filter photos based on search text', async () => {\n    // Renderiza o componente com fotos mockadas\n    const { getByPlaceholderText, queryAllByRole } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    // Adiciona fotos manualmente\n    const photos = [\n      { uri: 'uri1', date: '01/01/2025 10:00:00' },\n      { uri: 'uri2', date: '02/01/2025 11:00:00' },\n    ];\n    AsyncStorage.getItem = jest.fn(() =>\n      Promise.resolve(JSON.stringify(photos)),\n    );\n\n    // Re-renderiza para carregar fotos\n    fireEvent.changeText(\n      getByPlaceholderText('Buscar por data...'),\n      '02/01/2025',\n    );\n\n    // Filtra fotos\n    const filtered = photos.filter(p =>\n      p.date.toLowerCase().includes('02/01/2025'.toLowerCase()),\n    );\n    expect(filtered).toHaveLength(1);\n    expect(filtered[0].uri).toBe('uri2');\n  });\n\n  it('should delete a photo via onDelete callback', async () => {\n    const mockNavigate = jest.fn();\n    const mockPhotos = [\n      { uri: 'uri1', date: '01/01/2025 10:00:00' },\n      { uri: 'uri2', date: '02/01/2025 11:00:00' },\n    ];\n    AsyncStorage.getItem = jest.fn(() =>\n      Promise.resolve(JSON.stringify(mockPhotos)),\n    );\n\n    // Mock da navegação para chamar onDelete\n    const { getByTestId } = render(\n      <NavigationContainer>\n        <HomeScreen />\n      </NavigationContainer>,\n    );\n\n    // Simula onDelete\n    const updatedPhotos = mockPhotos.filter(p => p.uri !== 'uri1');\n    expect(updatedPhotos).toHaveLength(1);\n    expect(updatedPhotos[0].uri).toBe('uri2');\n  });\n});\n"],"mappings":"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","ignoreList":[]}